!function(t,a){if("object"==typeof exports&&"object"==typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define(a);else{var r=a();for(var n in r)("object"==typeof exports?exports:t)[n]=r[n]}}(this,function(){return function(r){function n(t){if(e[t])return e[t].exports;var a=e[t]={exports:{},id:t,loaded:!1};return r[t].call(a.exports,a,a.exports,n),a.loaded=!0,a.exports}var e={};return n.m=r,n.c=e,n.p="",n(0)}([function(t,a,r){a.glMatrix=r(1),a.mat2=r(2),a.mat2d=r(3),a.mat3=r(4),a.mat4=r(5),a.quat=r(6),a.vec2=r(9),a.vec3=r(7),a.vec4=r(8)},function(t,a){var r={EPSILON:1e-6};r.ARRAY_TYPE="undefined"!=typeof Float32Array?Float32Array:Array,r.RANDOM=Math.random,r.ENABLE_SIMD=!1,r.SIMD_AVAILABLE=r.ARRAY_TYPE===Float32Array&&"SIMD"in this,r.USE_SIMD=r.ENABLE_SIMD&&r.SIMD_AVAILABLE,r.setMatrixArrayType=function(t){r.ARRAY_TYPE=t};var n=Math.PI/180;r.toRadian=function(t){return t*n},t.exports=r},function(t,a,r){var n=r(1),e={create:function(){var t=new n.ARRAY_TYPE(4);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},clone:function(t){var a=new n.ARRAY_TYPE(4);return a[0]=t[0],a[1]=t[1],a[2]=t[2],a[3]=t[3],a},copy:function(t,a){return t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t},identity:function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},transpose:function(t,a){if(t===a){var r=a[1];t[1]=a[2],t[2]=r}else t[0]=a[0],t[1]=a[2],t[2]=a[1],t[3]=a[3];return t},invert:function(t,a){var r=a[0],n=a[1],e=a[2],o=a[3],l=r*o-e*n;return l?(l=1/l,t[0]=o*l,t[1]=-n*l,t[2]=-e*l,t[3]=r*l,t):null},adjoint:function(t,a){var r=a[0];return t[0]=a[3],t[1]=-a[1],t[2]=-a[2],t[3]=r,t},determinant:function(t){return t[0]*t[3]-t[2]*t[1]},multiply:function(t,a,r){var n=a[0],e=a[1],o=a[2],l=a[3],u=r[0],i=r[1],M=r[2],c=r[3];return t[0]=n*u+o*i,t[1]=e*u+l*i,t[2]=n*M+o*c,t[3]=e*M+l*c,t}};e.mul=e.multiply,e.rotate=function(t,a,r){var n=a[0],e=a[1],o=a[2],l=a[3],u=Math.sin(r),i=Math.cos(r);return t[0]=n*i+o*u,t[1]=e*i+l*u,t[2]=n*-u+o*i,t[3]=e*-u+l*i,t},e.scale=function(t,a,r){var n=a[0],e=a[1],o=a[2],l=a[3],u=r[0],i=r[1];return t[0]=n*u,t[1]=e*u,t[2]=o*i,t[3]=l*i,t},e.fromRotation=function(t,a){var r=Math.sin(a),n=Math.cos(a);return t[0]=n,t[1]=r,t[2]=-r,t[3]=n,t},e.fromScaling=function(t,a){return t[0]=a[0],t[1]=0,t[2]=0,t[3]=a[1],t},e.str=function(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},e.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2))},e.LDU=function(t,a,r,n){return t[2]=n[2]/n[0],r[0]=n[0],r[1]=n[1],r[3]=n[3]-t[2]*r[1],[t,a,r]},t.exports=e},function(t,a,r){var n=r(1),e={create:function(){var t=new n.ARRAY_TYPE(6);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},clone:function(t){var a=new n.ARRAY_TYPE(6);return a[0]=t[0],a[1]=t[1],a[2]=t[2],a[3]=t[3],a[4]=t[4],a[5]=t[5],a},copy:function(t,a){return t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t[4]=a[4],t[5]=a[5],t},identity:function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},invert:function(t,a){var r=a[0],n=a[1],e=a[2],o=a[3],l=a[4],u=a[5],i=r*o-n*e;return i?(i=1/i,t[0]=o*i,t[1]=-n*i,t[2]=-e*i,t[3]=r*i,t[4]=(e*u-o*l)*i,t[5]=(n*l-r*u)*i,t):null},determinant:function(t){return t[0]*t[3]-t[1]*t[2]},multiply:function(t,a,r){var n=a[0],e=a[1],o=a[2],l=a[3],u=a[4],i=a[5],M=r[0],c=r[1],s=r[2],f=r[3],x=r[4],S=r[5];return t[0]=n*M+o*c,t[1]=e*M+l*c,t[2]=n*s+o*f,t[3]=e*s+l*f,t[4]=n*x+o*S+u,t[5]=e*x+l*S+i,t}};e.mul=e.multiply,e.rotate=function(t,a,r){var n=a[0],e=a[1],o=a[2],l=a[3],u=a[4],i=a[5],M=Math.sin(r),c=Math.cos(r);return t[0]=n*c+o*M,t[1]=e*c+l*M,t[2]=n*-M+o*c,t[3]=e*-M+l*c,t[4]=u,t[5]=i,t},e.scale=function(t,a,r){var n=a[0],e=a[1],o=a[2],l=a[3],u=a[4],i=a[5],M=r[0],c=r[1];return t[0]=n*M,t[1]=e*M,t[2]=o*c,t[3]=l*c,t[4]=u,t[5]=i,t},e.translate=function(t,a,r){var n=a[0],e=a[1],o=a[2],l=a[3],u=a[4],i=a[5],M=r[0],c=r[1];return t[0]=n,t[1]=e,t[2]=o,t[3]=l,t[4]=n*M+o*c+u,t[5]=e*M+l*c+i,t},e.fromRotation=function(t,a){var r=Math.sin(a),n=Math.cos(a);return t[0]=n,t[1]=r,t[2]=-r,t[3]=n,t[4]=0,t[5]=0,t},e.fromScaling=function(t,a){return t[0]=a[0],t[1]=0,t[2]=0,t[3]=a[1],t[4]=0,t[5]=0,t},e.fromTranslation=function(t,a){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=a[0],t[5]=a[1],t},e.str=function(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"},e.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+1)},t.exports=e},function(t,a,r){var n=r(1),e={create:function(){var t=new n.ARRAY_TYPE(9);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},fromMat4:function(t,a){return t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[4],t[4]=a[5],t[5]=a[6],t[6]=a[8],t[7]=a[9],t[8]=a[10],t},clone:function(t){var a=new n.ARRAY_TYPE(9);return a[0]=t[0],a[1]=t[1],a[2]=t[2],a[3]=t[3],a[4]=t[4],a[5]=t[5],a[6]=t[6],a[7]=t[7],a[8]=t[8],a},copy:function(t,a){return t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t[4]=a[4],t[5]=a[5],t[6]=a[6],t[7]=a[7],t[8]=a[8],t},identity:function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},transpose:function(t,a){if(t===a){var r=a[1],n=a[2],e=a[5];t[1]=a[3],t[2]=a[6],t[3]=r,t[5]=a[7],t[6]=n,t[7]=e}else t[0]=a[0],t[1]=a[3],t[2]=a[6],t[3]=a[1],t[4]=a[4],t[5]=a[7],t[6]=a[2],t[7]=a[5],t[8]=a[8];return t},invert:function(t,a){var r=a[0],n=a[1],e=a[2],o=a[3],l=a[4],u=a[5],i=a[6],M=a[7],c=a[8],s=c*l-u*M,f=-c*o+u*i,x=M*o-l*i,S=r*s+n*f+e*x;return S?(S=1/S,t[0]=s*S,t[1]=(-c*n+e*M)*S,t[2]=(u*n-e*l)*S,t[3]=f*S,t[4]=(c*r-e*i)*S,t[5]=(-u*r+e*o)*S,t[6]=x*S,t[7]=(-M*r+n*i)*S,t[8]=(l*r-n*o)*S,t):null},adjoint:function(t,a){var r=a[0],n=a[1],e=a[2],o=a[3],l=a[4],u=a[5],i=a[6],M=a[7],c=a[8];return t[0]=l*c-u*M,t[1]=e*M-n*c,t[2]=n*u-e*l,t[3]=u*i-o*c,t[4]=r*c-e*i,t[5]=e*o-r*u,t[6]=o*M-l*i,t[7]=n*i-r*M,t[8]=r*l-n*o,t},determinant:function(t){var a=t[0],r=t[1],n=t[2],e=t[3],o=t[4],l=t[5],u=t[6],i=t[7],M=t[8];return a*(M*o-l*i)+r*(-M*e+l*u)+n*(i*e-o*u)},multiply:function(t,a,r){var n=a[0],e=a[1],o=a[2],l=a[3],u=a[4],i=a[5],M=a[6],c=a[7],s=a[8],f=r[0],x=r[1],S=r[2],I=r[3],D=r[4],m=r[5],F=r[6],h=r[7],v=r[8];return t[0]=f*n+x*l+S*M,t[1]=f*e+x*u+S*c,t[2]=f*o+x*i+S*s,t[3]=I*n+D*l+m*M,t[4]=I*e+D*u+m*c,t[5]=I*o+D*i+m*s,t[6]=F*n+h*l+v*M,t[7]=F*e+h*u+v*c,t[8]=F*o+h*i+v*s,t}};e.mul=e.multiply,e.translate=function(t,a,r){var n=a[0],e=a[1],o=a[2],l=a[3],u=a[4],i=a[5],M=a[6],c=a[7],s=a[8],f=r[0],x=r[1];return t[0]=n,t[1]=e,t[2]=o,t[3]=l,t[4]=u,t[5]=i,t[6]=f*n+x*l+M,t[7]=f*e+x*u+c,t[8]=f*o+x*i+s,t},e.rotate=function(t,a,r){var n=a[0],e=a[1],o=a[2],l=a[3],u=a[4],i=a[5],M=a[6],c=a[7],s=a[8],f=Math.sin(r),x=Math.cos(r);return t[0]=x*n+f*l,t[1]=x*e+f*u,t[2]=x*o+f*i,t[3]=x*l-f*n,t[4]=x*u-f*e,t[5]=x*i-f*o,t[6]=M,t[7]=c,t[8]=s,t},e.scale=function(t,a,r){var n=r[0],e=r[1];return t[0]=n*a[0],t[1]=n*a[1],t[2]=n*a[2],t[3]=e*a[3],t[4]=e*a[4],t[5]=e*a[5],t[6]=a[6],t[7]=a[7],t[8]=a[8],t},e.fromTranslation=function(t,a){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=a[0],t[7]=a[1],t[8]=1,t},e.fromRotation=function(t,a){var r=Math.sin(a),n=Math.cos(a);return t[0]=n,t[1]=r,t[2]=0,t[3]=-r,t[4]=n,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},e.fromScaling=function(t,a){return t[0]=a[0],t[1]=0,t[2]=0,t[3]=0,t[4]=a[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},e.fromMat2d=function(t,a){return t[0]=a[0],t[1]=a[1],t[2]=0,t[3]=a[2],t[4]=a[3],t[5]=0,t[6]=a[4],t[7]=a[5],t[8]=1,t},e.fromQuat=function(t,a){var r=a[0],n=a[1],e=a[2],o=a[3],l=r+r,u=n+n,i=e+e,M=r*l,c=n*l,s=n*u,f=e*l,x=e*u,S=e*i,I=o*l,D=o*u,m=o*i;return t[0]=1-s-S,t[3]=c-m,t[6]=f+D,t[1]=c+m,t[4]=1-M-S,t[7]=x-I,t[2]=f-D,t[5]=x+I,t[8]=1-M-s,t},e.normalFromMat4=function(t,a){var r=a[0],n=a[1],e=a[2],o=a[3],l=a[4],u=a[5],i=a[6],M=a[7],c=a[8],s=a[9],f=a[10],x=a[11],S=a[12],I=a[13],D=a[14],m=a[15],F=r*u-n*l,h=r*i-e*l,v=r*M-o*l,d=n*i-e*u,w=n*M-o*u,p=e*M-o*i,z=c*I-s*S,A=c*D-f*S,g=c*m-x*S,b=s*D-f*I,R=s*m-x*I,q=f*m-x*D,y=F*q-h*R+v*b+d*g-w*A+p*z;return y?(y=1/y,t[0]=(u*q-i*R+M*b)*y,t[1]=(i*g-l*q-M*A)*y,t[2]=(l*R-u*g+M*z)*y,t[3]=(e*R-n*q-o*b)*y,t[4]=(r*q-e*g+o*A)*y,t[5]=(n*g-r*R-o*z)*y,t[6]=(I*p-D*w+m*d)*y,t[7]=(D*v-S*p-m*h)*y,t[8]=(S*w-I*v+m*F)*y,t):null},e.str=function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},e.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2))},t.exports=e},function(t,a,r){var P=r(1),p={scalar:{},SIMD:{},create:function(){var t=new P.ARRAY_TYPE(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},clone:function(t){var a=new P.ARRAY_TYPE(16);return a[0]=t[0],a[1]=t[1],a[2]=t[2],a[3]=t[3],a[4]=t[4],a[5]=t[5],a[6]=t[6],a[7]=t[7],a[8]=t[8],a[9]=t[9],a[10]=t[10],a[11]=t[11],a[12]=t[12],a[13]=t[13],a[14]=t[14],a[15]=t[15],a},copy:function(t,a){return t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t[4]=a[4],t[5]=a[5],t[6]=a[6],t[7]=a[7],t[8]=a[8],t[9]=a[9],t[10]=a[10],t[11]=a[11],t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15],t},identity:function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}};p.scalar.transpose=function(t,a){if(t===a){var r=a[1],n=a[2],e=a[3],o=a[6],l=a[7],u=a[11];t[1]=a[4],t[2]=a[8],t[3]=a[12],t[4]=r,t[6]=a[9],t[7]=a[13],t[8]=n,t[9]=o,t[11]=a[14],t[12]=e,t[13]=l,t[14]=u}else t[0]=a[0],t[1]=a[4],t[2]=a[8],t[3]=a[12],t[4]=a[1],t[5]=a[5],t[6]=a[9],t[7]=a[13],t[8]=a[2],t[9]=a[6],t[10]=a[10],t[11]=a[14],t[12]=a[3],t[13]=a[7],t[14]=a[11],t[15]=a[15];return t},p.SIMD.transpose=function(t,a){var r,n,e,o,l,u,i,M,c,s;return r=SIMD.Float32x4.load(a,0),n=SIMD.Float32x4.load(a,4),e=SIMD.Float32x4.load(a,8),o=SIMD.Float32x4.load(a,12),l=SIMD.Float32x4.shuffle(r,n,0,1,4,5),u=SIMD.Float32x4.shuffle(e,o,0,1,4,5),i=SIMD.Float32x4.shuffle(l,u,0,2,4,6),M=SIMD.Float32x4.shuffle(l,u,1,3,5,7),SIMD.Float32x4.store(t,0,i),SIMD.Float32x4.store(t,4,M),l=SIMD.Float32x4.shuffle(r,n,2,3,6,7),u=SIMD.Float32x4.shuffle(e,o,2,3,6,7),c=SIMD.Float32x4.shuffle(l,u,0,2,4,6),s=SIMD.Float32x4.shuffle(l,u,1,3,5,7),SIMD.Float32x4.store(t,8,c),SIMD.Float32x4.store(t,12,s),t},p.transpose=P.USE_SIMD?p.SIMD.transpose:p.scalar.transpose,p.scalar.invert=function(t,a){var r=a[0],n=a[1],e=a[2],o=a[3],l=a[4],u=a[5],i=a[6],M=a[7],c=a[8],s=a[9],f=a[10],x=a[11],S=a[12],I=a[13],D=a[14],m=a[15],F=r*u-n*l,h=r*i-e*l,v=r*M-o*l,d=n*i-e*u,w=n*M-o*u,p=e*M-o*i,z=c*I-s*S,A=c*D-f*S,g=c*m-x*S,b=s*D-f*I,R=s*m-x*I,q=f*m-x*D,y=F*q-h*R+v*b+d*g-w*A+p*z;return y?(y=1/y,t[0]=(u*q-i*R+M*b)*y,t[1]=(e*R-n*q-o*b)*y,t[2]=(I*p-D*w+m*d)*y,t[3]=(f*w-s*p-x*d)*y,t[4]=(i*g-l*q-M*A)*y,t[5]=(r*q-e*g+o*A)*y,t[6]=(D*v-S*p-m*h)*y,t[7]=(c*p-f*v+x*h)*y,t[8]=(l*R-u*g+M*z)*y,t[9]=(n*g-r*R-o*z)*y,t[10]=(S*w-I*v+m*F)*y,t[11]=(s*v-c*w-x*F)*y,t[12]=(u*A-l*b-i*z)*y,t[13]=(r*b-n*A+e*z)*y,t[14]=(I*h-S*d-D*F)*y,t[15]=(c*d-s*h+f*F)*y,t):null},p.SIMD.invert=function(t,a){var r,n,e,o,l,u,i,M,c,s,f=SIMD.Float32x4.load(a,0),x=SIMD.Float32x4.load(a,4),S=SIMD.Float32x4.load(a,8),I=SIMD.Float32x4.load(a,12);return l=SIMD.Float32x4.shuffle(f,x,0,1,4,5),n=SIMD.Float32x4.shuffle(S,I,0,1,4,5),r=SIMD.Float32x4.shuffle(l,n,0,2,4,6),n=SIMD.Float32x4.shuffle(n,l,1,3,5,7),l=SIMD.Float32x4.shuffle(f,x,2,3,6,7),o=SIMD.Float32x4.shuffle(S,I,2,3,6,7),e=SIMD.Float32x4.shuffle(l,o,0,2,4,6),o=SIMD.Float32x4.shuffle(o,l,1,3,5,7),l=SIMD.Float32x4.mul(e,o),l=SIMD.Float32x4.swizzle(l,1,0,3,2),u=SIMD.Float32x4.mul(n,l),i=SIMD.Float32x4.mul(r,l),l=SIMD.Float32x4.swizzle(l,2,3,0,1),u=SIMD.Float32x4.sub(SIMD.Float32x4.mul(n,l),u),i=SIMD.Float32x4.sub(SIMD.Float32x4.mul(r,l),i),i=SIMD.Float32x4.swizzle(i,2,3,0,1),l=SIMD.Float32x4.mul(n,e),l=SIMD.Float32x4.swizzle(l,1,0,3,2),u=SIMD.Float32x4.add(SIMD.Float32x4.mul(o,l),u),c=SIMD.Float32x4.mul(r,l),l=SIMD.Float32x4.swizzle(l,2,3,0,1),u=SIMD.Float32x4.sub(u,SIMD.Float32x4.mul(o,l)),c=SIMD.Float32x4.sub(SIMD.Float32x4.mul(r,l),c),c=SIMD.Float32x4.swizzle(c,2,3,0,1),l=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(n,2,3,0,1),o),l=SIMD.Float32x4.swizzle(l,1,0,3,2),e=SIMD.Float32x4.swizzle(e,2,3,0,1),u=SIMD.Float32x4.add(SIMD.Float32x4.mul(e,l),u),M=SIMD.Float32x4.mul(r,l),l=SIMD.Float32x4.swizzle(l,2,3,0,1),u=SIMD.Float32x4.sub(u,SIMD.Float32x4.mul(e,l)),M=SIMD.Float32x4.sub(SIMD.Float32x4.mul(r,l),M),M=SIMD.Float32x4.swizzle(M,2,3,0,1),l=SIMD.Float32x4.mul(r,n),l=SIMD.Float32x4.swizzle(l,1,0,3,2),M=SIMD.Float32x4.add(SIMD.Float32x4.mul(o,l),M),c=SIMD.Float32x4.sub(SIMD.Float32x4.mul(e,l),c),l=SIMD.Float32x4.swizzle(l,2,3,0,1),M=SIMD.Float32x4.sub(SIMD.Float32x4.mul(o,l),M),c=SIMD.Float32x4.sub(c,SIMD.Float32x4.mul(e,l)),l=SIMD.Float32x4.mul(r,o),l=SIMD.Float32x4.swizzle(l,1,0,3,2),i=SIMD.Float32x4.sub(i,SIMD.Float32x4.mul(e,l)),M=SIMD.Float32x4.add(SIMD.Float32x4.mul(n,l),M),l=SIMD.Float32x4.swizzle(l,2,3,0,1),i=SIMD.Float32x4.add(SIMD.Float32x4.mul(e,l),i),M=SIMD.Float32x4.sub(M,SIMD.Float32x4.mul(n,l)),l=SIMD.Float32x4.mul(r,e),l=SIMD.Float32x4.swizzle(l,1,0,3,2),i=SIMD.Float32x4.add(SIMD.Float32x4.mul(o,l),i),c=SIMD.Float32x4.sub(c,SIMD.Float32x4.mul(n,l)),l=SIMD.Float32x4.swizzle(l,2,3,0,1),i=SIMD.Float32x4.sub(i,SIMD.Float32x4.mul(o,l)),c=SIMD.Float32x4.add(SIMD.Float32x4.mul(n,l),c),s=SIMD.Float32x4.mul(r,u),s=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(s,2,3,0,1),s),s=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(s,1,0,3,2),s),l=SIMD.Float32x4.reciprocalApproximation(s),s=SIMD.Float32x4.sub(SIMD.Float32x4.add(l,l),SIMD.Float32x4.mul(s,SIMD.Float32x4.mul(l,l))),(s=SIMD.Float32x4.swizzle(s,0,0,0,0))?(SIMD.Float32x4.store(t,0,SIMD.Float32x4.mul(s,u)),SIMD.Float32x4.store(t,4,SIMD.Float32x4.mul(s,i)),SIMD.Float32x4.store(t,8,SIMD.Float32x4.mul(s,M)),SIMD.Float32x4.store(t,12,SIMD.Float32x4.mul(s,c)),t):null},p.invert=P.USE_SIMD?p.SIMD.invert:p.scalar.invert,p.scalar.adjoint=function(t,a){var r=a[0],n=a[1],e=a[2],o=a[3],l=a[4],u=a[5],i=a[6],M=a[7],c=a[8],s=a[9],f=a[10],x=a[11],S=a[12],I=a[13],D=a[14],m=a[15];return t[0]=u*(f*m-x*D)-s*(i*m-M*D)+I*(i*x-M*f),t[1]=-(n*(f*m-x*D)-s*(e*m-o*D)+I*(e*x-o*f)),t[2]=n*(i*m-M*D)-u*(e*m-o*D)+I*(e*M-o*i),t[3]=-(n*(i*x-M*f)-u*(e*x-o*f)+s*(e*M-o*i)),t[4]=-(l*(f*m-x*D)-c*(i*m-M*D)+S*(i*x-M*f)),t[5]=r*(f*m-x*D)-c*(e*m-o*D)+S*(e*x-o*f),t[6]=-(r*(i*m-M*D)-l*(e*m-o*D)+S*(e*M-o*i)),t[7]=r*(i*x-M*f)-l*(e*x-o*f)+c*(e*M-o*i),t[8]=l*(s*m-x*I)-c*(u*m-M*I)+S*(u*x-M*s),t[9]=-(r*(s*m-x*I)-c*(n*m-o*I)+S*(n*x-o*s)),t[10]=r*(u*m-M*I)-l*(n*m-o*I)+S*(n*M-o*u),t[11]=-(r*(u*x-M*s)-l*(n*x-o*s)+c*(n*M-o*u)),t[12]=-(l*(s*D-f*I)-c*(u*D-i*I)+S*(u*f-i*s)),t[13]=r*(s*D-f*I)-c*(n*D-e*I)+S*(n*f-e*s),t[14]=-(r*(u*D-i*I)-l*(n*D-e*I)+S*(n*i-e*u)),t[15]=r*(u*f-i*s)-l*(n*f-e*s)+c*(n*i-e*u),t},p.SIMD.adjoint=function(t,a){var r,n,e,o,l,u,i,M,c,s=SIMD.Float32x4.load(a,0),f=SIMD.Float32x4.load(a,4),x=SIMD.Float32x4.load(a,8),S=SIMD.Float32x4.load(a,12);return l=SIMD.Float32x4.shuffle(s,f,0,1,4,5),n=SIMD.Float32x4.shuffle(x,S,0,1,4,5),r=SIMD.Float32x4.shuffle(l,n,0,2,4,6),n=SIMD.Float32x4.shuffle(n,l,1,3,5,7),l=SIMD.Float32x4.shuffle(s,f,2,3,6,7),o=SIMD.Float32x4.shuffle(x,S,2,3,6,7),e=SIMD.Float32x4.shuffle(l,o,0,2,4,6),o=SIMD.Float32x4.shuffle(o,l,1,3,5,7),l=SIMD.Float32x4.mul(e,o),l=SIMD.Float32x4.swizzle(l,1,0,3,2),u=SIMD.Float32x4.mul(n,l),i=SIMD.Float32x4.mul(r,l),l=SIMD.Float32x4.swizzle(l,2,3,0,1),u=SIMD.Float32x4.sub(SIMD.Float32x4.mul(n,l),u),i=SIMD.Float32x4.sub(SIMD.Float32x4.mul(r,l),i),i=SIMD.Float32x4.swizzle(i,2,3,0,1),l=SIMD.Float32x4.mul(n,e),l=SIMD.Float32x4.swizzle(l,1,0,3,2),u=SIMD.Float32x4.add(SIMD.Float32x4.mul(o,l),u),c=SIMD.Float32x4.mul(r,l),l=SIMD.Float32x4.swizzle(l,2,3,0,1),u=SIMD.Float32x4.sub(u,SIMD.Float32x4.mul(o,l)),c=SIMD.Float32x4.sub(SIMD.Float32x4.mul(r,l),c),c=SIMD.Float32x4.swizzle(c,2,3,0,1),l=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(n,2,3,0,1),o),l=SIMD.Float32x4.swizzle(l,1,0,3,2),e=SIMD.Float32x4.swizzle(e,2,3,0,1),u=SIMD.Float32x4.add(SIMD.Float32x4.mul(e,l),u),M=SIMD.Float32x4.mul(r,l),l=SIMD.Float32x4.swizzle(l,2,3,0,1),u=SIMD.Float32x4.sub(u,SIMD.Float32x4.mul(e,l)),M=SIMD.Float32x4.sub(SIMD.Float32x4.mul(r,l),M),M=SIMD.Float32x4.swizzle(M,2,3,0,1),l=SIMD.Float32x4.mul(r,n),l=SIMD.Float32x4.swizzle(l,1,0,3,2),M=SIMD.Float32x4.add(SIMD.Float32x4.mul(o,l),M),c=SIMD.Float32x4.sub(SIMD.Float32x4.mul(e,l),c),l=SIMD.Float32x4.swizzle(l,2,3,0,1),M=SIMD.Float32x4.sub(SIMD.Float32x4.mul(o,l),M),c=SIMD.Float32x4.sub(c,SIMD.Float32x4.mul(e,l)),l=SIMD.Float32x4.mul(r,o),l=SIMD.Float32x4.swizzle(l,1,0,3,2),i=SIMD.Float32x4.sub(i,SIMD.Float32x4.mul(e,l)),M=SIMD.Float32x4.add(SIMD.Float32x4.mul(n,l),M),l=SIMD.Float32x4.swizzle(l,2,3,0,1),i=SIMD.Float32x4.add(SIMD.Float32x4.mul(e,l),i),M=SIMD.Float32x4.sub(M,SIMD.Float32x4.mul(n,l)),l=SIMD.Float32x4.mul(r,e),l=SIMD.Float32x4.swizzle(l,1,0,3,2),i=SIMD.Float32x4.add(SIMD.Float32x4.mul(o,l),i),c=SIMD.Float32x4.sub(c,SIMD.Float32x4.mul(n,l)),l=SIMD.Float32x4.swizzle(l,2,3,0,1),i=SIMD.Float32x4.sub(i,SIMD.Float32x4.mul(o,l)),c=SIMD.Float32x4.add(SIMD.Float32x4.mul(n,l),c),SIMD.Float32x4.store(t,0,u),SIMD.Float32x4.store(t,4,i),SIMD.Float32x4.store(t,8,M),SIMD.Float32x4.store(t,12,c),t},p.adjoint=P.USE_SIMD?p.SIMD.adjoint:p.scalar.adjoint,p.determinant=function(t){var a=t[0],r=t[1],n=t[2],e=t[3],o=t[4],l=t[5],u=t[6],i=t[7],M=t[8],c=t[9],s=t[10],f=t[11],x=t[12],S=t[13],I=t[14],D=t[15];return(a*l-r*o)*(s*D-f*I)-(a*u-n*o)*(c*D-f*S)+(a*i-e*o)*(c*I-s*S)+(r*u-n*l)*(M*D-f*x)-(r*i-e*l)*(M*I-s*x)+(n*i-e*u)*(M*S-c*x)},p.SIMD.multiply=function(t,a,r){var n=SIMD.Float32x4.load(a,0),e=SIMD.Float32x4.load(a,4),o=SIMD.Float32x4.load(a,8),l=SIMD.Float32x4.load(a,12),u=SIMD.Float32x4.load(r,0),i=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,0,0,0,0),n),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,1,1,1,1),e),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,2,2,2,2),o),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,3,3,3,3),l))));SIMD.Float32x4.store(t,0,i);var M=SIMD.Float32x4.load(r,4),c=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(M,0,0,0,0),n),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(M,1,1,1,1),e),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(M,2,2,2,2),o),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(M,3,3,3,3),l))));SIMD.Float32x4.store(t,4,c);var s=SIMD.Float32x4.load(r,8),f=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(s,0,0,0,0),n),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(s,1,1,1,1),e),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(s,2,2,2,2),o),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(s,3,3,3,3),l))));SIMD.Float32x4.store(t,8,f);var x=SIMD.Float32x4.load(r,12),S=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(x,0,0,0,0),n),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(x,1,1,1,1),e),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(x,2,2,2,2),o),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(x,3,3,3,3),l))));return SIMD.Float32x4.store(t,12,S),t},p.scalar.multiply=function(t,a,r){var n=a[0],e=a[1],o=a[2],l=a[3],u=a[4],i=a[5],M=a[6],c=a[7],s=a[8],f=a[9],x=a[10],S=a[11],I=a[12],D=a[13],m=a[14],F=a[15],h=r[0],v=r[1],d=r[2],w=r[3];return t[0]=h*n+v*u+d*s+w*I,t[1]=h*e+v*i+d*f+w*D,t[2]=h*o+v*M+d*x+w*m,t[3]=h*l+v*c+d*S+w*F,h=r[4],v=r[5],d=r[6],w=r[7],t[4]=h*n+v*u+d*s+w*I,t[5]=h*e+v*i+d*f+w*D,t[6]=h*o+v*M+d*x+w*m,t[7]=h*l+v*c+d*S+w*F,h=r[8],v=r[9],d=r[10],w=r[11],t[8]=h*n+v*u+d*s+w*I,t[9]=h*e+v*i+d*f+w*D,t[10]=h*o+v*M+d*x+w*m,t[11]=h*l+v*c+d*S+w*F,h=r[12],v=r[13],d=r[14],w=r[15],t[12]=h*n+v*u+d*s+w*I,t[13]=h*e+v*i+d*f+w*D,t[14]=h*o+v*M+d*x+w*m,t[15]=h*l+v*c+d*S+w*F,t},p.multiply=P.USE_SIMD?p.SIMD.multiply:p.scalar.multiply,p.mul=p.multiply,p.scalar.translate=function(t,a,r){var n,e,o,l,u,i,M,c,s,f,x,S,I=r[0],D=r[1],m=r[2];return t[15]=a===t?(t[12]=a[0]*I+a[4]*D+a[8]*m+a[12],t[13]=a[1]*I+a[5]*D+a[9]*m+a[13],t[14]=a[2]*I+a[6]*D+a[10]*m+a[14],a[3]*I+a[7]*D+a[11]*m+a[15]):(n=a[0],e=a[1],o=a[2],l=a[3],u=a[4],i=a[5],M=a[6],c=a[7],s=a[8],f=a[9],x=a[10],S=a[11],t[0]=n,t[1]=e,t[2]=o,t[3]=l,t[4]=u,t[5]=i,t[6]=M,t[7]=c,t[8]=s,t[9]=f,t[10]=x,t[11]=S,t[12]=n*I+u*D+s*m+a[12],t[13]=e*I+i*D+f*m+a[13],t[14]=o*I+M*D+x*m+a[14],l*I+c*D+S*m+a[15]),t},p.SIMD.translate=function(t,a,r){var n=SIMD.Float32x4.load(a,0),e=SIMD.Float32x4.load(a,4),o=SIMD.Float32x4.load(a,8),l=SIMD.Float32x4.load(a,12),u=SIMD.Float32x4(r[0],r[1],r[2],0);a!==t&&(t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t[4]=a[4],t[5]=a[5],t[6]=a[6],t[7]=a[7],t[8]=a[8],t[9]=a[9],t[10]=a[10],t[11]=a[11]),n=SIMD.Float32x4.mul(n,SIMD.Float32x4.swizzle(u,0,0,0,0)),e=SIMD.Float32x4.mul(e,SIMD.Float32x4.swizzle(u,1,1,1,1)),o=SIMD.Float32x4.mul(o,SIMD.Float32x4.swizzle(u,2,2,2,2));var i=SIMD.Float32x4.add(n,SIMD.Float32x4.add(e,SIMD.Float32x4.add(o,l)));return SIMD.Float32x4.store(t,12,i),t},p.translate=P.USE_SIMD?p.SIMD.translate:p.scalar.translate,p.scalar.scale=function(t,a,r){var n=r[0],e=r[1],o=r[2];return t[0]=a[0]*n,t[1]=a[1]*n,t[2]=a[2]*n,t[3]=a[3]*n,t[4]=a[4]*e,t[5]=a[5]*e,t[6]=a[6]*e,t[7]=a[7]*e,t[8]=a[8]*o,t[9]=a[9]*o,t[10]=a[10]*o,t[11]=a[11]*o,t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15],t},p.SIMD.scale=function(t,a,r){var n,e,o,l=SIMD.Float32x4(r[0],r[1],r[2],0);return n=SIMD.Float32x4.load(a,0),SIMD.Float32x4.store(t,0,SIMD.Float32x4.mul(n,SIMD.Float32x4.swizzle(l,0,0,0,0))),e=SIMD.Float32x4.load(a,4),SIMD.Float32x4.store(t,4,SIMD.Float32x4.mul(e,SIMD.Float32x4.swizzle(l,1,1,1,1))),o=SIMD.Float32x4.load(a,8),SIMD.Float32x4.store(t,8,SIMD.Float32x4.mul(o,SIMD.Float32x4.swizzle(l,2,2,2,2))),t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15],t},p.scale=P.USE_SIMD?p.SIMD.scale:p.scalar.scale,p.rotate=function(t,a,r,n){var e,o,l,u,i,M,c,s,f,x,S,I,D,m,F,h,v,d,w,p,z,A,g,b,R=n[0],q=n[1],y=n[2],E=Math.sqrt(R*R+q*q+y*y);return Math.abs(E)<P.EPSILON?null:(R*=E=1/E,q*=E,y*=E,e=Math.sin(r),l=1-(o=Math.cos(r)),u=a[0],i=a[1],M=a[2],c=a[3],s=a[4],f=a[5],x=a[6],S=a[7],I=a[8],D=a[9],m=a[10],F=a[11],h=R*R*l+o,v=q*R*l+y*e,d=y*R*l-q*e,w=R*q*l-y*e,p=q*q*l+o,z=y*q*l+R*e,A=R*y*l+q*e,g=q*y*l-R*e,b=y*y*l+o,t[0]=u*h+s*v+I*d,t[1]=i*h+f*v+D*d,t[2]=M*h+x*v+m*d,t[3]=c*h+S*v+F*d,t[4]=u*w+s*p+I*z,t[5]=i*w+f*p+D*z,t[6]=M*w+x*p+m*z,t[7]=c*w+S*p+F*z,t[8]=u*A+s*g+I*b,t[9]=i*A+f*g+D*b,t[10]=M*A+x*g+m*b,t[11]=c*A+S*g+F*b,a!==t&&(t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15]),t)},p.rotateX=function(t,a,r){var n=Math.sin(r),e=Math.cos(r),o=a[4],l=a[5],u=a[6],i=a[7],M=a[8],c=a[9],s=a[10],f=a[11];return a!==t&&(t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15]),t[4]=o*e+M*n,t[5]=l*e+c*n,t[6]=u*e+s*n,t[7]=i*e+f*n,t[8]=M*e-o*n,t[9]=c*e-l*n,t[10]=s*e-u*n,t[11]=f*e-i*n,t},p.rotateY=function(t,a,r){var n=Math.sin(r),e=Math.cos(r),o=a[0],l=a[1],u=a[2],i=a[3],M=a[8],c=a[9],s=a[10],f=a[11];return a!==t&&(t[4]=a[4],t[5]=a[5],t[6]=a[6],t[7]=a[7],t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15]),t[0]=o*e-M*n,t[1]=l*e-c*n,t[2]=u*e-s*n,t[3]=i*e-f*n,t[8]=o*n+M*e,t[9]=l*n+c*e,t[10]=u*n+s*e,t[11]=i*n+f*e,t},p.rotateZ=function(t,a,r){var n=Math.sin(r),e=Math.cos(r),o=a[0],l=a[1],u=a[2],i=a[3],M=a[4],c=a[5],s=a[6],f=a[7];return a!==t&&(t[8]=a[8],t[9]=a[9],t[10]=a[10],t[11]=a[11],t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15]),t[0]=o*e+M*n,t[1]=l*e+c*n,t[2]=u*e+s*n,t[3]=i*e+f*n,t[4]=M*e-o*n,t[5]=c*e-l*n,t[6]=s*e-u*n,t[7]=f*e-i*n,t},p.fromTranslation=function(t,a){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=a[0],t[13]=a[1],t[14]=a[2],t[15]=1,t},p.fromScaling=function(t,a){return t[0]=a[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=a[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},p.fromRotation=function(t,a,r){var n,e,o,l=r[0],u=r[1],i=r[2],M=Math.sqrt(l*l+u*u+i*i);return Math.abs(M)<P.EPSILON?null:(l*=M=1/M,u*=M,i*=M,n=Math.sin(a),o=1-(e=Math.cos(a)),t[0]=l*l*o+e,t[1]=u*l*o+i*n,t[2]=i*l*o-u*n,t[3]=0,t[4]=l*u*o-i*n,t[5]=u*u*o+e,t[6]=i*u*o+l*n,t[7]=0,t[8]=l*i*o+u*n,t[9]=u*i*o-l*n,t[10]=i*i*o+e,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)},p.fromXRotation=function(t,a){var r=Math.sin(a),n=Math.cos(a);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n,t[6]=r,t[7]=0,t[8]=0,t[9]=-r,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},p.fromYRotation=function(t,a){var r=Math.sin(a),n=Math.cos(a);return t[0]=n,t[1]=0,t[2]=-r,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=r,t[9]=0,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},p.fromZRotation=function(t,a){var r=Math.sin(a),n=Math.cos(a);return t[0]=n,t[1]=r,t[2]=0,t[3]=0,t[4]=-r,t[5]=n,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},p.fromRotationTranslation=function(t,a,r){var n=a[0],e=a[1],o=a[2],l=a[3],u=n+n,i=e+e,M=o+o,c=n*u,s=n*i,f=n*M,x=e*i,S=e*M,I=o*M,D=l*u,m=l*i,F=l*M;return t[0]=1-(x+I),t[1]=s+F,t[2]=f-m,t[3]=0,t[4]=s-F,t[5]=1-(c+I),t[6]=S+D,t[7]=0,t[8]=f+m,t[9]=S-D,t[10]=1-(c+x),t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t},p.fromRotationTranslationScale=function(t,a,r,n){var e=a[0],o=a[1],l=a[2],u=a[3],i=e+e,M=o+o,c=l+l,s=e*i,f=e*M,x=e*c,S=o*M,I=o*c,D=l*c,m=u*i,F=u*M,h=u*c,v=n[0],d=n[1],w=n[2];return t[0]=(1-(S+D))*v,t[1]=(f+h)*v,t[2]=(x-F)*v,t[3]=0,t[4]=(f-h)*d,t[5]=(1-(s+D))*d,t[6]=(I+m)*d,t[7]=0,t[8]=(x+F)*w,t[9]=(I-m)*w,t[10]=(1-(s+S))*w,t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t},p.fromRotationTranslationScaleOrigin=function(t,a,r,n,e){var o=a[0],l=a[1],u=a[2],i=a[3],M=o+o,c=l+l,s=u+u,f=o*M,x=o*c,S=o*s,I=l*c,D=l*s,m=u*s,F=i*M,h=i*c,v=i*s,d=n[0],w=n[1],p=n[2],z=e[0],A=e[1],g=e[2];return t[0]=(1-(I+m))*d,t[1]=(x+v)*d,t[2]=(S-h)*d,t[3]=0,t[4]=(x-v)*w,t[5]=(1-(f+m))*w,t[6]=(D+F)*w,t[7]=0,t[8]=(S+h)*p,t[9]=(D-F)*p,t[10]=(1-(f+I))*p,t[11]=0,t[12]=r[0]+z-(t[0]*z+t[4]*A+t[8]*g),t[13]=r[1]+A-(t[1]*z+t[5]*A+t[9]*g),t[14]=r[2]+g-(t[2]*z+t[6]*A+t[10]*g),t[15]=1,t},p.fromQuat=function(t,a){var r=a[0],n=a[1],e=a[2],o=a[3],l=r+r,u=n+n,i=e+e,M=r*l,c=n*l,s=n*u,f=e*l,x=e*u,S=e*i,I=o*l,D=o*u,m=o*i;return t[0]=1-s-S,t[1]=c+m,t[2]=f-D,t[3]=0,t[4]=c-m,t[5]=1-M-S,t[6]=x+I,t[7]=0,t[8]=f+D,t[9]=x-I,t[10]=1-M-s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},p.frustum=function(t,a,r,n,e,o,l){var u=1/(r-a),i=1/(e-n),M=1/(o-l);return t[0]=2*o*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*o*i,t[6]=0,t[7]=0,t[8]=(r+a)*u,t[9]=(e+n)*i,t[10]=(l+o)*M,t[11]=-1,t[12]=0,t[13]=0,t[14]=l*o*2*M,t[15]=0,t},p.perspective=function(t,a,r,n,e){var o=1/Math.tan(a/2),l=1/(n-e);return t[0]=o/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(e+n)*l,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*e*n*l,t[15]=0,t},p.perspectiveFromFieldOfView=function(t,a,r,n){var e=Math.tan(a.upDegrees*Math.PI/180),o=Math.tan(a.downDegrees*Math.PI/180),l=Math.tan(a.leftDegrees*Math.PI/180),u=Math.tan(a.rightDegrees*Math.PI/180),i=2/(l+u),M=2/(e+o);return t[0]=i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=M,t[6]=0,t[7]=0,t[8]=-(l-u)*i*.5,t[9]=(e-o)*M*.5,t[10]=n/(r-n),t[11]=-1,t[12]=0,t[13]=0,t[14]=n*r/(r-n),t[15]=0,t},p.ortho=function(t,a,r,n,e,o,l){var u=1/(a-r),i=1/(n-e),M=1/(o-l);return t[0]=-2*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*i,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*M,t[11]=0,t[12]=(a+r)*u,t[13]=(e+n)*i,t[14]=(l+o)*M,t[15]=1,t},p.lookAt=function(t,a,r,n){var e,o,l,u,i,M,c,s,f,x,S=a[0],I=a[1],D=a[2],m=n[0],F=n[1],h=n[2],v=r[0],d=r[1],w=r[2];return Math.abs(S-v)<P.EPSILON&&Math.abs(I-d)<P.EPSILON&&Math.abs(D-w)<P.EPSILON?p.identity(t):(c=S-v,s=I-d,f=D-w,e=F*(f*=x=1/Math.sqrt(c*c+s*s+f*f))-h*(s*=x),o=h*(c*=x)-m*f,l=m*s-F*c,(x=Math.sqrt(e*e+o*o+l*l))?(e*=x=1/x,o*=x,l*=x):l=o=e=0,u=s*l-f*o,i=f*e-c*l,M=c*o-s*e,(x=Math.sqrt(u*u+i*i+M*M))?(u*=x=1/x,i*=x,M*=x):M=i=u=0,t[0]=e,t[1]=u,t[2]=c,t[3]=0,t[4]=o,t[5]=i,t[6]=s,t[7]=0,t[8]=l,t[9]=M,t[10]=f,t[11]=0,t[12]=-(e*S+o*I+l*D),t[13]=-(u*S+i*I+M*D),t[14]=-(c*S+s*I+f*D),t[15]=1,t)},p.str=function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},p.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2)+Math.pow(t[9],2)+Math.pow(t[10],2)+Math.pow(t[11],2)+Math.pow(t[12],2)+Math.pow(t[13],2)+Math.pow(t[14],2)+Math.pow(t[15],2))},t.exports=p},function(t,a,r){var l,u,e,o,i,M,n=r(1),c=r(4),s=r(7),f=r(8),x={};x.create=function(){var t=new n.ARRAY_TYPE(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},x.rotationTo=(o=s.create(),i=s.fromValues(1,0,0),M=s.fromValues(0,1,0),function(t,a,r){var n=s.dot(a,r);return n<-.999999?(s.cross(o,i,a),s.length(o)<1e-6&&s.cross(o,M,a),s.normalize(o,o),x.setAxisAngle(t,o,Math.PI),t):.999999<n?(t[0]=0,t[1]=0,t[2]=0,t[3]=1,t):(s.cross(o,a,r),t[0]=o[0],t[1]=o[1],t[2]=o[2],t[3]=1+n,x.normalize(t,t))}),x.setAxes=(e=c.create(),function(t,a,r,n){return e[0]=r[0],e[3]=r[1],e[6]=r[2],e[1]=n[0],e[4]=n[1],e[7]=n[2],e[2]=-a[0],e[5]=-a[1],e[8]=-a[2],x.normalize(t,x.fromMat3(t,e))}),x.clone=f.clone,x.fromValues=f.fromValues,x.copy=f.copy,x.set=f.set,x.identity=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},x.setAxisAngle=function(t,a,r){r*=.5;var n=Math.sin(r);return t[0]=n*a[0],t[1]=n*a[1],t[2]=n*a[2],t[3]=Math.cos(r),t},x.add=f.add,x.multiply=function(t,a,r){var n=a[0],e=a[1],o=a[2],l=a[3],u=r[0],i=r[1],M=r[2],c=r[3];return t[0]=n*c+l*u+e*M-o*i,t[1]=e*c+l*i+o*u-n*M,t[2]=o*c+l*M+n*i-e*u,t[3]=l*c-n*u-e*i-o*M,t},x.mul=x.multiply,x.scale=f.scale,x.rotateX=function(t,a,r){r*=.5;var n=a[0],e=a[1],o=a[2],l=a[3],u=Math.sin(r),i=Math.cos(r);return t[0]=n*i+l*u,t[1]=e*i+o*u,t[2]=o*i-e*u,t[3]=l*i-n*u,t},x.rotateY=function(t,a,r){r*=.5;var n=a[0],e=a[1],o=a[2],l=a[3],u=Math.sin(r),i=Math.cos(r);return t[0]=n*i-o*u,t[1]=e*i+l*u,t[2]=o*i+n*u,t[3]=l*i-e*u,t},x.rotateZ=function(t,a,r){r*=.5;var n=a[0],e=a[1],o=a[2],l=a[3],u=Math.sin(r),i=Math.cos(r);return t[0]=n*i+e*u,t[1]=e*i-n*u,t[2]=o*i+l*u,t[3]=l*i-o*u,t},x.calculateW=function(t,a){var r=a[0],n=a[1],e=a[2];return t[0]=r,t[1]=n,t[2]=e,t[3]=Math.sqrt(Math.abs(1-r*r-n*n-e*e)),t},x.dot=f.dot,x.lerp=f.lerp,x.slerp=function(t,a,r,n){var e,o,l,u,i,M=a[0],c=a[1],s=a[2],f=a[3],x=r[0],S=r[1],I=r[2],D=r[3];return(o=M*x+c*S+s*I+f*D)<0&&(o=-o,x=-x,S=-S,I=-I,D=-D),i=1e-6<1-o?(e=Math.acos(o),l=Math.sin(e),u=Math.sin((1-n)*e)/l,Math.sin(n*e)/l):(u=1-n,n),t[0]=u*M+i*x,t[1]=u*c+i*S,t[2]=u*s+i*I,t[3]=u*f+i*D,t},x.sqlerp=(l=x.create(),u=x.create(),function(t,a,r,n,e,o){return x.slerp(l,a,e,o),x.slerp(u,r,n,o),x.slerp(t,l,u,2*o*(1-o)),t}),x.invert=function(t,a){var r=a[0],n=a[1],e=a[2],o=a[3],l=r*r+n*n+e*e+o*o,u=l?1/l:0;return t[0]=-r*u,t[1]=-n*u,t[2]=-e*u,t[3]=o*u,t},x.conjugate=function(t,a){return t[0]=-a[0],t[1]=-a[1],t[2]=-a[2],t[3]=a[3],t},x.length=f.length,x.len=x.length,x.squaredLength=f.squaredLength,x.sqrLen=x.squaredLength,x.normalize=f.normalize,x.fromMat3=function(t,a){var r,n=a[0]+a[4]+a[8];if(0<n)r=Math.sqrt(n+1),t[3]=.5*r,r=.5/r,t[0]=(a[5]-a[7])*r,t[1]=(a[6]-a[2])*r,t[2]=(a[1]-a[3])*r;else{var e=0;a[4]>a[0]&&(e=1),a[8]>a[3*e+e]&&(e=2);var o=(e+1)%3,l=(e+2)%3;r=Math.sqrt(a[3*e+e]-a[3*o+o]-a[3*l+l]+1),t[e]=.5*r,r=.5/r,t[3]=(a[3*o+l]-a[3*l+o])*r,t[o]=(a[3*o+e]+a[3*e+o])*r,t[l]=(a[3*l+e]+a[3*e+l])*r}return t},x.str=function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},t.exports=x},function(t,a,r){var i,o=r(1),l={};l.create=function(){var t=new o.ARRAY_TYPE(3);return t[0]=0,t[1]=0,t[2]=0,t},l.clone=function(t){var a=new o.ARRAY_TYPE(3);return a[0]=t[0],a[1]=t[1],a[2]=t[2],a},l.fromValues=function(t,a,r){var n=new o.ARRAY_TYPE(3);return n[0]=t,n[1]=a,n[2]=r,n},l.copy=function(t,a){return t[0]=a[0],t[1]=a[1],t[2]=a[2],t},l.set=function(t,a,r,n){return t[0]=a,t[1]=r,t[2]=n,t},l.add=function(t,a,r){return t[0]=a[0]+r[0],t[1]=a[1]+r[1],t[2]=a[2]+r[2],t},l.subtract=function(t,a,r){return t[0]=a[0]-r[0],t[1]=a[1]-r[1],t[2]=a[2]-r[2],t},l.sub=l.subtract,l.multiply=function(t,a,r){return t[0]=a[0]*r[0],t[1]=a[1]*r[1],t[2]=a[2]*r[2],t},l.mul=l.multiply,l.divide=function(t,a,r){return t[0]=a[0]/r[0],t[1]=a[1]/r[1],t[2]=a[2]/r[2],t},l.div=l.divide,l.min=function(t,a,r){return t[0]=Math.min(a[0],r[0]),t[1]=Math.min(a[1],r[1]),t[2]=Math.min(a[2],r[2]),t},l.max=function(t,a,r){return t[0]=Math.max(a[0],r[0]),t[1]=Math.max(a[1],r[1]),t[2]=Math.max(a[2],r[2]),t},l.scale=function(t,a,r){return t[0]=a[0]*r,t[1]=a[1]*r,t[2]=a[2]*r,t},l.scaleAndAdd=function(t,a,r,n){return t[0]=a[0]+r[0]*n,t[1]=a[1]+r[1]*n,t[2]=a[2]+r[2]*n,t},l.distance=function(t,a){var r=a[0]-t[0],n=a[1]-t[1],e=a[2]-t[2];return Math.sqrt(r*r+n*n+e*e)},l.dist=l.distance,l.squaredDistance=function(t,a){var r=a[0]-t[0],n=a[1]-t[1],e=a[2]-t[2];return r*r+n*n+e*e},l.sqrDist=l.squaredDistance,l.length=function(t){var a=t[0],r=t[1],n=t[2];return Math.sqrt(a*a+r*r+n*n)},l.len=l.length,l.squaredLength=function(t){var a=t[0],r=t[1],n=t[2];return a*a+r*r+n*n},l.sqrLen=l.squaredLength,l.negate=function(t,a){return t[0]=-a[0],t[1]=-a[1],t[2]=-a[2],t},l.inverse=function(t,a){return t[0]=1/a[0],t[1]=1/a[1],t[2]=1/a[2],t},l.normalize=function(t,a){var r=a[0],n=a[1],e=a[2],o=r*r+n*n+e*e;return 0<o&&(o=1/Math.sqrt(o),t[0]=a[0]*o,t[1]=a[1]*o,t[2]=a[2]*o),t},l.dot=function(t,a){return t[0]*a[0]+t[1]*a[1]+t[2]*a[2]},l.cross=function(t,a,r){var n=a[0],e=a[1],o=a[2],l=r[0],u=r[1],i=r[2];return t[0]=e*i-o*u,t[1]=o*l-n*i,t[2]=n*u-e*l,t},l.lerp=function(t,a,r,n){var e=a[0],o=a[1],l=a[2];return t[0]=e+n*(r[0]-e),t[1]=o+n*(r[1]-o),t[2]=l+n*(r[2]-l),t},l.hermite=function(t,a,r,n,e,o){var l=o*o,u=l*(2*o-3)+1,i=l*(o-2)+o,M=l*(o-1),c=l*(3-2*o);return t[0]=a[0]*u+r[0]*i+n[0]*M+e[0]*c,t[1]=a[1]*u+r[1]*i+n[1]*M+e[1]*c,t[2]=a[2]*u+r[2]*i+n[2]*M+e[2]*c,t},l.bezier=function(t,a,r,n,e,o){var l=1-o,u=l*l,i=o*o,M=u*l,c=3*o*u,s=3*i*l,f=i*o;return t[0]=a[0]*M+r[0]*c+n[0]*s+e[0]*f,t[1]=a[1]*M+r[1]*c+n[1]*s+e[1]*f,t[2]=a[2]*M+r[2]*c+n[2]*s+e[2]*f,t},l.random=function(t,a){a=a||1;var r=2*o.RANDOM()*Math.PI,n=2*o.RANDOM()-1,e=Math.sqrt(1-n*n)*a;return t[0]=Math.cos(r)*e,t[1]=Math.sin(r)*e,t[2]=n*a,t},l.transformMat4=function(t,a,r){var n=a[0],e=a[1],o=a[2],l=r[3]*n+r[7]*e+r[11]*o+r[15];return l=l||1,t[0]=(r[0]*n+r[4]*e+r[8]*o+r[12])/l,t[1]=(r[1]*n+r[5]*e+r[9]*o+r[13])/l,t[2]=(r[2]*n+r[6]*e+r[10]*o+r[14])/l,t},l.transformMat3=function(t,a,r){var n=a[0],e=a[1],o=a[2];return t[0]=n*r[0]+e*r[3]+o*r[6],t[1]=n*r[1]+e*r[4]+o*r[7],t[2]=n*r[2]+e*r[5]+o*r[8],t},l.transformQuat=function(t,a,r){var n=a[0],e=a[1],o=a[2],l=r[0],u=r[1],i=r[2],M=r[3],c=M*n+u*o-i*e,s=M*e+i*n-l*o,f=M*o+l*e-u*n,x=-l*n-u*e-i*o;return t[0]=c*M+x*-l+s*-i-f*-u,t[1]=s*M+x*-u+f*-l-c*-i,t[2]=f*M+x*-i+c*-u-s*-l,t},l.rotateX=function(t,a,r,n){var e=[],o=[];return e[0]=a[0]-r[0],e[1]=a[1]-r[1],e[2]=a[2]-r[2],o[0]=e[0],o[1]=e[1]*Math.cos(n)-e[2]*Math.sin(n),o[2]=e[1]*Math.sin(n)+e[2]*Math.cos(n),t[0]=o[0]+r[0],t[1]=o[1]+r[1],t[2]=o[2]+r[2],t},l.rotateY=function(t,a,r,n){var e=[],o=[];return e[0]=a[0]-r[0],e[1]=a[1]-r[1],e[2]=a[2]-r[2],o[0]=e[2]*Math.sin(n)+e[0]*Math.cos(n),o[1]=e[1],o[2]=e[2]*Math.cos(n)-e[0]*Math.sin(n),t[0]=o[0]+r[0],t[1]=o[1]+r[1],t[2]=o[2]+r[2],t},l.rotateZ=function(t,a,r,n){var e=[],o=[];return e[0]=a[0]-r[0],e[1]=a[1]-r[1],e[2]=a[2]-r[2],o[0]=e[0]*Math.cos(n)-e[1]*Math.sin(n),o[1]=e[0]*Math.sin(n)+e[1]*Math.cos(n),o[2]=e[2],t[0]=o[0]+r[0],t[1]=o[1]+r[1],t[2]=o[2]+r[2],t},l.forEach=(i=l.create(),function(t,a,r,n,e,o){var l,u;for(a||(a=3),r||(r=0),u=n?Math.min(n*a+r,t.length):t.length,l=r;l<u;l+=a)i[0]=t[l],i[1]=t[l+1],i[2]=t[l+2],e(i,i,o),t[l]=i[0],t[l+1]=i[1],t[l+2]=i[2];return t}),l.angle=function(t,a){var r=l.fromValues(t[0],t[1],t[2]),n=l.fromValues(a[0],a[1],a[2]);l.normalize(r,r),l.normalize(n,n);var e=l.dot(r,n);return 1<e?0:Math.acos(e)},l.str=function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},t.exports=l},function(t,a,r){var i,o=r(1),n={};n.create=function(){var t=new o.ARRAY_TYPE(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t},n.clone=function(t){var a=new o.ARRAY_TYPE(4);return a[0]=t[0],a[1]=t[1],a[2]=t[2],a[3]=t[3],a},n.fromValues=function(t,a,r,n){var e=new o.ARRAY_TYPE(4);return e[0]=t,e[1]=a,e[2]=r,e[3]=n,e},n.copy=function(t,a){return t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t},n.set=function(t,a,r,n,e){return t[0]=a,t[1]=r,t[2]=n,t[3]=e,t},n.add=function(t,a,r){return t[0]=a[0]+r[0],t[1]=a[1]+r[1],t[2]=a[2]+r[2],t[3]=a[3]+r[3],t},n.subtract=function(t,a,r){return t[0]=a[0]-r[0],t[1]=a[1]-r[1],t[2]=a[2]-r[2],t[3]=a[3]-r[3],t},n.sub=n.subtract,n.multiply=function(t,a,r){return t[0]=a[0]*r[0],t[1]=a[1]*r[1],t[2]=a[2]*r[2],t[3]=a[3]*r[3],t},n.mul=n.multiply,n.divide=function(t,a,r){return t[0]=a[0]/r[0],t[1]=a[1]/r[1],t[2]=a[2]/r[2],t[3]=a[3]/r[3],t},n.div=n.divide,n.min=function(t,a,r){return t[0]=Math.min(a[0],r[0]),t[1]=Math.min(a[1],r[1]),t[2]=Math.min(a[2],r[2]),t[3]=Math.min(a[3],r[3]),t},n.max=function(t,a,r){return t[0]=Math.max(a[0],r[0]),t[1]=Math.max(a[1],r[1]),t[2]=Math.max(a[2],r[2]),t[3]=Math.max(a[3],r[3]),t},n.scale=function(t,a,r){return t[0]=a[0]*r,t[1]=a[1]*r,t[2]=a[2]*r,t[3]=a[3]*r,t},n.scaleAndAdd=function(t,a,r,n){return t[0]=a[0]+r[0]*n,t[1]=a[1]+r[1]*n,t[2]=a[2]+r[2]*n,t[3]=a[3]+r[3]*n,t},n.distance=function(t,a){var r=a[0]-t[0],n=a[1]-t[1],e=a[2]-t[2],o=a[3]-t[3];return Math.sqrt(r*r+n*n+e*e+o*o)},n.dist=n.distance,n.squaredDistance=function(t,a){var r=a[0]-t[0],n=a[1]-t[1],e=a[2]-t[2],o=a[3]-t[3];return r*r+n*n+e*e+o*o},n.sqrDist=n.squaredDistance,n.length=function(t){var a=t[0],r=t[1],n=t[2],e=t[3];return Math.sqrt(a*a+r*r+n*n+e*e)},n.len=n.length,n.squaredLength=function(t){var a=t[0],r=t[1],n=t[2],e=t[3];return a*a+r*r+n*n+e*e},n.sqrLen=n.squaredLength,n.negate=function(t,a){return t[0]=-a[0],t[1]=-a[1],t[2]=-a[2],t[3]=-a[3],t},n.inverse=function(t,a){return t[0]=1/a[0],t[1]=1/a[1],t[2]=1/a[2],t[3]=1/a[3],t},n.normalize=function(t,a){var r=a[0],n=a[1],e=a[2],o=a[3],l=r*r+n*n+e*e+o*o;return 0<l&&(l=1/Math.sqrt(l),t[0]=r*l,t[1]=n*l,t[2]=e*l,t[3]=o*l),t},n.dot=function(t,a){return t[0]*a[0]+t[1]*a[1]+t[2]*a[2]+t[3]*a[3]},n.lerp=function(t,a,r,n){var e=a[0],o=a[1],l=a[2],u=a[3];return t[0]=e+n*(r[0]-e),t[1]=o+n*(r[1]-o),t[2]=l+n*(r[2]-l),t[3]=u+n*(r[3]-u),t},n.random=function(t,a){return a=a||1,t[0]=o.RANDOM(),t[1]=o.RANDOM(),t[2]=o.RANDOM(),t[3]=o.RANDOM(),n.normalize(t,t),n.scale(t,t,a),t},n.transformMat4=function(t,a,r){var n=a[0],e=a[1],o=a[2],l=a[3];return t[0]=r[0]*n+r[4]*e+r[8]*o+r[12]*l,t[1]=r[1]*n+r[5]*e+r[9]*o+r[13]*l,t[2]=r[2]*n+r[6]*e+r[10]*o+r[14]*l,t[3]=r[3]*n+r[7]*e+r[11]*o+r[15]*l,t},n.transformQuat=function(t,a,r){var n=a[0],e=a[1],o=a[2],l=r[0],u=r[1],i=r[2],M=r[3],c=M*n+u*o-i*e,s=M*e+i*n-l*o,f=M*o+l*e-u*n,x=-l*n-u*e-i*o;return t[0]=c*M+x*-l+s*-i-f*-u,t[1]=s*M+x*-u+f*-l-c*-i,t[2]=f*M+x*-i+c*-u-s*-l,t[3]=a[3],t},n.forEach=(i=n.create(),function(t,a,r,n,e,o){var l,u;for(a||(a=4),r||(r=0),u=n?Math.min(n*a+r,t.length):t.length,l=r;l<u;l+=a)i[0]=t[l],i[1]=t[l+1],i[2]=t[l+2],i[3]=t[l+3],e(i,i,o),t[l]=i[0],t[l+1]=i[1],t[l+2]=i[2],t[l+3]=i[3];return t}),n.str=function(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},t.exports=n},function(t,a,r){var i,n=r(1),e={};e.create=function(){var t=new n.ARRAY_TYPE(2);return t[0]=0,t[1]=0,t},e.clone=function(t){var a=new n.ARRAY_TYPE(2);return a[0]=t[0],a[1]=t[1],a},e.fromValues=function(t,a){var r=new n.ARRAY_TYPE(2);return r[0]=t,r[1]=a,r},e.copy=function(t,a){return t[0]=a[0],t[1]=a[1],t},e.set=function(t,a,r){return t[0]=a,t[1]=r,t},e.add=function(t,a,r){return t[0]=a[0]+r[0],t[1]=a[1]+r[1],t},e.subtract=function(t,a,r){return t[0]=a[0]-r[0],t[1]=a[1]-r[1],t},e.sub=e.subtract,e.multiply=function(t,a,r){return t[0]=a[0]*r[0],t[1]=a[1]*r[1],t},e.mul=e.multiply,e.divide=function(t,a,r){return t[0]=a[0]/r[0],t[1]=a[1]/r[1],t},e.div=e.divide,e.min=function(t,a,r){return t[0]=Math.min(a[0],r[0]),t[1]=Math.min(a[1],r[1]),t},e.max=function(t,a,r){return t[0]=Math.max(a[0],r[0]),t[1]=Math.max(a[1],r[1]),t},e.scale=function(t,a,r){return t[0]=a[0]*r,t[1]=a[1]*r,t},e.scaleAndAdd=function(t,a,r,n){return t[0]=a[0]+r[0]*n,t[1]=a[1]+r[1]*n,t},e.distance=function(t,a){var r=a[0]-t[0],n=a[1]-t[1];return Math.sqrt(r*r+n*n)},e.dist=e.distance,e.squaredDistance=function(t,a){var r=a[0]-t[0],n=a[1]-t[1];return r*r+n*n},e.sqrDist=e.squaredDistance,e.length=function(t){var a=t[0],r=t[1];return Math.sqrt(a*a+r*r)},e.len=e.length,e.squaredLength=function(t){var a=t[0],r=t[1];return a*a+r*r},e.sqrLen=e.squaredLength,e.negate=function(t,a){return t[0]=-a[0],t[1]=-a[1],t},e.inverse=function(t,a){return t[0]=1/a[0],t[1]=1/a[1],t},e.normalize=function(t,a){var r=a[0],n=a[1],e=r*r+n*n;return 0<e&&(e=1/Math.sqrt(e),t[0]=a[0]*e,t[1]=a[1]*e),t},e.dot=function(t,a){return t[0]*a[0]+t[1]*a[1]},e.cross=function(t,a,r){var n=a[0]*r[1]-a[1]*r[0];return t[0]=t[1]=0,t[2]=n,t},e.lerp=function(t,a,r,n){var e=a[0],o=a[1];return t[0]=e+n*(r[0]-e),t[1]=o+n*(r[1]-o),t},e.random=function(t,a){a=a||1;var r=2*n.RANDOM()*Math.PI;return t[0]=Math.cos(r)*a,t[1]=Math.sin(r)*a,t},e.transformMat2=function(t,a,r){var n=a[0],e=a[1];return t[0]=r[0]*n+r[2]*e,t[1]=r[1]*n+r[3]*e,t},e.transformMat2d=function(t,a,r){var n=a[0],e=a[1];return t[0]=r[0]*n+r[2]*e+r[4],t[1]=r[1]*n+r[3]*e+r[5],t},e.transformMat3=function(t,a,r){var n=a[0],e=a[1];return t[0]=r[0]*n+r[3]*e+r[6],t[1]=r[1]*n+r[4]*e+r[7],t},e.transformMat4=function(t,a,r){var n=a[0],e=a[1];return t[0]=r[0]*n+r[4]*e+r[12],t[1]=r[1]*n+r[5]*e+r[13],t},e.forEach=(i=e.create(),function(t,a,r,n,e,o){var l,u;for(a||(a=2),r||(r=0),u=n?Math.min(n*a+r,t.length):t.length,l=r;l<u;l+=a)i[0]=t[l],i[1]=t[l+1],e(i,i,o),t[l]=i[0],t[l+1]=i[1];return t}),e.str=function(t){return"vec2("+t[0]+", "+t[1]+")"},t.exports=e}])});var i,M,t,c,o,f=mat4.create(),s=mat4.create(),x=0,D=(_=[0,0,0,7.5,-2,0,11,0,0,0,0,0,0,-2,0,1,-2,0,0,0,0,1,-2,0,3.5,-2,0,0,0,0,3.5,-2,0,7.5,-2,0,11,0,0,7.5,-2,0,10,-2,0,11,0,0,11,-2,0,10,-2,0,1,-2,0,1,-3.5,0,3.5,-3.5,0,1,-2,0,3.5,-2,0,3.5,-3.5,0,7.5,-2,0,7.5,-3.5,0,10,-2,0,10,-2,0,7.5,-3.5,0,10,-3.5,0,1,-3.5,0,4.5,-6,0,3.5,-3.5,0,3.5,-3.5,0,4.5,-3.5,0,4.5,-6,0,1,-3.5,0,3.5,-6,0,4.5,-6,0,1,-3.5,0,1,-7.75,0,3.5,-6,0,1,-7.75,0,3.5,-7.75,0,3.5,-6,0,7.5,-3.5,0,10,-3.5,0,6.5,-6,0,6.5,-3.5,0,7.5,-3.5,0,6.5,-6,0,10,-3.5,0,6.5,-6,0,7.5,-6,0,10,-3.5,0,7.5,-6,0,10,-7.75,0,7.5,-6,0,7.5,-7.75,0,10,-7.75,0,1,-8.1,0,1,-9.1,0,1.833333333,-8.1,0,1.833333333,-8.1,0,1.833333333,-9.6,0,1,-9.1,0,2.6666666,-8.1,0,2.6666666,-10.1,0,3.5,-8.1,0,3.5,-8.1,0,3.5,-10.6,0,2.6666666,-10.1,0,4.3333333,-8.1,0,4.3333333,-11.1,0,5.1666666,-8.1,0,5.1666666,-8.1,0,5.1666666,-11.6,0,4.3333333,-11.1,0,10,-8.1,0,10,-9.1,0,9.166666667,-8.1,0,9.166666667,-8.1,0,9.166666667,-9.6,0,10,-9.1,0,8.3333334,-8.1,0,8.3333334,-10.1,0,7.5,-8.1,0,7.5,-8.1,0,7.5,-10.6,0,8.3333334,-10.1,0,6.6666667,-8.1,0,6.6666667,-11.1,0,5.8333334,-8.1,0,5.8333334,-8.1,0,5.8333334,-11.6,0,6.6666667,-11.1,0]).slice(0),m=[];function a(){i.uniformMatrix4fv(t.mvMatrixUniform,!1,f),i.uniformMatrix4fv(t.pMatrixUniform,!1,s)}function r(t){for(var a=["webgl","experimental-webgl"],r=null,n=0;n<a.length;n++){try{r=t.getContext(a[n])}catch(t){}if(r)break}return r?(r.viewportWidth=t.width,r.viewportHeight=t.height):alert("Failed to create WebGL context!"),r}function n(t){var a=document.getElementById(t);if(!a)return null;for(var r,n="",e=a.firstChild;e;)3==e.nodeType&&(n+=e.textContent),e=e.nextSibling;if("x-shader/x-fragment"==a.type)r=i.createShader(i.FRAGMENT_SHADER);else{if("x-shader/x-vertex"!=a.type)return null;r=i.createShader(i.VERTEX_SHADER)}return i.shaderSource(r,n),i.compileShader(r),i.getShaderParameter(r,i.COMPILE_STATUS)?r:(alert(i.getShaderInfoLog(r)),null)}function e(){vertexShader=n("shader-vs"),fragmentShader=n("shader-fs"),t=i.createProgram(),i.attachShader(t,vertexShader),i.attachShader(t,fragmentShader),i.linkProgram(t),i.getProgramParameter(t,i.LINK_STATUS)||alert("Failed to setup shaders"),i.useProgram(t),t.vertexPositionAttribute=i.getAttribLocation(t,"aVertexPosition"),i.enableVertexAttribArray(t.vertexPositionAttribute),t.vertexColorAttribute=i.getAttribLocation(t,"aVertexColor"),i.enableVertexAttribArray(t.vertexColorAttribute),t.mvMatrixUniform=i.getUniformLocation(t,"uMVMatrix"),t.pMatrixUniform=i.getUniformLocation(t,"uPMatrix")}function l(){c=i.createBuffer(),i.bindBuffer(i.ARRAY_BUFFER,c),mat4.identity(f),mat4.identity(s);var t=[5.5,-6,15],a=[5.5,-6,-1.5];mat4.lookAt(f,t,a,[0,1,0]),mat4.perspective(s,glMatrix.toRadian(50),M.width/M.height,.1,1e3);for(var r=(performance.now()-x)/1e3,n=[[1,F],[2,h],[1],[3,d],[1],[3,w],[3,p],[3,z],[2,v]],e=0,o=0;o<n.length;o++)e+=n[o][0];e<r&&(x=performance.now(),r=0);var l=0,u=!1;for(o=0;o<n.length&&!u;o++)if(r<(l+=n[o][0])){if(n[o][1]){r=r-(l-n[o][0]);n[o][1](r,n[o][0])}u=!0}i.bufferData(i.ARRAY_BUFFER,new Float32Array(D),i.DYNAMIC_DRAW),c.itemSize=3,c.numberOfItems=D.length/3}function u(t,a,r){for(var n=0;n<m.length;n++){var e=R(n,_);vec3.add(e,e,vec3.fromValues(0,0,1.5)),y(n,vec3.fromValues(1,1,t),e,a,r)}}function S(t,a,r,n,e){a=1,r=.5;for(var o=0;o<n.length;o+=3)n[o]+=.1*Math.sin(r*(e[o]+e[o+1]+1))*Math.sin(2*t*Math.PI*a)*Math.cos(2*t*Math.PI*a),n[o+1]+=.1*Math.sin(r*(e[o]+e[o+1]+1))*Math.sin(2*t*Math.PI*a)*Math.sin(2*t*Math.PI*a)}function I(t,a,r,n){a&&(t=1-t);for(var e=0;e<m.length;e++){E(e,quat.rotateX(quat.create(),quat.create(),glMatrix.toRadian(90)),vec3.fromValues(5.5,-12,0),r,n);var o=R(e,r),l=vec3.create();vec3.sub(l,o,vec3.fromValues(5.5,-10.5,6)),vec3.scale(l,l,a?t*t:Math.sqrt(t));var u=vec3.create();vec3.add(u,l,o),q(e,u,r,r);var i=R(e,r);E(e,quat.rotateY(quat.create(),quat.create(),glMatrix.toRadian(5.5<i[0]?60*t:-60*t)),i,r,r);var M=50*t-80*t*t;M<0&&(M=0),u[1]+=M,q(e,u,r,r);var c=2/3<t?2/3:t;E(e,quat.rotateX(quat.create(),quat.create(),glMatrix.toRadian(5.5<i[0]?180*c:-180*c)),R(e,r),r,r)}}function F(t,a){var r=_.slice(0);u(.01,r,_),D=r}function h(t,a){var r=t/a,n=_.slice(0);u(r,n,_),S(t,1,.5,n,n),D=n}function v(t,a){var r=t/a,n=_.slice(0);u(1-r,n,_),S(t,1,.5,n,n),D=n}function d(t,a){var r=t/a,n=vec3.fromValues(5.5,-6,15),e=[5.5,-6,-1.5];vec3.rotateY(n,n,vec3.fromValues(5.5,-6,-1.5),2*r*Math.PI),mat4.lookAt(f,n,e,[0,1,0]),mat4.perspective(s,glMatrix.toRadian(50),M.width/M.height,.1,1e3)}function w(t,a){for(var r=t/a,n=_.slice(0),e=90*r*r*r*r,o=0;o<m.length;o++)E(o,quat.rotateX(quat.create(),quat.create(),glMatrix.toRadian(e)),vec3.fromValues(5.5,-12,0),n,_);D=n;var l=[5.5,-6,15],u=[5.5,-6,-1.5],i=[5.5,10,40],M=[5.5,-6,5],c=vec3.create(),s=vec3.create();vec3.lerp(c,l,i,Math.min(3*r,1)),vec3.lerp(s,u,M,Math.min(3*r,1)),mat4.lookAt(f,c,s,[0,1,0])}function p(t,a){var r=t/a;mat4.lookAt(f,[5.5,10,40],[5.5,-6,5],[0,1,0]);var n=_.slice(0);I(r,!1,n,_),D=n}function z(t,a){var r=t/a;mat4.lookAt(f,[5.5,10,40],[5.5,-6,5],[0,1,0]);var n=[5.5,10,40],e=[5.5,-6,5],o=[5.5,-27,6],l=[5.5,0,6],u=vec3.create(),i=vec3.create(),M=vec3.create();vec3.rotateX(u,n,vec3.fromValues(0,0,0),glMatrix.toRadian(90*Math.min(2*r,1))),vec3.lerp(i,u,o,Math.min(2*r,1)),vec3.lerp(M,e,l,Math.min(2*r,1)),mat4.lookAt(f,i,M,[0,1,1]);var c=_.slice(0);I(r,!0,c,_),D=c}function A(){o=i.createBuffer(),i.bindBuffer(i.ARRAY_BUFFER,o);for(var t=[],a=[22/255,40/255,76/255],r=[232/255,74/255,54/255],n=0;n<_.length;n+=3){var e=a;_[n+1]<-8&&(e=r),t.push(e[0]/(1-.5*_[n+2])),t.push(e[1]/(1-.5*_[n+2])),t.push(e[2]/(1-.5*_[n+2])),t.push(1)}i.bufferData(i.ARRAY_BUFFER,new Float32Array(t),i.STATIC_DRAW),o.itemSize=4,o.numItems=D.length/3}function g(){l(),A()}function b(){for(var t=_.length,a=0;a<t;a+=3){var r=_[a],n=_[a+1],e=_[a+2];_.push(r,n,e-3)}for(a=0;a<t;a+=9){for(var o=[],l=0;l<9;l++)o.push(a+l);for(l=0;l<9;l++)o.push(a+t+l);for(var u=_.slice(a,a+9),i=_.slice(t+a,t+a+9),M=u.concat(i),c=[[0,1,3],[1,2,4],[2,0,5],[3,4,1],[4,5,2],[5,3,0]],s=0;s<c.length;s++)for(var f=c[s],x=0;x<3;x++){l=f[x];for(var S=0;S<3;S++){var I=3*l+S;_.push(M[I]),-1==o.indexOf(_.length-1)&&o.push(_.length-1)}}m.push(o)}D=_.slice(0)}function R(t,a){for(var r=vec3.create(),n=0;n<m[t].length;n+=3)vec3.add(r,r,vec3.fromValues(a[m[t][n]],a[m[t][n+1]],a[m[t][n+2]]));return vec3.scale(r,r,3/m[t].length),r}function q(t,a,r,n){var e=R(t,n),o=vec3.create();vec3.sub(o,a,e);for(var l=0;l<m[t].length;l++)r[m[t][l]]=o[l%3]+n[m[t][l]]}function y(t,a,r,n,e){for(var o=0;o<m[t].length;o+=3){var l=vec3.fromValues(e[m[t][o]],e[m[t][o+1]],e[m[t][o+2]]);vec3.sub(l,l,r),vec3.mul(l,l,a),vec3.add(l,l,r);for(var u=0;u<3;u++)n[m[t][o+u]]=l[u]}}function E(t,a,r,n,e){for(var o=0;o<m[t].length;o+=3){var l=vec3.fromValues(e[m[t][o]],e[m[t][o+1]],e[m[t][o+2]]);vec3.sub(l,l,r),vec3.transformQuat(l,l,a),vec3.add(l,l,r);for(var u=0;u<3;u++)n[m[t][o+u]]=l[u]}}function P(){i.viewport(0,0,i.viewportWidth,i.viewportHeight),i.clear(i.COLOR_BUFFER_BIT|i.DEPTH_BUFFER_BIT),i.bindBuffer(i.ARRAY_BUFFER,c),i.vertexAttribPointer(t.vertexPositionAttribute,c.itemSize,i.FLOAT,!1,0,0),i.bindBuffer(i.ARRAY_BUFFER,o),i.vertexAttribPointer(t.vertexColorAttribute,o.itemSize,i.FLOAT,!1,0,0),a(),i.drawArrays(i.TRIANGLES,0,c.numberOfItems)}function Y(){l()}function startup(){M=document.getElementById("myGLCanvas"),b(),i=r(M),e(),g(),i.clearColor(1,1,1,1),i.enable(i.DEPTH_TEST),x=performance.now(),T()}function T(){requestAnimFrame(T),P(),Y()}!function(t,a){if("object"==typeof exports&&"object"==typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define(a);else{var r=a();for(var n in r)("object"==typeof exports?exports:t)[n]=r[n]}}(this,function(){return function(r){function n(t){if(e[t])return e[t].exports;var a=e[t]={exports:{},id:t,loaded:!1};return r[t].call(a.exports,a,a.exports,n),a.loaded=!0,a.exports}var e={};return n.m=r,n.c=e,n.p="",n(0)}([function(t,a,r){a.glMatrix=r(1),a.mat2=r(2),a.mat2d=r(3),a.mat3=r(4),a.mat4=r(5),a.quat=r(6),a.vec2=r(9),a.vec3=r(7),a.vec4=r(8)},function(t,a){var r={EPSILON:1e-6};r.ARRAY_TYPE="undefined"!=typeof Float32Array?Float32Array:Array,r.RANDOM=Math.random,r.ENABLE_SIMD=!1,r.SIMD_AVAILABLE=r.ARRAY_TYPE===Float32Array&&"SIMD"in this,r.USE_SIMD=r.ENABLE_SIMD&&r.SIMD_AVAILABLE,r.setMatrixArrayType=function(t){r.ARRAY_TYPE=t};var n=Math.PI/180;r.toRadian=function(t){return t*n},t.exports=r},function(t,a,r){var n=r(1),e={create:function(){var t=new n.ARRAY_TYPE(4);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},clone:function(t){var a=new n.ARRAY_TYPE(4);return a[0]=t[0],a[1]=t[1],a[2]=t[2],a[3]=t[3],a},copy:function(t,a){return t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t},identity:function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},transpose:function(t,a){if(t===a){var r=a[1];t[1]=a[2],t[2]=r}else t[0]=a[0],t[1]=a[2],t[2]=a[1],t[3]=a[3];return t},invert:function(t,a){var r=a[0],n=a[1],e=a[2],o=a[3],l=r*o-e*n;return l?(l=1/l,t[0]=o*l,t[1]=-n*l,t[2]=-e*l,t[3]=r*l,t):null},adjoint:function(t,a){var r=a[0];return t[0]=a[3],t[1]=-a[1],t[2]=-a[2],t[3]=r,t},determinant:function(t){return t[0]*t[3]-t[2]*t[1]},multiply:function(t,a,r){var n=a[0],e=a[1],o=a[2],l=a[3],u=r[0],i=r[1],M=r[2],c=r[3];return t[0]=n*u+o*i,t[1]=e*u+l*i,t[2]=n*M+o*c,t[3]=e*M+l*c,t}};e.mul=e.multiply,e.rotate=function(t,a,r){var n=a[0],e=a[1],o=a[2],l=a[3],u=Math.sin(r),i=Math.cos(r);return t[0]=n*i+o*u,t[1]=e*i+l*u,t[2]=n*-u+o*i,t[3]=e*-u+l*i,t},e.scale=function(t,a,r){var n=a[0],e=a[1],o=a[2],l=a[3],u=r[0],i=r[1];return t[0]=n*u,t[1]=e*u,t[2]=o*i,t[3]=l*i,t},e.fromRotation=function(t,a){var r=Math.sin(a),n=Math.cos(a);return t[0]=n,t[1]=r,t[2]=-r,t[3]=n,t},e.fromScaling=function(t,a){return t[0]=a[0],t[1]=0,t[2]=0,t[3]=a[1],t},e.str=function(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},e.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2))},e.LDU=function(t,a,r,n){return t[2]=n[2]/n[0],r[0]=n[0],r[1]=n[1],r[3]=n[3]-t[2]*r[1],[t,a,r]},t.exports=e},function(t,a,r){var n=r(1),e={create:function(){var t=new n.ARRAY_TYPE(6);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},clone:function(t){var a=new n.ARRAY_TYPE(6);return a[0]=t[0],a[1]=t[1],a[2]=t[2],a[3]=t[3],a[4]=t[4],a[5]=t[5],a},copy:function(t,a){return t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t[4]=a[4],t[5]=a[5],t},identity:function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},invert:function(t,a){var r=a[0],n=a[1],e=a[2],o=a[3],l=a[4],u=a[5],i=r*o-n*e;return i?(i=1/i,t[0]=o*i,t[1]=-n*i,t[2]=-e*i,t[3]=r*i,t[4]=(e*u-o*l)*i,t[5]=(n*l-r*u)*i,t):null},determinant:function(t){return t[0]*t[3]-t[1]*t[2]},multiply:function(t,a,r){var n=a[0],e=a[1],o=a[2],l=a[3],u=a[4],i=a[5],M=r[0],c=r[1],s=r[2],f=r[3],x=r[4],S=r[5];return t[0]=n*M+o*c,t[1]=e*M+l*c,t[2]=n*s+o*f,t[3]=e*s+l*f,t[4]=n*x+o*S+u,t[5]=e*x+l*S+i,t}};e.mul=e.multiply,e.rotate=function(t,a,r){var n=a[0],e=a[1],o=a[2],l=a[3],u=a[4],i=a[5],M=Math.sin(r),c=Math.cos(r);return t[0]=n*c+o*M,t[1]=e*c+l*M,t[2]=n*-M+o*c,t[3]=e*-M+l*c,t[4]=u,t[5]=i,t},e.scale=function(t,a,r){var n=a[0],e=a[1],o=a[2],l=a[3],u=a[4],i=a[5],M=r[0],c=r[1];return t[0]=n*M,t[1]=e*M,t[2]=o*c,t[3]=l*c,t[4]=u,t[5]=i,t},e.translate=function(t,a,r){var n=a[0],e=a[1],o=a[2],l=a[3],u=a[4],i=a[5],M=r[0],c=r[1];return t[0]=n,t[1]=e,t[2]=o,t[3]=l,t[4]=n*M+o*c+u,t[5]=e*M+l*c+i,t},e.fromRotation=function(t,a){var r=Math.sin(a),n=Math.cos(a);return t[0]=n,t[1]=r,t[2]=-r,t[3]=n,t[4]=0,t[5]=0,t},e.fromScaling=function(t,a){return t[0]=a[0],t[1]=0,t[2]=0,t[3]=a[1],t[4]=0,t[5]=0,t},e.fromTranslation=function(t,a){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=a[0],t[5]=a[1],t},e.str=function(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"},e.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+1)},t.exports=e},function(t,a,r){var n=r(1),e={create:function(){var t=new n.ARRAY_TYPE(9);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},fromMat4:function(t,a){return t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[4],t[4]=a[5],t[5]=a[6],t[6]=a[8],t[7]=a[9],t[8]=a[10],t},clone:function(t){var a=new n.ARRAY_TYPE(9);return a[0]=t[0],a[1]=t[1],a[2]=t[2],a[3]=t[3],a[4]=t[4],a[5]=t[5],a[6]=t[6],a[7]=t[7],a[8]=t[8],a},copy:function(t,a){return t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t[4]=a[4],t[5]=a[5],t[6]=a[6],t[7]=a[7],t[8]=a[8],t},identity:function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},transpose:function(t,a){if(t===a){var r=a[1],n=a[2],e=a[5];t[1]=a[3],t[2]=a[6],t[3]=r,t[5]=a[7],t[6]=n,t[7]=e}else t[0]=a[0],t[1]=a[3],t[2]=a[6],t[3]=a[1],t[4]=a[4],t[5]=a[7],t[6]=a[2],t[7]=a[5],t[8]=a[8];return t},invert:function(t,a){var r=a[0],n=a[1],e=a[2],o=a[3],l=a[4],u=a[5],i=a[6],M=a[7],c=a[8],s=c*l-u*M,f=-c*o+u*i,x=M*o-l*i,S=r*s+n*f+e*x;return S?(S=1/S,t[0]=s*S,t[1]=(-c*n+e*M)*S,t[2]=(u*n-e*l)*S,t[3]=f*S,t[4]=(c*r-e*i)*S,t[5]=(-u*r+e*o)*S,t[6]=x*S,t[7]=(-M*r+n*i)*S,t[8]=(l*r-n*o)*S,t):null},adjoint:function(t,a){var r=a[0],n=a[1],e=a[2],o=a[3],l=a[4],u=a[5],i=a[6],M=a[7],c=a[8];return t[0]=l*c-u*M,t[1]=e*M-n*c,t[2]=n*u-e*l,t[3]=u*i-o*c,t[4]=r*c-e*i,t[5]=e*o-r*u,t[6]=o*M-l*i,t[7]=n*i-r*M,t[8]=r*l-n*o,t},determinant:function(t){var a=t[0],r=t[1],n=t[2],e=t[3],o=t[4],l=t[5],u=t[6],i=t[7],M=t[8];return a*(M*o-l*i)+r*(-M*e+l*u)+n*(i*e-o*u)},multiply:function(t,a,r){var n=a[0],e=a[1],o=a[2],l=a[3],u=a[4],i=a[5],M=a[6],c=a[7],s=a[8],f=r[0],x=r[1],S=r[2],I=r[3],D=r[4],m=r[5],F=r[6],h=r[7],v=r[8];return t[0]=f*n+x*l+S*M,t[1]=f*e+x*u+S*c,t[2]=f*o+x*i+S*s,t[3]=I*n+D*l+m*M,t[4]=I*e+D*u+m*c,t[5]=I*o+D*i+m*s,t[6]=F*n+h*l+v*M,t[7]=F*e+h*u+v*c,t[8]=F*o+h*i+v*s,t}};e.mul=e.multiply,e.translate=function(t,a,r){var n=a[0],e=a[1],o=a[2],l=a[3],u=a[4],i=a[5],M=a[6],c=a[7],s=a[8],f=r[0],x=r[1];return t[0]=n,t[1]=e,t[2]=o,t[3]=l,t[4]=u,t[5]=i,t[6]=f*n+x*l+M,t[7]=f*e+x*u+c,t[8]=f*o+x*i+s,t},e.rotate=function(t,a,r){var n=a[0],e=a[1],o=a[2],l=a[3],u=a[4],i=a[5],M=a[6],c=a[7],s=a[8],f=Math.sin(r),x=Math.cos(r);return t[0]=x*n+f*l,t[1]=x*e+f*u,t[2]=x*o+f*i,t[3]=x*l-f*n,t[4]=x*u-f*e,t[5]=x*i-f*o,t[6]=M,t[7]=c,t[8]=s,t},e.scale=function(t,a,r){var n=r[0],e=r[1];return t[0]=n*a[0],t[1]=n*a[1],t[2]=n*a[2],t[3]=e*a[3],t[4]=e*a[4],t[5]=e*a[5],t[6]=a[6],t[7]=a[7],t[8]=a[8],t},e.fromTranslation=function(t,a){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=a[0],t[7]=a[1],t[8]=1,t},e.fromRotation=function(t,a){var r=Math.sin(a),n=Math.cos(a);return t[0]=n,t[1]=r,t[2]=0,t[3]=-r,t[4]=n,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},e.fromScaling=function(t,a){return t[0]=a[0],t[1]=0,t[2]=0,t[3]=0,t[4]=a[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},e.fromMat2d=function(t,a){return t[0]=a[0],t[1]=a[1],t[2]=0,t[3]=a[2],t[4]=a[3],t[5]=0,t[6]=a[4],t[7]=a[5],t[8]=1,t},e.fromQuat=function(t,a){var r=a[0],n=a[1],e=a[2],o=a[3],l=r+r,u=n+n,i=e+e,M=r*l,c=n*l,s=n*u,f=e*l,x=e*u,S=e*i,I=o*l,D=o*u,m=o*i;return t[0]=1-s-S,t[3]=c-m,t[6]=f+D,t[1]=c+m,t[4]=1-M-S,t[7]=x-I,t[2]=f-D,t[5]=x+I,t[8]=1-M-s,t},e.normalFromMat4=function(t,a){var r=a[0],n=a[1],e=a[2],o=a[3],l=a[4],u=a[5],i=a[6],M=a[7],c=a[8],s=a[9],f=a[10],x=a[11],S=a[12],I=a[13],D=a[14],m=a[15],F=r*u-n*l,h=r*i-e*l,v=r*M-o*l,d=n*i-e*u,w=n*M-o*u,p=e*M-o*i,z=c*I-s*S,A=c*D-f*S,g=c*m-x*S,b=s*D-f*I,R=s*m-x*I,q=f*m-x*D,y=F*q-h*R+v*b+d*g-w*A+p*z;return y?(y=1/y,t[0]=(u*q-i*R+M*b)*y,t[1]=(i*g-l*q-M*A)*y,t[2]=(l*R-u*g+M*z)*y,t[3]=(e*R-n*q-o*b)*y,t[4]=(r*q-e*g+o*A)*y,t[5]=(n*g-r*R-o*z)*y,t[6]=(I*p-D*w+m*d)*y,t[7]=(D*v-S*p-m*h)*y,t[8]=(S*w-I*v+m*F)*y,t):null},e.str=function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},e.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2))},t.exports=e},function(t,a,r){var P=r(1),p={scalar:{},SIMD:{},create:function(){var t=new P.ARRAY_TYPE(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},clone:function(t){var a=new P.ARRAY_TYPE(16);return a[0]=t[0],a[1]=t[1],a[2]=t[2],a[3]=t[3],a[4]=t[4],a[5]=t[5],a[6]=t[6],a[7]=t[7],a[8]=t[8],a[9]=t[9],a[10]=t[10],a[11]=t[11],a[12]=t[12],a[13]=t[13],a[14]=t[14],a[15]=t[15],a},copy:function(t,a){return t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t[4]=a[4],t[5]=a[5],t[6]=a[6],t[7]=a[7],t[8]=a[8],t[9]=a[9],t[10]=a[10],t[11]=a[11],t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15],t},identity:function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}};p.scalar.transpose=function(t,a){if(t===a){var r=a[1],n=a[2],e=a[3],o=a[6],l=a[7],u=a[11];t[1]=a[4],t[2]=a[8],t[3]=a[12],t[4]=r,t[6]=a[9],t[7]=a[13],t[8]=n,t[9]=o,t[11]=a[14],t[12]=e,t[13]=l,t[14]=u}else t[0]=a[0],t[1]=a[4],t[2]=a[8],t[3]=a[12],t[4]=a[1],t[5]=a[5],t[6]=a[9],t[7]=a[13],t[8]=a[2],t[9]=a[6],t[10]=a[10],t[11]=a[14],t[12]=a[3],t[13]=a[7],t[14]=a[11],t[15]=a[15];return t},p.SIMD.transpose=function(t,a){var r,n,e,o,l,u,i,M,c,s;return r=SIMD.Float32x4.load(a,0),n=SIMD.Float32x4.load(a,4),e=SIMD.Float32x4.load(a,8),o=SIMD.Float32x4.load(a,12),l=SIMD.Float32x4.shuffle(r,n,0,1,4,5),u=SIMD.Float32x4.shuffle(e,o,0,1,4,5),i=SIMD.Float32x4.shuffle(l,u,0,2,4,6),M=SIMD.Float32x4.shuffle(l,u,1,3,5,7),SIMD.Float32x4.store(t,0,i),SIMD.Float32x4.store(t,4,M),l=SIMD.Float32x4.shuffle(r,n,2,3,6,7),u=SIMD.Float32x4.shuffle(e,o,2,3,6,7),c=SIMD.Float32x4.shuffle(l,u,0,2,4,6),s=SIMD.Float32x4.shuffle(l,u,1,3,5,7),SIMD.Float32x4.store(t,8,c),SIMD.Float32x4.store(t,12,s),t},p.transpose=P.USE_SIMD?p.SIMD.transpose:p.scalar.transpose,p.scalar.invert=function(t,a){var r=a[0],n=a[1],e=a[2],o=a[3],l=a[4],u=a[5],i=a[6],M=a[7],c=a[8],s=a[9],f=a[10],x=a[11],S=a[12],I=a[13],D=a[14],m=a[15],F=r*u-n*l,h=r*i-e*l,v=r*M-o*l,d=n*i-e*u,w=n*M-o*u,p=e*M-o*i,z=c*I-s*S,A=c*D-f*S,g=c*m-x*S,b=s*D-f*I,R=s*m-x*I,q=f*m-x*D,y=F*q-h*R+v*b+d*g-w*A+p*z;return y?(y=1/y,t[0]=(u*q-i*R+M*b)*y,t[1]=(e*R-n*q-o*b)*y,t[2]=(I*p-D*w+m*d)*y,t[3]=(f*w-s*p-x*d)*y,t[4]=(i*g-l*q-M*A)*y,t[5]=(r*q-e*g+o*A)*y,t[6]=(D*v-S*p-m*h)*y,t[7]=(c*p-f*v+x*h)*y,t[8]=(l*R-u*g+M*z)*y,t[9]=(n*g-r*R-o*z)*y,t[10]=(S*w-I*v+m*F)*y,t[11]=(s*v-c*w-x*F)*y,t[12]=(u*A-l*b-i*z)*y,t[13]=(r*b-n*A+e*z)*y,t[14]=(I*h-S*d-D*F)*y,t[15]=(c*d-s*h+f*F)*y,t):null},p.SIMD.invert=function(t,a){var r,n,e,o,l,u,i,M,c,s,f=SIMD.Float32x4.load(a,0),x=SIMD.Float32x4.load(a,4),S=SIMD.Float32x4.load(a,8),I=SIMD.Float32x4.load(a,12);return l=SIMD.Float32x4.shuffle(f,x,0,1,4,5),n=SIMD.Float32x4.shuffle(S,I,0,1,4,5),r=SIMD.Float32x4.shuffle(l,n,0,2,4,6),n=SIMD.Float32x4.shuffle(n,l,1,3,5,7),l=SIMD.Float32x4.shuffle(f,x,2,3,6,7),o=SIMD.Float32x4.shuffle(S,I,2,3,6,7),e=SIMD.Float32x4.shuffle(l,o,0,2,4,6),o=SIMD.Float32x4.shuffle(o,l,1,3,5,7),l=SIMD.Float32x4.mul(e,o),l=SIMD.Float32x4.swizzle(l,1,0,3,2),u=SIMD.Float32x4.mul(n,l),i=SIMD.Float32x4.mul(r,l),l=SIMD.Float32x4.swizzle(l,2,3,0,1),u=SIMD.Float32x4.sub(SIMD.Float32x4.mul(n,l),u),i=SIMD.Float32x4.sub(SIMD.Float32x4.mul(r,l),i),i=SIMD.Float32x4.swizzle(i,2,3,0,1),l=SIMD.Float32x4.mul(n,e),l=SIMD.Float32x4.swizzle(l,1,0,3,2),u=SIMD.Float32x4.add(SIMD.Float32x4.mul(o,l),u),c=SIMD.Float32x4.mul(r,l),l=SIMD.Float32x4.swizzle(l,2,3,0,1),u=SIMD.Float32x4.sub(u,SIMD.Float32x4.mul(o,l)),c=SIMD.Float32x4.sub(SIMD.Float32x4.mul(r,l),c),c=SIMD.Float32x4.swizzle(c,2,3,0,1),l=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(n,2,3,0,1),o),l=SIMD.Float32x4.swizzle(l,1,0,3,2),e=SIMD.Float32x4.swizzle(e,2,3,0,1),u=SIMD.Float32x4.add(SIMD.Float32x4.mul(e,l),u),M=SIMD.Float32x4.mul(r,l),l=SIMD.Float32x4.swizzle(l,2,3,0,1),u=SIMD.Float32x4.sub(u,SIMD.Float32x4.mul(e,l)),M=SIMD.Float32x4.sub(SIMD.Float32x4.mul(r,l),M),M=SIMD.Float32x4.swizzle(M,2,3,0,1),l=SIMD.Float32x4.mul(r,n),l=SIMD.Float32x4.swizzle(l,1,0,3,2),M=SIMD.Float32x4.add(SIMD.Float32x4.mul(o,l),M),c=SIMD.Float32x4.sub(SIMD.Float32x4.mul(e,l),c),l=SIMD.Float32x4.swizzle(l,2,3,0,1),M=SIMD.Float32x4.sub(SIMD.Float32x4.mul(o,l),M),c=SIMD.Float32x4.sub(c,SIMD.Float32x4.mul(e,l)),l=SIMD.Float32x4.mul(r,o),l=SIMD.Float32x4.swizzle(l,1,0,3,2),i=SIMD.Float32x4.sub(i,SIMD.Float32x4.mul(e,l)),M=SIMD.Float32x4.add(SIMD.Float32x4.mul(n,l),M),l=SIMD.Float32x4.swizzle(l,2,3,0,1),i=SIMD.Float32x4.add(SIMD.Float32x4.mul(e,l),i),M=SIMD.Float32x4.sub(M,SIMD.Float32x4.mul(n,l)),l=SIMD.Float32x4.mul(r,e),l=SIMD.Float32x4.swizzle(l,1,0,3,2),i=SIMD.Float32x4.add(SIMD.Float32x4.mul(o,l),i),c=SIMD.Float32x4.sub(c,SIMD.Float32x4.mul(n,l)),l=SIMD.Float32x4.swizzle(l,2,3,0,1),i=SIMD.Float32x4.sub(i,SIMD.Float32x4.mul(o,l)),c=SIMD.Float32x4.add(SIMD.Float32x4.mul(n,l),c),s=SIMD.Float32x4.mul(r,u),s=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(s,2,3,0,1),s),s=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(s,1,0,3,2),s),l=SIMD.Float32x4.reciprocalApproximation(s),s=SIMD.Float32x4.sub(SIMD.Float32x4.add(l,l),SIMD.Float32x4.mul(s,SIMD.Float32x4.mul(l,l))),(s=SIMD.Float32x4.swizzle(s,0,0,0,0))?(SIMD.Float32x4.store(t,0,SIMD.Float32x4.mul(s,u)),SIMD.Float32x4.store(t,4,SIMD.Float32x4.mul(s,i)),SIMD.Float32x4.store(t,8,SIMD.Float32x4.mul(s,M)),SIMD.Float32x4.store(t,12,SIMD.Float32x4.mul(s,c)),t):null},p.invert=P.USE_SIMD?p.SIMD.invert:p.scalar.invert,p.scalar.adjoint=function(t,a){var r=a[0],n=a[1],e=a[2],o=a[3],l=a[4],u=a[5],i=a[6],M=a[7],c=a[8],s=a[9],f=a[10],x=a[11],S=a[12],I=a[13],D=a[14],m=a[15];return t[0]=u*(f*m-x*D)-s*(i*m-M*D)+I*(i*x-M*f),t[1]=-(n*(f*m-x*D)-s*(e*m-o*D)+I*(e*x-o*f)),t[2]=n*(i*m-M*D)-u*(e*m-o*D)+I*(e*M-o*i),t[3]=-(n*(i*x-M*f)-u*(e*x-o*f)+s*(e*M-o*i)),t[4]=-(l*(f*m-x*D)-c*(i*m-M*D)+S*(i*x-M*f)),t[5]=r*(f*m-x*D)-c*(e*m-o*D)+S*(e*x-o*f),t[6]=-(r*(i*m-M*D)-l*(e*m-o*D)+S*(e*M-o*i)),t[7]=r*(i*x-M*f)-l*(e*x-o*f)+c*(e*M-o*i),t[8]=l*(s*m-x*I)-c*(u*m-M*I)+S*(u*x-M*s),t[9]=-(r*(s*m-x*I)-c*(n*m-o*I)+S*(n*x-o*s)),t[10]=r*(u*m-M*I)-l*(n*m-o*I)+S*(n*M-o*u),t[11]=-(r*(u*x-M*s)-l*(n*x-o*s)+c*(n*M-o*u)),t[12]=-(l*(s*D-f*I)-c*(u*D-i*I)+S*(u*f-i*s)),t[13]=r*(s*D-f*I)-c*(n*D-e*I)+S*(n*f-e*s),t[14]=-(r*(u*D-i*I)-l*(n*D-e*I)+S*(n*i-e*u)),t[15]=r*(u*f-i*s)-l*(n*f-e*s)+c*(n*i-e*u),t},p.SIMD.adjoint=function(t,a){var r,n,e,o,l,u,i,M,c,s=SIMD.Float32x4.load(a,0),f=SIMD.Float32x4.load(a,4),x=SIMD.Float32x4.load(a,8),S=SIMD.Float32x4.load(a,12);return l=SIMD.Float32x4.shuffle(s,f,0,1,4,5),n=SIMD.Float32x4.shuffle(x,S,0,1,4,5),r=SIMD.Float32x4.shuffle(l,n,0,2,4,6),n=SIMD.Float32x4.shuffle(n,l,1,3,5,7),l=SIMD.Float32x4.shuffle(s,f,2,3,6,7),o=SIMD.Float32x4.shuffle(x,S,2,3,6,7),e=SIMD.Float32x4.shuffle(l,o,0,2,4,6),o=SIMD.Float32x4.shuffle(o,l,1,3,5,7),l=SIMD.Float32x4.mul(e,o),l=SIMD.Float32x4.swizzle(l,1,0,3,2),u=SIMD.Float32x4.mul(n,l),i=SIMD.Float32x4.mul(r,l),l=SIMD.Float32x4.swizzle(l,2,3,0,1),u=SIMD.Float32x4.sub(SIMD.Float32x4.mul(n,l),u),i=SIMD.Float32x4.sub(SIMD.Float32x4.mul(r,l),i),i=SIMD.Float32x4.swizzle(i,2,3,0,1),l=SIMD.Float32x4.mul(n,e),l=SIMD.Float32x4.swizzle(l,1,0,3,2),u=SIMD.Float32x4.add(SIMD.Float32x4.mul(o,l),u),c=SIMD.Float32x4.mul(r,l),l=SIMD.Float32x4.swizzle(l,2,3,0,1),u=SIMD.Float32x4.sub(u,SIMD.Float32x4.mul(o,l)),c=SIMD.Float32x4.sub(SIMD.Float32x4.mul(r,l),c),c=SIMD.Float32x4.swizzle(c,2,3,0,1),l=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(n,2,3,0,1),o),l=SIMD.Float32x4.swizzle(l,1,0,3,2),e=SIMD.Float32x4.swizzle(e,2,3,0,1),u=SIMD.Float32x4.add(SIMD.Float32x4.mul(e,l),u),M=SIMD.Float32x4.mul(r,l),l=SIMD.Float32x4.swizzle(l,2,3,0,1),u=SIMD.Float32x4.sub(u,SIMD.Float32x4.mul(e,l)),M=SIMD.Float32x4.sub(SIMD.Float32x4.mul(r,l),M),M=SIMD.Float32x4.swizzle(M,2,3,0,1),l=SIMD.Float32x4.mul(r,n),l=SIMD.Float32x4.swizzle(l,1,0,3,2),M=SIMD.Float32x4.add(SIMD.Float32x4.mul(o,l),M),c=SIMD.Float32x4.sub(SIMD.Float32x4.mul(e,l),c),l=SIMD.Float32x4.swizzle(l,2,3,0,1),M=SIMD.Float32x4.sub(SIMD.Float32x4.mul(o,l),M),c=SIMD.Float32x4.sub(c,SIMD.Float32x4.mul(e,l)),l=SIMD.Float32x4.mul(r,o),l=SIMD.Float32x4.swizzle(l,1,0,3,2),i=SIMD.Float32x4.sub(i,SIMD.Float32x4.mul(e,l)),M=SIMD.Float32x4.add(SIMD.Float32x4.mul(n,l),M),l=SIMD.Float32x4.swizzle(l,2,3,0,1),i=SIMD.Float32x4.add(SIMD.Float32x4.mul(e,l),i),M=SIMD.Float32x4.sub(M,SIMD.Float32x4.mul(n,l)),l=SIMD.Float32x4.mul(r,e),l=SIMD.Float32x4.swizzle(l,1,0,3,2),i=SIMD.Float32x4.add(SIMD.Float32x4.mul(o,l),i),c=SIMD.Float32x4.sub(c,SIMD.Float32x4.mul(n,l)),l=SIMD.Float32x4.swizzle(l,2,3,0,1),i=SIMD.Float32x4.sub(i,SIMD.Float32x4.mul(o,l)),c=SIMD.Float32x4.add(SIMD.Float32x4.mul(n,l),c),SIMD.Float32x4.store(t,0,u),SIMD.Float32x4.store(t,4,i),SIMD.Float32x4.store(t,8,M),SIMD.Float32x4.store(t,12,c),t},p.adjoint=P.USE_SIMD?p.SIMD.adjoint:p.scalar.adjoint,p.determinant=function(t){var a=t[0],r=t[1],n=t[2],e=t[3],o=t[4],l=t[5],u=t[6],i=t[7],M=t[8],c=t[9],s=t[10],f=t[11],x=t[12],S=t[13],I=t[14],D=t[15];return(a*l-r*o)*(s*D-f*I)-(a*u-n*o)*(c*D-f*S)+(a*i-e*o)*(c*I-s*S)+(r*u-n*l)*(M*D-f*x)-(r*i-e*l)*(M*I-s*x)+(n*i-e*u)*(M*S-c*x)},p.SIMD.multiply=function(t,a,r){var n=SIMD.Float32x4.load(a,0),e=SIMD.Float32x4.load(a,4),o=SIMD.Float32x4.load(a,8),l=SIMD.Float32x4.load(a,12),u=SIMD.Float32x4.load(r,0),i=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,0,0,0,0),n),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,1,1,1,1),e),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,2,2,2,2),o),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,3,3,3,3),l))));SIMD.Float32x4.store(t,0,i);var M=SIMD.Float32x4.load(r,4),c=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(M,0,0,0,0),n),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(M,1,1,1,1),e),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(M,2,2,2,2),o),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(M,3,3,3,3),l))));SIMD.Float32x4.store(t,4,c);var s=SIMD.Float32x4.load(r,8),f=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(s,0,0,0,0),n),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(s,1,1,1,1),e),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(s,2,2,2,2),o),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(s,3,3,3,3),l))));SIMD.Float32x4.store(t,8,f);var x=SIMD.Float32x4.load(r,12),S=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(x,0,0,0,0),n),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(x,1,1,1,1),e),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(x,2,2,2,2),o),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(x,3,3,3,3),l))));return SIMD.Float32x4.store(t,12,S),t},p.scalar.multiply=function(t,a,r){var n=a[0],e=a[1],o=a[2],l=a[3],u=a[4],i=a[5],M=a[6],c=a[7],s=a[8],f=a[9],x=a[10],S=a[11],I=a[12],D=a[13],m=a[14],F=a[15],h=r[0],v=r[1],d=r[2],w=r[3];return t[0]=h*n+v*u+d*s+w*I,t[1]=h*e+v*i+d*f+w*D,t[2]=h*o+v*M+d*x+w*m,t[3]=h*l+v*c+d*S+w*F,h=r[4],v=r[5],d=r[6],w=r[7],t[4]=h*n+v*u+d*s+w*I,t[5]=h*e+v*i+d*f+w*D,t[6]=h*o+v*M+d*x+w*m,t[7]=h*l+v*c+d*S+w*F,h=r[8],v=r[9],d=r[10],w=r[11],t[8]=h*n+v*u+d*s+w*I,t[9]=h*e+v*i+d*f+w*D,t[10]=h*o+v*M+d*x+w*m,t[11]=h*l+v*c+d*S+w*F,h=r[12],v=r[13],d=r[14],w=r[15],t[12]=h*n+v*u+d*s+w*I,t[13]=h*e+v*i+d*f+w*D,t[14]=h*o+v*M+d*x+w*m,t[15]=h*l+v*c+d*S+w*F,t},p.multiply=P.USE_SIMD?p.SIMD.multiply:p.scalar.multiply,p.mul=p.multiply,p.scalar.translate=function(t,a,r){var n,e,o,l,u,i,M,c,s,f,x,S,I=r[0],D=r[1],m=r[2];return t[15]=a===t?(t[12]=a[0]*I+a[4]*D+a[8]*m+a[12],t[13]=a[1]*I+a[5]*D+a[9]*m+a[13],t[14]=a[2]*I+a[6]*D+a[10]*m+a[14],a[3]*I+a[7]*D+a[11]*m+a[15]):(n=a[0],e=a[1],o=a[2],l=a[3],u=a[4],i=a[5],M=a[6],c=a[7],s=a[8],f=a[9],x=a[10],S=a[11],t[0]=n,t[1]=e,t[2]=o,t[3]=l,t[4]=u,t[5]=i,t[6]=M,t[7]=c,t[8]=s,t[9]=f,t[10]=x,t[11]=S,t[12]=n*I+u*D+s*m+a[12],t[13]=e*I+i*D+f*m+a[13],t[14]=o*I+M*D+x*m+a[14],l*I+c*D+S*m+a[15]),t},p.SIMD.translate=function(t,a,r){var n=SIMD.Float32x4.load(a,0),e=SIMD.Float32x4.load(a,4),o=SIMD.Float32x4.load(a,8),l=SIMD.Float32x4.load(a,12),u=SIMD.Float32x4(r[0],r[1],r[2],0);a!==t&&(t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t[4]=a[4],t[5]=a[5],t[6]=a[6],t[7]=a[7],t[8]=a[8],t[9]=a[9],t[10]=a[10],t[11]=a[11]),n=SIMD.Float32x4.mul(n,SIMD.Float32x4.swizzle(u,0,0,0,0)),e=SIMD.Float32x4.mul(e,SIMD.Float32x4.swizzle(u,1,1,1,1)),o=SIMD.Float32x4.mul(o,SIMD.Float32x4.swizzle(u,2,2,2,2));var i=SIMD.Float32x4.add(n,SIMD.Float32x4.add(e,SIMD.Float32x4.add(o,l)));return SIMD.Float32x4.store(t,12,i),t},p.translate=P.USE_SIMD?p.SIMD.translate:p.scalar.translate,p.scalar.scale=function(t,a,r){var n=r[0],e=r[1],o=r[2];return t[0]=a[0]*n,t[1]=a[1]*n,t[2]=a[2]*n,t[3]=a[3]*n,t[4]=a[4]*e,t[5]=a[5]*e,t[6]=a[6]*e,t[7]=a[7]*e,t[8]=a[8]*o,t[9]=a[9]*o,t[10]=a[10]*o,t[11]=a[11]*o,t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15],t},p.SIMD.scale=function(t,a,r){var n,e,o,l=SIMD.Float32x4(r[0],r[1],r[2],0);return n=SIMD.Float32x4.load(a,0),SIMD.Float32x4.store(t,0,SIMD.Float32x4.mul(n,SIMD.Float32x4.swizzle(l,0,0,0,0))),e=SIMD.Float32x4.load(a,4),SIMD.Float32x4.store(t,4,SIMD.Float32x4.mul(e,SIMD.Float32x4.swizzle(l,1,1,1,1))),o=SIMD.Float32x4.load(a,8),SIMD.Float32x4.store(t,8,SIMD.Float32x4.mul(o,SIMD.Float32x4.swizzle(l,2,2,2,2))),t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15],t},p.scale=P.USE_SIMD?p.SIMD.scale:p.scalar.scale,p.rotate=function(t,a,r,n){var e,o,l,u,i,M,c,s,f,x,S,I,D,m,F,h,v,d,w,p,z,A,g,b,R=n[0],q=n[1],y=n[2],E=Math.sqrt(R*R+q*q+y*y);return Math.abs(E)<P.EPSILON?null:(R*=E=1/E,q*=E,y*=E,e=Math.sin(r),l=1-(o=Math.cos(r)),u=a[0],i=a[1],M=a[2],c=a[3],s=a[4],f=a[5],x=a[6],S=a[7],I=a[8],D=a[9],m=a[10],F=a[11],h=R*R*l+o,v=q*R*l+y*e,d=y*R*l-q*e,w=R*q*l-y*e,p=q*q*l+o,z=y*q*l+R*e,A=R*y*l+q*e,g=q*y*l-R*e,b=y*y*l+o,t[0]=u*h+s*v+I*d,t[1]=i*h+f*v+D*d,t[2]=M*h+x*v+m*d,t[3]=c*h+S*v+F*d,t[4]=u*w+s*p+I*z,t[5]=i*w+f*p+D*z,t[6]=M*w+x*p+m*z,t[7]=c*w+S*p+F*z,t[8]=u*A+s*g+I*b,t[9]=i*A+f*g+D*b,t[10]=M*A+x*g+m*b,t[11]=c*A+S*g+F*b,a!==t&&(t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15]),t)},p.rotateX=function(t,a,r){var n=Math.sin(r),e=Math.cos(r),o=a[4],l=a[5],u=a[6],i=a[7],M=a[8],c=a[9],s=a[10],f=a[11];return a!==t&&(t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15]),t[4]=o*e+M*n,t[5]=l*e+c*n,t[6]=u*e+s*n,t[7]=i*e+f*n,t[8]=M*e-o*n,t[9]=c*e-l*n,t[10]=s*e-u*n,t[11]=f*e-i*n,t},p.rotateY=function(t,a,r){var n=Math.sin(r),e=Math.cos(r),o=a[0],l=a[1],u=a[2],i=a[3],M=a[8],c=a[9],s=a[10],f=a[11];return a!==t&&(t[4]=a[4],t[5]=a[5],t[6]=a[6],t[7]=a[7],t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15]),t[0]=o*e-M*n,t[1]=l*e-c*n,t[2]=u*e-s*n,t[3]=i*e-f*n,t[8]=o*n+M*e,t[9]=l*n+c*e,t[10]=u*n+s*e,t[11]=i*n+f*e,t},p.rotateZ=function(t,a,r){var n=Math.sin(r),e=Math.cos(r),o=a[0],l=a[1],u=a[2],i=a[3],M=a[4],c=a[5],s=a[6],f=a[7];return a!==t&&(t[8]=a[8],t[9]=a[9],t[10]=a[10],t[11]=a[11],t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15]),t[0]=o*e+M*n,t[1]=l*e+c*n,t[2]=u*e+s*n,t[3]=i*e+f*n,t[4]=M*e-o*n,t[5]=c*e-l*n,t[6]=s*e-u*n,t[7]=f*e-i*n,t},p.fromTranslation=function(t,a){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=a[0],t[13]=a[1],t[14]=a[2],t[15]=1,t},p.fromScaling=function(t,a){return t[0]=a[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=a[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},p.fromRotation=function(t,a,r){var n,e,o,l=r[0],u=r[1],i=r[2],M=Math.sqrt(l*l+u*u+i*i);return Math.abs(M)<P.EPSILON?null:(l*=M=1/M,u*=M,i*=M,n=Math.sin(a),o=1-(e=Math.cos(a)),t[0]=l*l*o+e,t[1]=u*l*o+i*n,t[2]=i*l*o-u*n,t[3]=0,t[4]=l*u*o-i*n,t[5]=u*u*o+e,t[6]=i*u*o+l*n,t[7]=0,t[8]=l*i*o+u*n,t[9]=u*i*o-l*n,t[10]=i*i*o+e,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)},p.fromXRotation=function(t,a){var r=Math.sin(a),n=Math.cos(a);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n,t[6]=r,t[7]=0,t[8]=0,t[9]=-r,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},p.fromYRotation=function(t,a){var r=Math.sin(a),n=Math.cos(a);return t[0]=n,t[1]=0,t[2]=-r,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=r,t[9]=0,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},p.fromZRotation=function(t,a){var r=Math.sin(a),n=Math.cos(a);return t[0]=n,t[1]=r,t[2]=0,t[3]=0,t[4]=-r,t[5]=n,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},p.fromRotationTranslation=function(t,a,r){var n=a[0],e=a[1],o=a[2],l=a[3],u=n+n,i=e+e,M=o+o,c=n*u,s=n*i,f=n*M,x=e*i,S=e*M,I=o*M,D=l*u,m=l*i,F=l*M;return t[0]=1-(x+I),t[1]=s+F,t[2]=f-m,t[3]=0,t[4]=s-F,t[5]=1-(c+I),t[6]=S+D,t[7]=0,t[8]=f+m,t[9]=S-D,t[10]=1-(c+x),t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t},p.fromRotationTranslationScale=function(t,a,r,n){var e=a[0],o=a[1],l=a[2],u=a[3],i=e+e,M=o+o,c=l+l,s=e*i,f=e*M,x=e*c,S=o*M,I=o*c,D=l*c,m=u*i,F=u*M,h=u*c,v=n[0],d=n[1],w=n[2];return t[0]=(1-(S+D))*v,t[1]=(f+h)*v,t[2]=(x-F)*v,t[3]=0,t[4]=(f-h)*d,t[5]=(1-(s+D))*d,t[6]=(I+m)*d,t[7]=0,t[8]=(x+F)*w,t[9]=(I-m)*w,t[10]=(1-(s+S))*w,t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t},p.fromRotationTranslationScaleOrigin=function(t,a,r,n,e){var o=a[0],l=a[1],u=a[2],i=a[3],M=o+o,c=l+l,s=u+u,f=o*M,x=o*c,S=o*s,I=l*c,D=l*s,m=u*s,F=i*M,h=i*c,v=i*s,d=n[0],w=n[1],p=n[2],z=e[0],A=e[1],g=e[2];return t[0]=(1-(I+m))*d,t[1]=(x+v)*d,t[2]=(S-h)*d,t[3]=0,t[4]=(x-v)*w,t[5]=(1-(f+m))*w,t[6]=(D+F)*w,t[7]=0,t[8]=(S+h)*p,t[9]=(D-F)*p,t[10]=(1-(f+I))*p,t[11]=0,t[12]=r[0]+z-(t[0]*z+t[4]*A+t[8]*g),t[13]=r[1]+A-(t[1]*z+t[5]*A+t[9]*g),t[14]=r[2]+g-(t[2]*z+t[6]*A+t[10]*g),t[15]=1,t},p.fromQuat=function(t,a){var r=a[0],n=a[1],e=a[2],o=a[3],l=r+r,u=n+n,i=e+e,M=r*l,c=n*l,s=n*u,f=e*l,x=e*u,S=e*i,I=o*l,D=o*u,m=o*i;return t[0]=1-s-S,t[1]=c+m,t[2]=f-D,t[3]=0,t[4]=c-m,t[5]=1-M-S,t[6]=x+I,t[7]=0,t[8]=f+D,t[9]=x-I,t[10]=1-M-s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},p.frustum=function(t,a,r,n,e,o,l){var u=1/(r-a),i=1/(e-n),M=1/(o-l);return t[0]=2*o*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*o*i,t[6]=0,t[7]=0,t[8]=(r+a)*u,t[9]=(e+n)*i,t[10]=(l+o)*M,t[11]=-1,t[12]=0,t[13]=0,t[14]=l*o*2*M,t[15]=0,t},p.perspective=function(t,a,r,n,e){var o=1/Math.tan(a/2),l=1/(n-e);return t[0]=o/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(e+n)*l,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*e*n*l,t[15]=0,t},p.perspectiveFromFieldOfView=function(t,a,r,n){var e=Math.tan(a.upDegrees*Math.PI/180),o=Math.tan(a.downDegrees*Math.PI/180),l=Math.tan(a.leftDegrees*Math.PI/180),u=Math.tan(a.rightDegrees*Math.PI/180),i=2/(l+u),M=2/(e+o);return t[0]=i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=M,t[6]=0,t[7]=0,t[8]=-(l-u)*i*.5,t[9]=(e-o)*M*.5,t[10]=n/(r-n),t[11]=-1,t[12]=0,t[13]=0,t[14]=n*r/(r-n),t[15]=0,t},p.ortho=function(t,a,r,n,e,o,l){var u=1/(a-r),i=1/(n-e),M=1/(o-l);return t[0]=-2*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*i,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*M,t[11]=0,t[12]=(a+r)*u,t[13]=(e+n)*i,t[14]=(l+o)*M,t[15]=1,t},p.lookAt=function(t,a,r,n){var e,o,l,u,i,M,c,s,f,x,S=a[0],I=a[1],D=a[2],m=n[0],F=n[1],h=n[2],v=r[0],d=r[1],w=r[2];return Math.abs(S-v)<P.EPSILON&&Math.abs(I-d)<P.EPSILON&&Math.abs(D-w)<P.EPSILON?p.identity(t):(c=S-v,s=I-d,f=D-w,e=F*(f*=x=1/Math.sqrt(c*c+s*s+f*f))-h*(s*=x),o=h*(c*=x)-m*f,l=m*s-F*c,(x=Math.sqrt(e*e+o*o+l*l))?(e*=x=1/x,o*=x,l*=x):l=o=e=0,u=s*l-f*o,i=f*e-c*l,M=c*o-s*e,(x=Math.sqrt(u*u+i*i+M*M))?(u*=x=1/x,i*=x,M*=x):M=i=u=0,t[0]=e,t[1]=u,t[2]=c,t[3]=0,t[4]=o,t[5]=i,t[6]=s,t[7]=0,t[8]=l,t[9]=M,t[10]=f,t[11]=0,t[12]=-(e*S+o*I+l*D),t[13]=-(u*S+i*I+M*D),t[14]=-(c*S+s*I+f*D),t[15]=1,t)},p.str=function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},p.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2)+Math.pow(t[9],2)+Math.pow(t[10],2)+Math.pow(t[11],2)+Math.pow(t[12],2)+Math.pow(t[13],2)+Math.pow(t[14],2)+Math.pow(t[15],2))},t.exports=p},function(t,a,r){var l,u,e,o,i,M,n=r(1),c=r(4),s=r(7),f=r(8),x={create:function(){var t=new n.ARRAY_TYPE(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}};x.rotationTo=(o=s.create(),i=s.fromValues(1,0,0),M=s.fromValues(0,1,0),function(t,a,r){var n=s.dot(a,r);return n<-.999999?(s.cross(o,i,a),s.length(o)<1e-6&&s.cross(o,M,a),s.normalize(o,o),x.setAxisAngle(t,o,Math.PI),t):.999999<n?(t[0]=0,t[1]=0,t[2]=0,t[3]=1,t):(s.cross(o,a,r),t[0]=o[0],t[1]=o[1],t[2]=o[2],t[3]=1+n,x.normalize(t,t))}),x.setAxes=(e=c.create(),function(t,a,r,n){return e[0]=r[0],e[3]=r[1],e[6]=r[2],e[1]=n[0],e[4]=n[1],e[7]=n[2],e[2]=-a[0],e[5]=-a[1],e[8]=-a[2],x.normalize(t,x.fromMat3(t,e))}),x.clone=f.clone,x.fromValues=f.fromValues,x.copy=f.copy,x.set=f.set,x.identity=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},x.setAxisAngle=function(t,a,r){r*=.5;var n=Math.sin(r);return t[0]=n*a[0],t[1]=n*a[1],t[2]=n*a[2],t[3]=Math.cos(r),t},x.add=f.add,x.multiply=function(t,a,r){var n=a[0],e=a[1],o=a[2],l=a[3],u=r[0],i=r[1],M=r[2],c=r[3];return t[0]=n*c+l*u+e*M-o*i,t[1]=e*c+l*i+o*u-n*M,t[2]=o*c+l*M+n*i-e*u,t[3]=l*c-n*u-e*i-o*M,t},x.mul=x.multiply,x.scale=f.scale,x.rotateX=function(t,a,r){r*=.5;var n=a[0],e=a[1],o=a[2],l=a[3],u=Math.sin(r),i=Math.cos(r);return t[0]=n*i+l*u,t[1]=e*i+o*u,t[2]=o*i-e*u,t[3]=l*i-n*u,t},x.rotateY=function(t,a,r){r*=.5;var n=a[0],e=a[1],o=a[2],l=a[3],u=Math.sin(r),i=Math.cos(r);return t[0]=n*i-o*u,t[1]=e*i+l*u,t[2]=o*i+n*u,t[3]=l*i-e*u,t},x.rotateZ=function(t,a,r){r*=.5;var n=a[0],e=a[1],o=a[2],l=a[3],u=Math.sin(r),i=Math.cos(r);return t[0]=n*i+e*u,t[1]=e*i-n*u,t[2]=o*i+l*u,t[3]=l*i-o*u,t},x.calculateW=function(t,a){var r=a[0],n=a[1],e=a[2];return t[0]=r,t[1]=n,t[2]=e,t[3]=Math.sqrt(Math.abs(1-r*r-n*n-e*e)),t},x.dot=f.dot,x.lerp=f.lerp,x.slerp=function(t,a,r,n){var e,o,l,u,i,M=a[0],c=a[1],s=a[2],f=a[3],x=r[0],S=r[1],I=r[2],D=r[3];return(o=M*x+c*S+s*I+f*D)<0&&(o=-o,x=-x,S=-S,I=-I,D=-D),i=1e-6<1-o?(e=Math.acos(o),l=Math.sin(e),u=Math.sin((1-n)*e)/l,Math.sin(n*e)/l):(u=1-n,n),t[0]=u*M+i*x,t[1]=u*c+i*S,t[2]=u*s+i*I,t[3]=u*f+i*D,t},x.sqlerp=(l=x.create(),u=x.create(),function(t,a,r,n,e,o){return x.slerp(l,a,e,o),x.slerp(u,r,n,o),x.slerp(t,l,u,2*o*(1-o)),t}),x.invert=function(t,a){var r=a[0],n=a[1],e=a[2],o=a[3],l=r*r+n*n+e*e+o*o,u=l?1/l:0;return t[0]=-r*u,t[1]=-n*u,t[2]=-e*u,t[3]=o*u,t},x.conjugate=function(t,a){return t[0]=-a[0],t[1]=-a[1],t[2]=-a[2],t[3]=a[3],t},x.length=f.length,x.len=x.length,x.squaredLength=f.squaredLength,x.sqrLen=x.squaredLength,x.normalize=f.normalize,x.fromMat3=function(t,a){var r,n=a[0]+a[4]+a[8];if(0<n)r=Math.sqrt(n+1),t[3]=.5*r,r=.5/r,t[0]=(a[5]-a[7])*r,t[1]=(a[6]-a[2])*r,t[2]=(a[1]-a[3])*r;else{var e=0;a[4]>a[0]&&(e=1),a[8]>a[3*e+e]&&(e=2);var o=(e+1)%3,l=(e+2)%3;r=Math.sqrt(a[3*e+e]-a[3*o+o]-a[3*l+l]+1),t[e]=.5*r,r=.5/r,t[3]=(a[3*o+l]-a[3*l+o])*r,t[o]=(a[3*o+e]+a[3*e+o])*r,t[l]=(a[3*l+e]+a[3*e+l])*r}return t},x.str=function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},t.exports=x},function(t,a,r){var i,o=r(1),l={create:function(){var t=new o.ARRAY_TYPE(3);return t[0]=0,t[1]=0,t[2]=0,t},clone:function(t){var a=new o.ARRAY_TYPE(3);return a[0]=t[0],a[1]=t[1],a[2]=t[2],a},fromValues:function(t,a,r){var n=new o.ARRAY_TYPE(3);return n[0]=t,n[1]=a,n[2]=r,n},copy:function(t,a){return t[0]=a[0],t[1]=a[1],t[2]=a[2],t},set:function(t,a,r,n){return t[0]=a,t[1]=r,t[2]=n,t},add:function(t,a,r){return t[0]=a[0]+r[0],t[1]=a[1]+r[1],t[2]=a[2]+r[2],t},subtract:function(t,a,r){return t[0]=a[0]-r[0],t[1]=a[1]-r[1],t[2]=a[2]-r[2],t}};l.sub=l.subtract,l.multiply=function(t,a,r){return t[0]=a[0]*r[0],t[1]=a[1]*r[1],t[2]=a[2]*r[2],t},l.mul=l.multiply,l.divide=function(t,a,r){return t[0]=a[0]/r[0],t[1]=a[1]/r[1],t[2]=a[2]/r[2],t},l.div=l.divide,l.min=function(t,a,r){return t[0]=Math.min(a[0],r[0]),t[1]=Math.min(a[1],r[1]),t[2]=Math.min(a[2],r[2]),t},l.max=function(t,a,r){return t[0]=Math.max(a[0],r[0]),t[1]=Math.max(a[1],r[1]),t[2]=Math.max(a[2],r[2]),t},l.scale=function(t,a,r){return t[0]=a[0]*r,t[1]=a[1]*r,t[2]=a[2]*r,t},l.scaleAndAdd=function(t,a,r,n){return t[0]=a[0]+r[0]*n,t[1]=a[1]+r[1]*n,t[2]=a[2]+r[2]*n,t},l.distance=function(t,a){var r=a[0]-t[0],n=a[1]-t[1],e=a[2]-t[2];return Math.sqrt(r*r+n*n+e*e)},l.dist=l.distance,l.squaredDistance=function(t,a){var r=a[0]-t[0],n=a[1]-t[1],e=a[2]-t[2];return r*r+n*n+e*e},l.sqrDist=l.squaredDistance,l.length=function(t){var a=t[0],r=t[1],n=t[2];return Math.sqrt(a*a+r*r+n*n)},l.len=l.length,l.squaredLength=function(t){var a=t[0],r=t[1],n=t[2];return a*a+r*r+n*n},l.sqrLen=l.squaredLength,l.negate=function(t,a){return t[0]=-a[0],t[1]=-a[1],t[2]=-a[2],t},l.inverse=function(t,a){return t[0]=1/a[0],t[1]=1/a[1],t[2]=1/a[2],t},l.normalize=function(t,a){var r=a[0],n=a[1],e=a[2],o=r*r+n*n+e*e;return 0<o&&(o=1/Math.sqrt(o),t[0]=a[0]*o,t[1]=a[1]*o,t[2]=a[2]*o),t},l.dot=function(t,a){return t[0]*a[0]+t[1]*a[1]+t[2]*a[2]},l.cross=function(t,a,r){var n=a[0],e=a[1],o=a[2],l=r[0],u=r[1],i=r[2];return t[0]=e*i-o*u,t[1]=o*l-n*i,t[2]=n*u-e*l,t},l.lerp=function(t,a,r,n){var e=a[0],o=a[1],l=a[2];return t[0]=e+n*(r[0]-e),t[1]=o+n*(r[1]-o),t[2]=l+n*(r[2]-l),t},l.hermite=function(t,a,r,n,e,o){var l=o*o,u=l*(2*o-3)+1,i=l*(o-2)+o,M=l*(o-1),c=l*(3-2*o);return t[0]=a[0]*u+r[0]*i+n[0]*M+e[0]*c,t[1]=a[1]*u+r[1]*i+n[1]*M+e[1]*c,t[2]=a[2]*u+r[2]*i+n[2]*M+e[2]*c,t},l.bezier=function(t,a,r,n,e,o){var l=1-o,u=l*l,i=o*o,M=u*l,c=3*o*u,s=3*i*l,f=i*o;return t[0]=a[0]*M+r[0]*c+n[0]*s+e[0]*f,t[1]=a[1]*M+r[1]*c+n[1]*s+e[1]*f,t[2]=a[2]*M+r[2]*c+n[2]*s+e[2]*f,t},l.random=function(t,a){a=a||1;var r=2*o.RANDOM()*Math.PI,n=2*o.RANDOM()-1,e=Math.sqrt(1-n*n)*a;return t[0]=Math.cos(r)*e,t[1]=Math.sin(r)*e,t[2]=n*a,t},l.transformMat4=function(t,a,r){var n=a[0],e=a[1],o=a[2],l=r[3]*n+r[7]*e+r[11]*o+r[15];return l=l||1,t[0]=(r[0]*n+r[4]*e+r[8]*o+r[12])/l,t[1]=(r[1]*n+r[5]*e+r[9]*o+r[13])/l,t[2]=(r[2]*n+r[6]*e+r[10]*o+r[14])/l,t},l.transformMat3=function(t,a,r){var n=a[0],e=a[1],o=a[2];return t[0]=n*r[0]+e*r[3]+o*r[6],t[1]=n*r[1]+e*r[4]+o*r[7],t[2]=n*r[2]+e*r[5]+o*r[8],t},l.transformQuat=function(t,a,r){var n=a[0],e=a[1],o=a[2],l=r[0],u=r[1],i=r[2],M=r[3],c=M*n+u*o-i*e,s=M*e+i*n-l*o,f=M*o+l*e-u*n,x=-l*n-u*e-i*o;return t[0]=c*M+x*-l+s*-i-f*-u,t[1]=s*M+x*-u+f*-l-c*-i,t[2]=f*M+x*-i+c*-u-s*-l,t},l.rotateX=function(t,a,r,n){var e=[],o=[];return e[0]=a[0]-r[0],e[1]=a[1]-r[1],e[2]=a[2]-r[2],o[0]=e[0],o[1]=e[1]*Math.cos(n)-e[2]*Math.sin(n),o[2]=e[1]*Math.sin(n)+e[2]*Math.cos(n),t[0]=o[0]+r[0],t[1]=o[1]+r[1],t[2]=o[2]+r[2],t},l.rotateY=function(t,a,r,n){var e=[],o=[];return e[0]=a[0]-r[0],e[1]=a[1]-r[1],e[2]=a[2]-r[2],o[0]=e[2]*Math.sin(n)+e[0]*Math.cos(n),o[1]=e[1],o[2]=e[2]*Math.cos(n)-e[0]*Math.sin(n),t[0]=o[0]+r[0],t[1]=o[1]+r[1],t[2]=o[2]+r[2],t},l.rotateZ=function(t,a,r,n){var e=[],o=[];return e[0]=a[0]-r[0],e[1]=a[1]-r[1],e[2]=a[2]-r[2],o[0]=e[0]*Math.cos(n)-e[1]*Math.sin(n),o[1]=e[0]*Math.sin(n)+e[1]*Math.cos(n),o[2]=e[2],t[0]=o[0]+r[0],t[1]=o[1]+r[1],t[2]=o[2]+r[2],t},l.forEach=(i=l.create(),function(t,a,r,n,e,o){var l,u;for(a||(a=3),r||(r=0),u=n?Math.min(n*a+r,t.length):t.length,l=r;l<u;l+=a)i[0]=t[l],i[1]=t[l+1],i[2]=t[l+2],e(i,i,o),t[l]=i[0],t[l+1]=i[1],t[l+2]=i[2];return t}),l.angle=function(t,a){var r=l.fromValues(t[0],t[1],t[2]),n=l.fromValues(a[0],a[1],a[2]);l.normalize(r,r),l.normalize(n,n);var e=l.dot(r,n);return 1<e?0:Math.acos(e)},l.str=function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},t.exports=l},function(t,a,r){var i,o=r(1),n={create:function(){var t=new o.ARRAY_TYPE(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t},clone:function(t){var a=new o.ARRAY_TYPE(4);return a[0]=t[0],a[1]=t[1],a[2]=t[2],a[3]=t[3],a},fromValues:function(t,a,r,n){var e=new o.ARRAY_TYPE(4);return e[0]=t,e[1]=a,e[2]=r,e[3]=n,e},copy:function(t,a){return t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t},set:function(t,a,r,n,e){return t[0]=a,t[1]=r,t[2]=n,t[3]=e,t},add:function(t,a,r){return t[0]=a[0]+r[0],t[1]=a[1]+r[1],t[2]=a[2]+r[2],t[3]=a[3]+r[3],t},subtract:function(t,a,r){return t[0]=a[0]-r[0],t[1]=a[1]-r[1],t[2]=a[2]-r[2],t[3]=a[3]-r[3],t}};n.sub=n.subtract,n.multiply=function(t,a,r){return t[0]=a[0]*r[0],t[1]=a[1]*r[1],t[2]=a[2]*r[2],t[3]=a[3]*r[3],t},n.mul=n.multiply,n.divide=function(t,a,r){return t[0]=a[0]/r[0],t[1]=a[1]/r[1],t[2]=a[2]/r[2],t[3]=a[3]/r[3],t},n.div=n.divide,n.min=function(t,a,r){return t[0]=Math.min(a[0],r[0]),t[1]=Math.min(a[1],r[1]),t[2]=Math.min(a[2],r[2]),t[3]=Math.min(a[3],r[3]),t},n.max=function(t,a,r){return t[0]=Math.max(a[0],r[0]),t[1]=Math.max(a[1],r[1]),t[2]=Math.max(a[2],r[2]),t[3]=Math.max(a[3],r[3]),t},n.scale=function(t,a,r){return t[0]=a[0]*r,t[1]=a[1]*r,t[2]=a[2]*r,t[3]=a[3]*r,t},n.scaleAndAdd=function(t,a,r,n){return t[0]=a[0]+r[0]*n,t[1]=a[1]+r[1]*n,t[2]=a[2]+r[2]*n,t[3]=a[3]+r[3]*n,t},n.distance=function(t,a){var r=a[0]-t[0],n=a[1]-t[1],e=a[2]-t[2],o=a[3]-t[3];return Math.sqrt(r*r+n*n+e*e+o*o)},n.dist=n.distance,n.squaredDistance=function(t,a){var r=a[0]-t[0],n=a[1]-t[1],e=a[2]-t[2],o=a[3]-t[3];return r*r+n*n+e*e+o*o},n.sqrDist=n.squaredDistance,n.length=function(t){var a=t[0],r=t[1],n=t[2],e=t[3];return Math.sqrt(a*a+r*r+n*n+e*e)},n.len=n.length,n.squaredLength=function(t){var a=t[0],r=t[1],n=t[2],e=t[3];return a*a+r*r+n*n+e*e},n.sqrLen=n.squaredLength,n.negate=function(t,a){return t[0]=-a[0],t[1]=-a[1],t[2]=-a[2],t[3]=-a[3],t},n.inverse=function(t,a){return t[0]=1/a[0],t[1]=1/a[1],t[2]=1/a[2],t[3]=1/a[3],t},n.normalize=function(t,a){var r=a[0],n=a[1],e=a[2],o=a[3],l=r*r+n*n+e*e+o*o;return 0<l&&(l=1/Math.sqrt(l),t[0]=r*l,t[1]=n*l,t[2]=e*l,t[3]=o*l),t},n.dot=function(t,a){return t[0]*a[0]+t[1]*a[1]+t[2]*a[2]+t[3]*a[3]},n.lerp=function(t,a,r,n){var e=a[0],o=a[1],l=a[2],u=a[3];return t[0]=e+n*(r[0]-e),t[1]=o+n*(r[1]-o),t[2]=l+n*(r[2]-l),t[3]=u+n*(r[3]-u),t},n.random=function(t,a){return a=a||1,t[0]=o.RANDOM(),t[1]=o.RANDOM(),t[2]=o.RANDOM(),t[3]=o.RANDOM(),n.normalize(t,t),n.scale(t,t,a),t},n.transformMat4=function(t,a,r){var n=a[0],e=a[1],o=a[2],l=a[3];return t[0]=r[0]*n+r[4]*e+r[8]*o+r[12]*l,t[1]=r[1]*n+r[5]*e+r[9]*o+r[13]*l,t[2]=r[2]*n+r[6]*e+r[10]*o+r[14]*l,t[3]=r[3]*n+r[7]*e+r[11]*o+r[15]*l,t},n.transformQuat=function(t,a,r){var n=a[0],e=a[1],o=a[2],l=r[0],u=r[1],i=r[2],M=r[3],c=M*n+u*o-i*e,s=M*e+i*n-l*o,f=M*o+l*e-u*n,x=-l*n-u*e-i*o;return t[0]=c*M+x*-l+s*-i-f*-u,t[1]=s*M+x*-u+f*-l-c*-i,t[2]=f*M+x*-i+c*-u-s*-l,t[3]=a[3],t},n.forEach=(i=n.create(),function(t,a,r,n,e,o){var l,u;for(a||(a=4),r||(r=0),u=n?Math.min(n*a+r,t.length):t.length,l=r;l<u;l+=a)i[0]=t[l],i[1]=t[l+1],i[2]=t[l+2],i[3]=t[l+3],e(i,i,o),t[l]=i[0],t[l+1]=i[1],t[l+2]=i[2],t[l+3]=i[3];return t}),n.str=function(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},t.exports=n},function(t,a,r){var i,n=r(1),e={create:function(){var t=new n.ARRAY_TYPE(2);return t[0]=0,t[1]=0,t},clone:function(t){var a=new n.ARRAY_TYPE(2);return a[0]=t[0],a[1]=t[1],a},fromValues:function(t,a){var r=new n.ARRAY_TYPE(2);return r[0]=t,r[1]=a,r},copy:function(t,a){return t[0]=a[0],t[1]=a[1],t},set:function(t,a,r){return t[0]=a,t[1]=r,t},add:function(t,a,r){return t[0]=a[0]+r[0],t[1]=a[1]+r[1],t},subtract:function(t,a,r){return t[0]=a[0]-r[0],t[1]=a[1]-r[1],t}};e.sub=e.subtract,e.multiply=function(t,a,r){return t[0]=a[0]*r[0],t[1]=a[1]*r[1],t},e.mul=e.multiply,e.divide=function(t,a,r){return t[0]=a[0]/r[0],t[1]=a[1]/r[1],t},e.div=e.divide,e.min=function(t,a,r){return t[0]=Math.min(a[0],r[0]),t[1]=Math.min(a[1],r[1]),t},e.max=function(t,a,r){return t[0]=Math.max(a[0],r[0]),t[1]=Math.max(a[1],r[1]),t},e.scale=function(t,a,r){return t[0]=a[0]*r,t[1]=a[1]*r,t},e.scaleAndAdd=function(t,a,r,n){return t[0]=a[0]+r[0]*n,t[1]=a[1]+r[1]*n,t},e.distance=function(t,a){var r=a[0]-t[0],n=a[1]-t[1];return Math.sqrt(r*r+n*n)},e.dist=e.distance,e.squaredDistance=function(t,a){var r=a[0]-t[0],n=a[1]-t[1];return r*r+n*n},e.sqrDist=e.squaredDistance,e.length=function(t){var a=t[0],r=t[1];return Math.sqrt(a*a+r*r)},e.len=e.length,e.squaredLength=function(t){var a=t[0],r=t[1];return a*a+r*r},e.sqrLen=e.squaredLength,e.negate=function(t,a){return t[0]=-a[0],t[1]=-a[1],t},e.inverse=function(t,a){return t[0]=1/a[0],t[1]=1/a[1],t},e.normalize=function(t,a){var r=a[0],n=a[1],e=r*r+n*n;return 0<e&&(e=1/Math.sqrt(e),t[0]=a[0]*e,t[1]=a[1]*e),t},e.dot=function(t,a){return t[0]*a[0]+t[1]*a[1]},e.cross=function(t,a,r){var n=a[0]*r[1]-a[1]*r[0];return t[0]=t[1]=0,t[2]=n,t},e.lerp=function(t,a,r,n){var e=a[0],o=a[1];return t[0]=e+n*(r[0]-e),t[1]=o+n*(r[1]-o),t},e.random=function(t,a){a=a||1;var r=2*n.RANDOM()*Math.PI;return t[0]=Math.cos(r)*a,t[1]=Math.sin(r)*a,t},e.transformMat2=function(t,a,r){var n=a[0],e=a[1];return t[0]=r[0]*n+r[2]*e,t[1]=r[1]*n+r[3]*e,t},e.transformMat2d=function(t,a,r){var n=a[0],e=a[1];return t[0]=r[0]*n+r[2]*e+r[4],t[1]=r[1]*n+r[3]*e+r[5],t},e.transformMat3=function(t,a,r){var n=a[0],e=a[1];return t[0]=r[0]*n+r[3]*e+r[6],t[1]=r[1]*n+r[4]*e+r[7],t},e.transformMat4=function(t,a,r){var n=a[0],e=a[1];return t[0]=r[0]*n+r[4]*e+r[12],t[1]=r[1]*n+r[5]*e+r[13],t},e.forEach=(i=e.create(),function(t,a,r,n,e,o){var l,u;for(a||(a=2),r||(r=0),u=n?Math.min(n*a+r,t.length):t.length,l=r;l<u;l+=a)i[0]=t[l],i[1]=t[l+1],e(i,i,o),t[l]=i[0],t[l+1]=i[1];return t}),e.str=function(t){return"vec2("+t[0]+", "+t[1]+")"},t.exports=e}])});var _;f=mat4.create(),s=mat4.create(),x=0,D=(_=[0,0,0,7.5,-2,0,11,0,0,0,0,0,0,-2,0,1,-2,0,0,0,0,1,-2,0,3.5,-2,0,0,0,0,3.5,-2,0,7.5,-2,0,11,0,0,7.5,-2,0,10,-2,0,11,0,0,11,-2,0,10,-2,0,1,-2,0,1,-3.5,0,3.5,-3.5,0,1,-2,0,3.5,-2,0,3.5,-3.5,0,7.5,-2,0,7.5,-3.5,0,10,-2,0,10,-2,0,7.5,-3.5,0,10,-3.5,0,1,-3.5,0,4.5,-6,0,3.5,-3.5,0,3.5,-3.5,0,4.5,-3.5,0,4.5,-6,0,1,-3.5,0,3.5,-6,0,4.5,-6,0,1,-3.5,0,1,-7.75,0,3.5,-6,0,1,-7.75,0,3.5,-7.75,0,3.5,-6,0,7.5,-3.5,0,10,-3.5,0,6.5,-6,0,6.5,-3.5,0,7.5,-3.5,0,6.5,-6,0,10,-3.5,0,6.5,-6,0,7.5,-6,0,10,-3.5,0,7.5,-6,0,10,-7.75,0,7.5,-6,0,7.5,-7.75,0,10,-7.75,0,1,-8.1,0,1,-9.1,0,1.833333333,-8.1,0,1.833333333,-8.1,0,1.833333333,-9.6,0,1,-9.1,0,2.6666666,-8.1,0,2.6666666,-10.1,0,3.5,-8.1,0,3.5,-8.1,0,3.5,-10.6,0,2.6666666,-10.1,0,4.3333333,-8.1,0,4.3333333,-11.1,0,5.1666666,-8.1,0,5.1666666,-8.1,0,5.1666666,-11.6,0,4.3333333,-11.1,0,10,-8.1,0,10,-9.1,0,9.166666667,-8.1,0,9.166666667,-8.1,0,9.166666667,-9.6,0,10,-9.1,0,8.3333334,-8.1,0,8.3333334,-10.1,0,7.5,-8.1,0,7.5,-8.1,0,7.5,-10.6,0,8.3333334,-10.1,0,6.6666667,-8.1,0,6.6666667,-11.1,0,5.8333334,-8.1,0,5.8333334,-8.1,0,5.8333334,-11.6,0,6.6666667,-11.1,0]).slice(0),m=[];function a(){i.uniformMatrix4fv(t.mvMatrixUniform,!1,f),i.uniformMatrix4fv(t.pMatrixUniform,!1,s)}function r(t){for(var a=["webgl","experimental-webgl"],r=null,n=0;n<a.length;n++){try{r=t.getContext(a[n])}catch(t){}if(r)break}return r?(r.viewportWidth=t.width,r.viewportHeight=t.height):alert("Failed to create WebGL context!"),r}function n(t){var a=document.getElementById(t);if(!a)return null;for(var r,n="",e=a.firstChild;e;)3==e.nodeType&&(n+=e.textContent),e=e.nextSibling;if("x-shader/x-fragment"==a.type)r=i.createShader(i.FRAGMENT_SHADER);else{if("x-shader/x-vertex"!=a.type)return null;r=i.createShader(i.VERTEX_SHADER)}return i.shaderSource(r,n),i.compileShader(r),i.getShaderParameter(r,i.COMPILE_STATUS)?r:(alert(i.getShaderInfoLog(r)),null)}function e(){vertexShader=n("shader-vs"),fragmentShader=n("shader-fs"),t=i.createProgram(),i.attachShader(t,vertexShader),i.attachShader(t,fragmentShader),i.linkProgram(t),i.getProgramParameter(t,i.LINK_STATUS)||alert("Failed to setup shaders"),i.useProgram(t),t.vertexPositionAttribute=i.getAttribLocation(t,"aVertexPosition"),i.enableVertexAttribArray(t.vertexPositionAttribute),t.vertexColorAttribute=i.getAttribLocation(t,"aVertexColor"),i.enableVertexAttribArray(t.vertexColorAttribute),t.mvMatrixUniform=i.getUniformLocation(t,"uMVMatrix"),t.pMatrixUniform=i.getUniformLocation(t,"uPMatrix")}function l(){c=i.createBuffer(),i.bindBuffer(i.ARRAY_BUFFER,c),mat4.identity(f),mat4.identity(s),mat4.lookAt(f,[5.5,-6,15],[5.5,-6,-1.5],[0,1,0]),mat4.perspective(s,glMatrix.toRadian(50),M.width/M.height,.1,1e3);for(var t=(performance.now()-x)/1e3,a=[[1,F],[2,h],[1],[3,d],[1],[3,w],[3,p],[3,z],[2,v]],r=0,n=0;n<a.length;n++)r+=a[n][0];r<t&&(x=performance.now(),t=0);var e=0,o=!1;for(n=0;n<a.length&&!o;n++)t<(e+=a[n][0])&&(a[n][1]&&(t-=e-a[n][0],a[n][1](t,a[n][0])),o=!0);i.bufferData(i.ARRAY_BUFFER,new Float32Array(D),i.DYNAMIC_DRAW),c.itemSize=3,c.numberOfItems=D.length/3}function u(t,a,r){for(var n=0;n<m.length;n++){var e=R(n,_);vec3.add(e,e,vec3.fromValues(0,0,1.5)),y(n,vec3.fromValues(1,1,t),e,a,r)}}function S(t,a,r,n,e){for(var o=0;o<n.length;o+=3)n[o]+=.1*Math.sin(.5*(e[o]+e[o+1]+1))*Math.sin(2*t*Math.PI*1)*Math.cos(2*t*Math.PI*1),n[o+1]+=.1*Math.sin(.5*(e[o]+e[o+1]+1))*Math.sin(2*t*Math.PI*1)*Math.sin(2*t*Math.PI*1)}function I(t,a,r,n){a&&(t=1-t);for(var e=0;e<m.length;e++){E(e,quat.rotateX(quat.create(),quat.create(),glMatrix.toRadian(90)),vec3.fromValues(5.5,-12,0),r,n);var o=R(e,r),l=vec3.create();vec3.sub(l,o,vec3.fromValues(5.5,-10.5,6)),vec3.scale(l,l,a?t*t:Math.sqrt(t));var u=vec3.create();vec3.add(u,l,o),q(e,u,r,r);var i=R(e,r);E(e,quat.rotateY(quat.create(),quat.create(),glMatrix.toRadian(5.5<i[0]?60*t:-60*t)),i,r,r);var M=50*t-80*t*t;M<0&&(M=0),u[1]+=M,q(e,u,r,r);var c=2/3<t?2/3:t;E(e,quat.rotateX(quat.create(),quat.create(),glMatrix.toRadian(5.5<i[0]?180*c:-180*c)),R(e,r),r,r)}}function F(t,a){var r=_.slice(0);u(.01,r,_),D=r}function h(t,a){var r=t/a,n=_.slice(0);u(r,n,_),S(t,1,.5,n,n),D=n}function v(t,a){var r=t/a,n=_.slice(0);u(1-r,n,_),S(t,1,.5,n,n),D=n}function d(t,a){var r=t/a,n=vec3.fromValues(5.5,-6,15);vec3.rotateY(n,n,vec3.fromValues(5.5,-6,-1.5),2*r*Math.PI),mat4.lookAt(f,n,[5.5,-6,-1.5],[0,1,0]),mat4.perspective(s,glMatrix.toRadian(50),M.width/M.height,.1,1e3)}function w(t,a){for(var r=t/a,n=_.slice(0),e=90*r*r*r*r,o=0;o<m.length;o++)E(o,quat.rotateX(quat.create(),quat.create(),glMatrix.toRadian(e)),vec3.fromValues(5.5,-12,0),n,_);D=n;var l=vec3.create(),u=vec3.create();vec3.lerp(l,[5.5,-6,15],[5.5,10,40],Math.min(3*r,1)),vec3.lerp(u,[5.5,-6,-1.5],[5.5,-6,5],Math.min(3*r,1)),mat4.lookAt(f,l,u,[0,1,0])}function p(t,a){var r=t/a;mat4.lookAt(f,[5.5,10,40],[5.5,-6,5],[0,1,0]);var n=_.slice(0);I(r,!1,n,_),D=n}function z(t,a){var r=t/a;mat4.lookAt(f,[5.5,10,40],[5.5,-6,5],[0,1,0]);var n=vec3.create(),e=vec3.create(),o=vec3.create();vec3.rotateX(n,[5.5,10,40],vec3.fromValues(0,0,0),glMatrix.toRadian(90*Math.min(2*r,1))),vec3.lerp(e,n,[5.5,-27,6],Math.min(2*r,1)),vec3.lerp(o,[5.5,-6,5],[5.5,0,6],Math.min(2*r,1)),mat4.lookAt(f,e,o,[0,1,1]);var l=_.slice(0);I(r,!0,l,_),D=l}function A(){o=i.createBuffer(),i.bindBuffer(i.ARRAY_BUFFER,o);for(var t=[],a=[22/255,40/255,76/255],r=[232/255,74/255,54/255],n=0;n<_.length;n+=3){var e=a;_[n+1]<-8&&(e=r),t.push(e[0]/(1-.5*_[n+2])),t.push(e[1]/(1-.5*_[n+2])),t.push(e[2]/(1-.5*_[n+2])),t.push(1)}i.bufferData(i.ARRAY_BUFFER,new Float32Array(t),i.STATIC_DRAW),o.itemSize=4,o.numItems=D.length/3}function g(){l(),A()}function b(){for(var t=_.length,a=0;a<t;a+=3){var r=_[a],n=_[a+1],e=_[a+2];_.push(r,n,e-3)}for(a=0;a<t;a+=9){for(var o=[],l=0;l<9;l++)o.push(a+l);for(l=0;l<9;l++)o.push(a+t+l);for(var u=_.slice(a,a+9),i=_.slice(t+a,t+a+9),M=u.concat(i),c=[[0,1,3],[1,2,4],[2,0,5],[3,4,1],[4,5,2],[5,3,0]],s=0;s<c.length;s++)for(var f=c[s],x=0;x<3;x++){l=f[x];for(var S=0;S<3;S++){var I=3*l+S;_.push(M[I]),-1==o.indexOf(_.length-1)&&o.push(_.length-1)}}m.push(o)}D=_.slice(0)}function R(t,a){for(var r=vec3.create(),n=0;n<m[t].length;n+=3)vec3.add(r,r,vec3.fromValues(a[m[t][n]],a[m[t][n+1]],a[m[t][n+2]]));return vec3.scale(r,r,3/m[t].length),r}function q(t,a,r,n){var e=R(t,n),o=vec3.create();vec3.sub(o,a,e);for(var l=0;l<m[t].length;l++)r[m[t][l]]=o[l%3]+n[m[t][l]]}function y(t,a,r,n,e){for(var o=0;o<m[t].length;o+=3){var l=vec3.fromValues(e[m[t][o]],e[m[t][o+1]],e[m[t][o+2]]);vec3.sub(l,l,r),vec3.mul(l,l,a),vec3.add(l,l,r);for(var u=0;u<3;u++)n[m[t][o+u]]=l[u]}}function E(t,a,r,n,e){for(var o=0;o<m[t].length;o+=3){var l=vec3.fromValues(e[m[t][o]],e[m[t][o+1]],e[m[t][o+2]]);vec3.sub(l,l,r),vec3.transformQuat(l,l,a),vec3.add(l,l,r);for(var u=0;u<3;u++)n[m[t][o+u]]=l[u]}}function P(){i.viewport(0,0,i.viewportWidth,i.viewportHeight),i.clear(i.COLOR_BUFFER_BIT|i.DEPTH_BUFFER_BIT),i.bindBuffer(i.ARRAY_BUFFER,c),i.vertexAttribPointer(t.vertexPositionAttribute,c.itemSize,i.FLOAT,!1,0,0),i.bindBuffer(i.ARRAY_BUFFER,o),i.vertexAttribPointer(t.vertexColorAttribute,o.itemSize,i.FLOAT,!1,0,0),a(),i.drawArrays(i.TRIANGLES,0,c.numberOfItems)}function Y(){l()}function startup(){M=document.getElementById("myGLCanvas"),b(),i=r(M),e(),g(),i.clearColor(1,1,1,1),i.enable(i.DEPTH_TEST),x=performance.now(),T()}function T(){requestAnimFrame(T),P(),Y()}WebGLUtils=function(){var e=function(t,a){for(var r=["webgl","experimental-webgl","webkit-3d","moz-webgl"],n=null,e=0;e<r.length;++e){try{n=t.getContext(r[e],a)}catch(t){}if(n)break}return n};return{create3DContext:e,setupWebGL:function(r,t){function a(t){var a=r.parentNode;a&&(a.innerHTML='<table style="background-color: #8CE; width: 100%; height: 100%;"><tr><td align="center"><div style="display: table-cell; vertical-align: middle;"><div style="">'+t+"</div></div></td></tr></table>")}if(!window.WebGLRenderingContext)return a('This page requires a browser that supports WebGL.<br/><a href="http://get.webgl.org">Click here to upgrade your browser.</a>'),null;var n=e(r,t);return n||a('It doesn\'t appear your computer can support WebGL.<br/><a href="http://get.webgl.org/troubleshooting/">Click here for more information.</a>'),n}}}(),window.requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t,a){return window.setTimeout(t,1e3/60)},window.cancelAnimFrame=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame||window.clearTimeout,WebGLUtils=function(){var e=function(t,a){for(var r=["webgl","experimental-webgl","webkit-3d","moz-webgl"],n=null,e=0;e<r.length;++e){try{n=t.getContext(r[e],a)}catch(t){}if(n)break}return n};return{create3DContext:e,setupWebGL:function(r,t){function a(t){var a=r.parentNode;a&&(a.innerHTML='<table style="background-color: #8CE; width: 100%; height: 100%;"><tr><td align="center"><div style="display: table-cell; vertical-align: middle;"><div style="">'+t+"</div></div></td></tr></table>")}if(!window.WebGLRenderingContext)return a('This page requires a browser that supports WebGL.<br/><a href="http://get.webgl.org">Click here to upgrade your browser.</a>'),null;var n=e(r,t);return n||a('It doesn\'t appear your computer can support WebGL.<br/><a href="http://get.webgl.org/troubleshooting/">Click here for more information.</a>'),n}}}(),window.requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t,a){return window.setTimeout(t,1e3/60)},window.cancelAnimFrame=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame||window.clearTimeout;