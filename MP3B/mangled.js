WebGLUtils=function(){var t=function(t){return'<table style="background-color: #8CE; width: 100%; height: 100%;"><tr><td align="center"><div style="display: table-cell; vertical-align: middle;"><div style="">'+t+"</div></div></td></tr></table>"},r='This page requires a browser that supports WebGL.<br/><a href="http://get.webgl.org">Click here to upgrade your browser.</a>',e='It doesn\'t appear your computer can support WebGL.<br/><a href="http://get.webgl.org/troubleshooting/">Click here for more information.</a>',n=function(t,r){for(var e=["webgl","experimental-webgl","webkit-3d","moz-webgl"],n=null,a=0;a<e.length;++a){try{n=t.getContext(e[a],r)}catch(t){}if(n)break}return n};return{create3DContext:n,setupWebGL:function(a,o,i){i=i||function(n){var o=a.parentNode;if(o){var i=window.WebGLRenderingContext?e:r;n&&(i+="<br/><br/>Status: "+n),o.innerHTML=t(i)}},a.addEventListener&&a.addEventListener("webglcontextcreationerror",function(t){i(t.statusMessage)},!1);var u=n(a,o);return u||window.WebGLRenderingContext||i(""),u}}}(),window.requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t,r){window.setTimeout(t,1e3/60)},function(t,r){if("object"==typeof exports&&"object"==typeof module)module.exports=r();else if("function"==typeof define&&define.amd)define([],r);else{var e=r();for(var n in e)("object"==typeof exports?exports:t)[n]=e[n]}}(this,function(){return function(t){function r(n){if(e[n])return e[n].exports;var a=e[n]={i:n,l:!1,exports:{}};return t[n].call(a.exports,a,a.exports,r),a.l=!0,a.exports}var e={};return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,r){return Object.prototype.hasOwnProperty.call(t,r)},r.p="",r(r.s=4)}([function(t,r,e){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.setMatrixArrayType=function(t){r.ARRAY_TYPE=t},r.toRadian=function(t){return t*a},r.equals=function(t,r){return Math.abs(t-r)<=n*Math.max(1,Math.abs(t),Math.abs(r))};var n=r.EPSILON=1e-6,a=(r.ARRAY_TYPE="undefined"!=typeof Float32Array?Float32Array:Array,r.RANDOM=Math.random,Math.PI/180)},function(t,r,e){"use strict";function n(t,r,e){var n=r[0],a=r[1],o=r[2],i=r[3],u=r[4],s=r[5],f=r[6],c=r[7],h=r[8],l=e[0],M=e[1],m=e[2],v=e[3],d=e[4],b=e[5],p=e[6],E=e[7],g=e[8];return t[0]=l*n+M*i+m*f,t[1]=l*a+M*u+m*c,t[2]=l*o+M*s+m*h,t[3]=v*n+d*i+b*f,t[4]=v*a+d*u+b*c,t[5]=v*o+d*s+b*h,t[6]=p*n+E*i+g*f,t[7]=p*a+E*u+g*c,t[8]=p*o+E*s+g*h,t}function a(t,r,e){return t[0]=r[0]-e[0],t[1]=r[1]-e[1],t[2]=r[2]-e[2],t[3]=r[3]-e[3],t[4]=r[4]-e[4],t[5]=r[5]-e[5],t[6]=r[6]-e[6],t[7]=r[7]-e[7],t[8]=r[8]-e[8],t}Object.defineProperty(r,"__esModule",{value:!0}),r.sub=r.mul=void 0,r.create=function(){var t=new o.ARRAY_TYPE(9);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},r.fromMat4=function(t,r){return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[4],t[4]=r[5],t[5]=r[6],t[6]=r[8],t[7]=r[9],t[8]=r[10],t},r.clone=function(t){var r=new o.ARRAY_TYPE(9);return r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r[4]=t[4],r[5]=t[5],r[6]=t[6],r[7]=t[7],r[8]=t[8],r},r.copy=function(t,r){return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t},r.fromValues=function(t,r,e,n,a,i,u,s,f){var c=new o.ARRAY_TYPE(9);return c[0]=t,c[1]=r,c[2]=e,c[3]=n,c[4]=a,c[5]=i,c[6]=u,c[7]=s,c[8]=f,c},r.set=function(t,r,e,n,a,o,i,u,s,f){return t[0]=r,t[1]=e,t[2]=n,t[3]=a,t[4]=o,t[5]=i,t[6]=u,t[7]=s,t[8]=f,t},r.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},r.transpose=function(t,r){if(t===r){var e=r[1],n=r[2],a=r[5];t[1]=r[3],t[2]=r[6],t[3]=e,t[5]=r[7],t[6]=n,t[7]=a}else t[0]=r[0],t[1]=r[3],t[2]=r[6],t[3]=r[1],t[4]=r[4],t[5]=r[7],t[6]=r[2],t[7]=r[5],t[8]=r[8];return t},r.invert=function(t,r){var e=r[0],n=r[1],a=r[2],o=r[3],i=r[4],u=r[5],s=r[6],f=r[7],c=r[8],h=c*i-u*f,l=-c*o+u*s,M=f*o-i*s,m=e*h+n*l+a*M;return m?(m=1/m,t[0]=h*m,t[1]=(-c*n+a*f)*m,t[2]=(u*n-a*i)*m,t[3]=l*m,t[4]=(c*e-a*s)*m,t[5]=(-u*e+a*o)*m,t[6]=M*m,t[7]=(-f*e+n*s)*m,t[8]=(i*e-n*o)*m,t):null},r.adjoint=function(t,r){var e=r[0],n=r[1],a=r[2],o=r[3],i=r[4],u=r[5],s=r[6],f=r[7],c=r[8];return t[0]=i*c-u*f,t[1]=a*f-n*c,t[2]=n*u-a*i,t[3]=u*s-o*c,t[4]=e*c-a*s,t[5]=a*o-e*u,t[6]=o*f-i*s,t[7]=n*s-e*f,t[8]=e*i-n*o,t},r.determinant=function(t){var r=t[0],e=t[1],n=t[2],a=t[3],o=t[4],i=t[5],u=t[6],s=t[7],f=t[8];return r*(f*o-i*s)+e*(-f*a+i*u)+n*(s*a-o*u)},r.multiply=n,r.translate=function(t,r,e){var n=r[0],a=r[1],o=r[2],i=r[3],u=r[4],s=r[5],f=r[6],c=r[7],h=r[8],l=e[0],M=e[1];return t[0]=n,t[1]=a,t[2]=o,t[3]=i,t[4]=u,t[5]=s,t[6]=l*n+M*i+f,t[7]=l*a+M*u+c,t[8]=l*o+M*s+h,t},r.rotate=function(t,r,e){var n=r[0],a=r[1],o=r[2],i=r[3],u=r[4],s=r[5],f=r[6],c=r[7],h=r[8],l=Math.sin(e),M=Math.cos(e);return t[0]=M*n+l*i,t[1]=M*a+l*u,t[2]=M*o+l*s,t[3]=M*i-l*n,t[4]=M*u-l*a,t[5]=M*s-l*o,t[6]=f,t[7]=c,t[8]=h,t},r.scale=function(t,r,e){var n=e[0],a=e[1];return t[0]=n*r[0],t[1]=n*r[1],t[2]=n*r[2],t[3]=a*r[3],t[4]=a*r[4],t[5]=a*r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t},r.fromTranslation=function(t,r){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=r[0],t[7]=r[1],t[8]=1,t},r.fromRotation=function(t,r){var e=Math.sin(r),n=Math.cos(r);return t[0]=n,t[1]=e,t[2]=0,t[3]=-e,t[4]=n,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},r.fromScaling=function(t,r){return t[0]=r[0],t[1]=0,t[2]=0,t[3]=0,t[4]=r[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},r.fromMat2d=function(t,r){return t[0]=r[0],t[1]=r[1],t[2]=0,t[3]=r[2],t[4]=r[3],t[5]=0,t[6]=r[4],t[7]=r[5],t[8]=1,t},r.fromQuat=function(t,r){var e=r[0],n=r[1],a=r[2],o=r[3],i=e+e,u=n+n,s=a+a,f=e*i,c=n*i,h=n*u,l=a*i,M=a*u,m=a*s,v=o*i,d=o*u,b=o*s;return t[0]=1-h-m,t[3]=c-b,t[6]=l+d,t[1]=c+b,t[4]=1-f-m,t[7]=M-v,t[2]=l-d,t[5]=M+v,t[8]=1-f-h,t},r.normalFromMat4=function(t,r){var e=r[0],n=r[1],a=r[2],o=r[3],i=r[4],u=r[5],s=r[6],f=r[7],c=r[8],h=r[9],l=r[10],M=r[11],m=r[12],v=r[13],d=r[14],b=r[15],p=e*u-n*i,E=e*s-a*i,g=e*f-o*i,A=n*s-a*u,x=n*f-o*u,B=a*f-o*s,P=c*v-h*m,w=c*d-l*m,L=c*b-M*m,R=h*d-l*v,_=h*b-M*v,T=l*b-M*d,I=p*T-E*_+g*R+A*L-x*w+B*P;return I?(I=1/I,t[0]=(u*T-s*_+f*R)*I,t[1]=(s*L-i*T-f*w)*I,t[2]=(i*_-u*L+f*P)*I,t[3]=(a*_-n*T-o*R)*I,t[4]=(e*T-a*L+o*w)*I,t[5]=(n*L-e*_-o*P)*I,t[6]=(v*B-d*x+b*A)*I,t[7]=(d*g-m*B-b*E)*I,t[8]=(m*x-v*g+b*p)*I,t):null},r.projection=function(t,r,e){return t[0]=2/r,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/e,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t},r.str=function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},r.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2))},r.add=function(t,r,e){return t[0]=r[0]+e[0],t[1]=r[1]+e[1],t[2]=r[2]+e[2],t[3]=r[3]+e[3],t[4]=r[4]+e[4],t[5]=r[5]+e[5],t[6]=r[6]+e[6],t[7]=r[7]+e[7],t[8]=r[8]+e[8],t},r.subtract=a,r.multiplyScalar=function(t,r,e){return t[0]=r[0]*e,t[1]=r[1]*e,t[2]=r[2]*e,t[3]=r[3]*e,t[4]=r[4]*e,t[5]=r[5]*e,t[6]=r[6]*e,t[7]=r[7]*e,t[8]=r[8]*e,t},r.multiplyScalarAndAdd=function(t,r,e,n){return t[0]=r[0]+e[0]*n,t[1]=r[1]+e[1]*n,t[2]=r[2]+e[2]*n,t[3]=r[3]+e[3]*n,t[4]=r[4]+e[4]*n,t[5]=r[5]+e[5]*n,t[6]=r[6]+e[6]*n,t[7]=r[7]+e[7]*n,t[8]=r[8]+e[8]*n,t},r.exactEquals=function(t,r){return t[0]===r[0]&&t[1]===r[1]&&t[2]===r[2]&&t[3]===r[3]&&t[4]===r[4]&&t[5]===r[5]&&t[6]===r[6]&&t[7]===r[7]&&t[8]===r[8]},r.equals=function(t,r){var e=t[0],n=t[1],a=t[2],i=t[3],u=t[4],s=t[5],f=t[6],c=t[7],h=t[8],l=r[0],M=r[1],m=r[2],v=r[3],d=r[4],b=r[5],p=r[6],E=r[7],g=r[8];return Math.abs(e-l)<=o.EPSILON*Math.max(1,Math.abs(e),Math.abs(l))&&Math.abs(n-M)<=o.EPSILON*Math.max(1,Math.abs(n),Math.abs(M))&&Math.abs(a-m)<=o.EPSILON*Math.max(1,Math.abs(a),Math.abs(m))&&Math.abs(i-v)<=o.EPSILON*Math.max(1,Math.abs(i),Math.abs(v))&&Math.abs(u-d)<=o.EPSILON*Math.max(1,Math.abs(u),Math.abs(d))&&Math.abs(s-b)<=o.EPSILON*Math.max(1,Math.abs(s),Math.abs(b))&&Math.abs(f-p)<=o.EPSILON*Math.max(1,Math.abs(f),Math.abs(p))&&Math.abs(c-E)<=o.EPSILON*Math.max(1,Math.abs(c),Math.abs(E))&&Math.abs(h-g)<=o.EPSILON*Math.max(1,Math.abs(h),Math.abs(g))};var o=function(t){if(t&&t.__esModule)return t;var r={};if(null!=t)for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(r[e]=t[e]);return r.default=t,r}(e(0));r.mul=n,r.sub=a},function(t,r,e){"use strict";function n(){var t=new m.ARRAY_TYPE(3);return t[0]=0,t[1]=0,t[2]=0,t}function a(t){var r=t[0],e=t[1],n=t[2];return Math.sqrt(r*r+e*e+n*n)}function o(t,r,e){var n=new m.ARRAY_TYPE(3);return n[0]=t,n[1]=r,n[2]=e,n}function i(t,r,e){return t[0]=r[0]-e[0],t[1]=r[1]-e[1],t[2]=r[2]-e[2],t}function u(t,r,e){return t[0]=r[0]*e[0],t[1]=r[1]*e[1],t[2]=r[2]*e[2],t}function s(t,r,e){return t[0]=r[0]/e[0],t[1]=r[1]/e[1],t[2]=r[2]/e[2],t}function f(t,r){var e=r[0]-t[0],n=r[1]-t[1],a=r[2]-t[2];return Math.sqrt(e*e+n*n+a*a)}function c(t,r){var e=r[0]-t[0],n=r[1]-t[1],a=r[2]-t[2];return e*e+n*n+a*a}function h(t){var r=t[0],e=t[1],n=t[2];return r*r+e*e+n*n}function l(t,r){var e=r[0],n=r[1],a=r[2],o=e*e+n*n+a*a;return o>0&&(o=1/Math.sqrt(o),t[0]=r[0]*o,t[1]=r[1]*o,t[2]=r[2]*o),t}function M(t,r){return t[0]*r[0]+t[1]*r[1]+t[2]*r[2]}Object.defineProperty(r,"__esModule",{value:!0}),r.forEach=r.sqrLen=r.len=r.sqrDist=r.dist=r.div=r.mul=r.sub=void 0,r.create=n,r.clone=function(t){var r=new m.ARRAY_TYPE(3);return r[0]=t[0],r[1]=t[1],r[2]=t[2],r},r.length=a,r.fromValues=o,r.copy=function(t,r){return t[0]=r[0],t[1]=r[1],t[2]=r[2],t},r.set=function(t,r,e,n){return t[0]=r,t[1]=e,t[2]=n,t},r.add=function(t,r,e){return t[0]=r[0]+e[0],t[1]=r[1]+e[1],t[2]=r[2]+e[2],t},r.subtract=i,r.multiply=u,r.divide=s,r.ceil=function(t,r){return t[0]=Math.ceil(r[0]),t[1]=Math.ceil(r[1]),t[2]=Math.ceil(r[2]),t},r.floor=function(t,r){return t[0]=Math.floor(r[0]),t[1]=Math.floor(r[1]),t[2]=Math.floor(r[2]),t},r.min=function(t,r,e){return t[0]=Math.min(r[0],e[0]),t[1]=Math.min(r[1],e[1]),t[2]=Math.min(r[2],e[2]),t},r.max=function(t,r,e){return t[0]=Math.max(r[0],e[0]),t[1]=Math.max(r[1],e[1]),t[2]=Math.max(r[2],e[2]),t},r.round=function(t,r){return t[0]=Math.round(r[0]),t[1]=Math.round(r[1]),t[2]=Math.round(r[2]),t},r.scale=function(t,r,e){return t[0]=r[0]*e,t[1]=r[1]*e,t[2]=r[2]*e,t},r.scaleAndAdd=function(t,r,e,n){return t[0]=r[0]+e[0]*n,t[1]=r[1]+e[1]*n,t[2]=r[2]+e[2]*n,t},r.distance=f,r.squaredDistance=c,r.squaredLength=h,r.negate=function(t,r){return t[0]=-r[0],t[1]=-r[1],t[2]=-r[2],t},r.inverse=function(t,r){return t[0]=1/r[0],t[1]=1/r[1],t[2]=1/r[2],t},r.normalize=l,r.dot=M,r.cross=function(t,r,e){var n=r[0],a=r[1],o=r[2],i=e[0],u=e[1],s=e[2];return t[0]=a*s-o*u,t[1]=o*i-n*s,t[2]=n*u-a*i,t},r.lerp=function(t,r,e,n){var a=r[0],o=r[1],i=r[2];return t[0]=a+n*(e[0]-a),t[1]=o+n*(e[1]-o),t[2]=i+n*(e[2]-i),t},r.hermite=function(t,r,e,n,a,o){var i=o*o,u=i*(2*o-3)+1,s=i*(o-2)+o,f=i*(o-1),c=i*(3-2*o);return t[0]=r[0]*u+e[0]*s+n[0]*f+a[0]*c,t[1]=r[1]*u+e[1]*s+n[1]*f+a[1]*c,t[2]=r[2]*u+e[2]*s+n[2]*f+a[2]*c,t},r.bezier=function(t,r,e,n,a,o){var i=1-o,u=i*i,s=o*o,f=u*i,c=3*o*u,h=3*s*i,l=s*o;return t[0]=r[0]*f+e[0]*c+n[0]*h+a[0]*l,t[1]=r[1]*f+e[1]*c+n[1]*h+a[1]*l,t[2]=r[2]*f+e[2]*c+n[2]*h+a[2]*l,t},r.random=function(t,r){r=r||1;var e=2*m.RANDOM()*Math.PI,n=2*m.RANDOM()-1,a=Math.sqrt(1-n*n)*r;return t[0]=Math.cos(e)*a,t[1]=Math.sin(e)*a,t[2]=n*r,t},r.transformMat4=function(t,r,e){var n=r[0],a=r[1],o=r[2],i=e[3]*n+e[7]*a+e[11]*o+e[15];return i=i||1,t[0]=(e[0]*n+e[4]*a+e[8]*o+e[12])/i,t[1]=(e[1]*n+e[5]*a+e[9]*o+e[13])/i,t[2]=(e[2]*n+e[6]*a+e[10]*o+e[14])/i,t},r.transformMat3=function(t,r,e){var n=r[0],a=r[1],o=r[2];return t[0]=n*e[0]+a*e[3]+o*e[6],t[1]=n*e[1]+a*e[4]+o*e[7],t[2]=n*e[2]+a*e[5]+o*e[8],t},r.transformQuat=function(t,r,e){var n=r[0],a=r[1],o=r[2],i=e[0],u=e[1],s=e[2],f=e[3],c=f*n+u*o-s*a,h=f*a+s*n-i*o,l=f*o+i*a-u*n,M=-i*n-u*a-s*o;return t[0]=c*f+M*-i+h*-s-l*-u,t[1]=h*f+M*-u+l*-i-c*-s,t[2]=l*f+M*-s+c*-u-h*-i,t},r.rotateX=function(t,r,e,n){var a=[],o=[];return a[0]=r[0]-e[0],a[1]=r[1]-e[1],a[2]=r[2]-e[2],o[0]=a[0],o[1]=a[1]*Math.cos(n)-a[2]*Math.sin(n),o[2]=a[1]*Math.sin(n)+a[2]*Math.cos(n),t[0]=o[0]+e[0],t[1]=o[1]+e[1],t[2]=o[2]+e[2],t},r.rotateY=function(t,r,e,n){var a=[],o=[];return a[0]=r[0]-e[0],a[1]=r[1]-e[1],a[2]=r[2]-e[2],o[0]=a[2]*Math.sin(n)+a[0]*Math.cos(n),o[1]=a[1],o[2]=a[2]*Math.cos(n)-a[0]*Math.sin(n),t[0]=o[0]+e[0],t[1]=o[1]+e[1],t[2]=o[2]+e[2],t},r.rotateZ=function(t,r,e,n){var a=[],o=[];return a[0]=r[0]-e[0],a[1]=r[1]-e[1],a[2]=r[2]-e[2],o[0]=a[0]*Math.cos(n)-a[1]*Math.sin(n),o[1]=a[0]*Math.sin(n)+a[1]*Math.cos(n),o[2]=a[2],t[0]=o[0]+e[0],t[1]=o[1]+e[1],t[2]=o[2]+e[2],t},r.angle=function(t,r){var e=o(t[0],t[1],t[2]),n=o(r[0],r[1],r[2]);l(e,e),l(n,n);var a=M(e,n);return a>1?0:a<-1?Math.PI:Math.acos(a)},r.str=function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},r.exactEquals=function(t,r){return t[0]===r[0]&&t[1]===r[1]&&t[2]===r[2]},r.equals=function(t,r){var e=t[0],n=t[1],a=t[2],o=r[0],i=r[1],u=r[2];return Math.abs(e-o)<=m.EPSILON*Math.max(1,Math.abs(e),Math.abs(o))&&Math.abs(n-i)<=m.EPSILON*Math.max(1,Math.abs(n),Math.abs(i))&&Math.abs(a-u)<=m.EPSILON*Math.max(1,Math.abs(a),Math.abs(u))};var m=function(t){if(t&&t.__esModule)return t;var r={};if(null!=t)for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(r[e]=t[e]);return r.default=t,r}(e(0));r.sub=i,r.mul=u,r.div=s,r.dist=f,r.sqrDist=c,r.len=a,r.sqrLen=h,r.forEach=function(){var t=n();return function(r,e,n,a,o,i){var u,s=void 0;for(e||(e=3),n||(n=0),u=a?Math.min(a*e+n,r.length):r.length,s=n;s<u;s+=e)t[0]=r[s],t[1]=r[s+1],t[2]=r[s+2],o(t,t,i),r[s]=t[0],r[s+1]=t[1],r[s+2]=t[2];return r}}()},function(t,r,e){"use strict";function n(){var t=new M.ARRAY_TYPE(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t}function a(t,r,e){return t[0]=r[0]-e[0],t[1]=r[1]-e[1],t[2]=r[2]-e[2],t[3]=r[3]-e[3],t}function o(t,r,e){return t[0]=r[0]*e[0],t[1]=r[1]*e[1],t[2]=r[2]*e[2],t[3]=r[3]*e[3],t}function i(t,r,e){return t[0]=r[0]/e[0],t[1]=r[1]/e[1],t[2]=r[2]/e[2],t[3]=r[3]/e[3],t}function u(t,r,e){return t[0]=r[0]*e,t[1]=r[1]*e,t[2]=r[2]*e,t[3]=r[3]*e,t}function s(t,r){var e=r[0]-t[0],n=r[1]-t[1],a=r[2]-t[2],o=r[3]-t[3];return Math.sqrt(e*e+n*n+a*a+o*o)}function f(t,r){var e=r[0]-t[0],n=r[1]-t[1],a=r[2]-t[2],o=r[3]-t[3];return e*e+n*n+a*a+o*o}function c(t){var r=t[0],e=t[1],n=t[2],a=t[3];return Math.sqrt(r*r+e*e+n*n+a*a)}function h(t){var r=t[0],e=t[1],n=t[2],a=t[3];return r*r+e*e+n*n+a*a}function l(t,r){var e=r[0],n=r[1],a=r[2],o=r[3],i=e*e+n*n+a*a+o*o;return i>0&&(i=1/Math.sqrt(i),t[0]=e*i,t[1]=n*i,t[2]=a*i,t[3]=o*i),t}Object.defineProperty(r,"__esModule",{value:!0}),r.forEach=r.sqrLen=r.len=r.sqrDist=r.dist=r.div=r.mul=r.sub=void 0,r.create=n,r.clone=function(t){var r=new M.ARRAY_TYPE(4);return r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r},r.fromValues=function(t,r,e,n){var a=new M.ARRAY_TYPE(4);return a[0]=t,a[1]=r,a[2]=e,a[3]=n,a},r.copy=function(t,r){return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t},r.set=function(t,r,e,n,a){return t[0]=r,t[1]=e,t[2]=n,t[3]=a,t},r.add=function(t,r,e){return t[0]=r[0]+e[0],t[1]=r[1]+e[1],t[2]=r[2]+e[2],t[3]=r[3]+e[3],t},r.subtract=a,r.multiply=o,r.divide=i,r.ceil=function(t,r){return t[0]=Math.ceil(r[0]),t[1]=Math.ceil(r[1]),t[2]=Math.ceil(r[2]),t[3]=Math.ceil(r[3]),t},r.floor=function(t,r){return t[0]=Math.floor(r[0]),t[1]=Math.floor(r[1]),t[2]=Math.floor(r[2]),t[3]=Math.floor(r[3]),t},r.min=function(t,r,e){return t[0]=Math.min(r[0],e[0]),t[1]=Math.min(r[1],e[1]),t[2]=Math.min(r[2],e[2]),t[3]=Math.min(r[3],e[3]),t},r.max=function(t,r,e){return t[0]=Math.max(r[0],e[0]),t[1]=Math.max(r[1],e[1]),t[2]=Math.max(r[2],e[2]),t[3]=Math.max(r[3],e[3]),t},r.round=function(t,r){return t[0]=Math.round(r[0]),t[1]=Math.round(r[1]),t[2]=Math.round(r[2]),t[3]=Math.round(r[3]),t},r.scale=u,r.scaleAndAdd=function(t,r,e,n){return t[0]=r[0]+e[0]*n,t[1]=r[1]+e[1]*n,t[2]=r[2]+e[2]*n,t[3]=r[3]+e[3]*n,t},r.distance=s,r.squaredDistance=f,r.length=c,r.squaredLength=h,r.negate=function(t,r){return t[0]=-r[0],t[1]=-r[1],t[2]=-r[2],t[3]=-r[3],t},r.inverse=function(t,r){return t[0]=1/r[0],t[1]=1/r[1],t[2]=1/r[2],t[3]=1/r[3],t},r.normalize=l,r.dot=function(t,r){return t[0]*r[0]+t[1]*r[1]+t[2]*r[2]+t[3]*r[3]},r.lerp=function(t,r,e,n){var a=r[0],o=r[1],i=r[2],u=r[3];return t[0]=a+n*(e[0]-a),t[1]=o+n*(e[1]-o),t[2]=i+n*(e[2]-i),t[3]=u+n*(e[3]-u),t},r.random=function(t,r){return r=r||1,t[0]=M.RANDOM(),t[1]=M.RANDOM(),t[2]=M.RANDOM(),t[3]=M.RANDOM(),l(t,t),u(t,t,r),t},r.transformMat4=function(t,r,e){var n=r[0],a=r[1],o=r[2],i=r[3];return t[0]=e[0]*n+e[4]*a+e[8]*o+e[12]*i,t[1]=e[1]*n+e[5]*a+e[9]*o+e[13]*i,t[2]=e[2]*n+e[6]*a+e[10]*o+e[14]*i,t[3]=e[3]*n+e[7]*a+e[11]*o+e[15]*i,t},r.transformQuat=function(t,r,e){var n=r[0],a=r[1],o=r[2],i=e[0],u=e[1],s=e[2],f=e[3],c=f*n+u*o-s*a,h=f*a+s*n-i*o,l=f*o+i*a-u*n,M=-i*n-u*a-s*o;return t[0]=c*f+M*-i+h*-s-l*-u,t[1]=h*f+M*-u+l*-i-c*-s,t[2]=l*f+M*-s+c*-u-h*-i,t[3]=r[3],t},r.str=function(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},r.exactEquals=function(t,r){return t[0]===r[0]&&t[1]===r[1]&&t[2]===r[2]&&t[3]===r[3]},r.equals=function(t,r){var e=t[0],n=t[1],a=t[2],o=t[3],i=r[0],u=r[1],s=r[2],f=r[3];return Math.abs(e-i)<=M.EPSILON*Math.max(1,Math.abs(e),Math.abs(i))&&Math.abs(n-u)<=M.EPSILON*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(a-s)<=M.EPSILON*Math.max(1,Math.abs(a),Math.abs(s))&&Math.abs(o-f)<=M.EPSILON*Math.max(1,Math.abs(o),Math.abs(f))};var M=function(t){if(t&&t.__esModule)return t;var r={};if(null!=t)for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(r[e]=t[e]);return r.default=t,r}(e(0));r.sub=a,r.mul=o,r.div=i,r.dist=s,r.sqrDist=f,r.len=c,r.sqrLen=h,r.forEach=function(){var t=n();return function(r,e,n,a,o,i){var u,s=void 0;for(e||(e=4),n||(n=0),u=a?Math.min(a*e+n,r.length):r.length,s=n;s<u;s+=e)t[0]=r[s],t[1]=r[s+1],t[2]=r[s+2],t[3]=r[s+3],o(t,t,i),r[s]=t[0],r[s+1]=t[1],r[s+2]=t[2],r[s+3]=t[3];return r}}()},function(t,r,e){"use strict";function n(t){if(t&&t.__esModule)return t;var r={};if(null!=t)for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(r[e]=t[e]);return r.default=t,r}Object.defineProperty(r,"__esModule",{value:!0}),r.vec4=r.vec3=r.vec2=r.quat=r.mat4=r.mat3=r.mat2d=r.mat2=r.glMatrix=void 0;var a=n(e(0)),o=n(e(5)),i=n(e(6)),u=n(e(1)),s=n(e(7)),f=n(e(8)),c=n(e(9)),h=n(e(2)),l=n(e(3));r.glMatrix=a,r.mat2=o,r.mat2d=i,r.mat3=u,r.mat4=s,r.quat=f,r.vec2=c,r.vec3=h,r.vec4=l},function(t,r,e){"use strict";function n(t,r,e){var n=r[0],a=r[1],o=r[2],i=r[3],u=e[0],s=e[1],f=e[2],c=e[3];return t[0]=n*u+o*s,t[1]=a*u+i*s,t[2]=n*f+o*c,t[3]=a*f+i*c,t}function a(t,r,e){return t[0]=r[0]-e[0],t[1]=r[1]-e[1],t[2]=r[2]-e[2],t[3]=r[3]-e[3],t}Object.defineProperty(r,"__esModule",{value:!0}),r.sub=r.mul=void 0,r.create=function(){var t=new o.ARRAY_TYPE(4);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},r.clone=function(t){var r=new o.ARRAY_TYPE(4);return r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r},r.copy=function(t,r){return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t},r.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},r.fromValues=function(t,r,e,n){var a=new o.ARRAY_TYPE(4);return a[0]=t,a[1]=r,a[2]=e,a[3]=n,a},r.set=function(t,r,e,n,a){return t[0]=r,t[1]=e,t[2]=n,t[3]=a,t},r.transpose=function(t,r){if(t===r){var e=r[1];t[1]=r[2],t[2]=e}else t[0]=r[0],t[1]=r[2],t[2]=r[1],t[3]=r[3];return t},r.invert=function(t,r){var e=r[0],n=r[1],a=r[2],o=r[3],i=e*o-a*n;return i?(i=1/i,t[0]=o*i,t[1]=-n*i,t[2]=-a*i,t[3]=e*i,t):null},r.adjoint=function(t,r){var e=r[0];return t[0]=r[3],t[1]=-r[1],t[2]=-r[2],t[3]=e,t},r.determinant=function(t){return t[0]*t[3]-t[2]*t[1]},r.multiply=n,r.rotate=function(t,r,e){var n=r[0],a=r[1],o=r[2],i=r[3],u=Math.sin(e),s=Math.cos(e);return t[0]=n*s+o*u,t[1]=a*s+i*u,t[2]=n*-u+o*s,t[3]=a*-u+i*s,t},r.scale=function(t,r,e){var n=r[0],a=r[1],o=r[2],i=r[3],u=e[0],s=e[1];return t[0]=n*u,t[1]=a*u,t[2]=o*s,t[3]=i*s,t},r.fromRotation=function(t,r){var e=Math.sin(r),n=Math.cos(r);return t[0]=n,t[1]=e,t[2]=-e,t[3]=n,t},r.fromScaling=function(t,r){return t[0]=r[0],t[1]=0,t[2]=0,t[3]=r[1],t},r.str=function(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},r.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2))},r.LDU=function(t,r,e,n){return t[2]=n[2]/n[0],e[0]=n[0],e[1]=n[1],e[3]=n[3]-t[2]*e[1],[t,r,e]},r.add=function(t,r,e){return t[0]=r[0]+e[0],t[1]=r[1]+e[1],t[2]=r[2]+e[2],t[3]=r[3]+e[3],t},r.subtract=a,r.exactEquals=function(t,r){return t[0]===r[0]&&t[1]===r[1]&&t[2]===r[2]&&t[3]===r[3]},r.equals=function(t,r){var e=t[0],n=t[1],a=t[2],i=t[3],u=r[0],s=r[1],f=r[2],c=r[3];return Math.abs(e-u)<=o.EPSILON*Math.max(1,Math.abs(e),Math.abs(u))&&Math.abs(n-s)<=o.EPSILON*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(a-f)<=o.EPSILON*Math.max(1,Math.abs(a),Math.abs(f))&&Math.abs(i-c)<=o.EPSILON*Math.max(1,Math.abs(i),Math.abs(c))},r.multiplyScalar=function(t,r,e){return t[0]=r[0]*e,t[1]=r[1]*e,t[2]=r[2]*e,t[3]=r[3]*e,t},r.multiplyScalarAndAdd=function(t,r,e,n){return t[0]=r[0]+e[0]*n,t[1]=r[1]+e[1]*n,t[2]=r[2]+e[2]*n,t[3]=r[3]+e[3]*n,t};var o=function(t){if(t&&t.__esModule)return t;var r={};if(null!=t)for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(r[e]=t[e]);return r.default=t,r}(e(0));r.mul=n,r.sub=a},function(t,r,e){"use strict";function n(t,r,e){var n=r[0],a=r[1],o=r[2],i=r[3],u=r[4],s=r[5],f=e[0],c=e[1],h=e[2],l=e[3],M=e[4],m=e[5];return t[0]=n*f+o*c,t[1]=a*f+i*c,t[2]=n*h+o*l,t[3]=a*h+i*l,t[4]=n*M+o*m+u,t[5]=a*M+i*m+s,t}function a(t,r,e){return t[0]=r[0]-e[0],t[1]=r[1]-e[1],t[2]=r[2]-e[2],t[3]=r[3]-e[3],t[4]=r[4]-e[4],t[5]=r[5]-e[5],t}Object.defineProperty(r,"__esModule",{value:!0}),r.sub=r.mul=void 0,r.create=function(){var t=new o.ARRAY_TYPE(6);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},r.clone=function(t){var r=new o.ARRAY_TYPE(6);return r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r[4]=t[4],r[5]=t[5],r},r.copy=function(t,r){return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t},r.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},r.fromValues=function(t,r,e,n,a,i){var u=new o.ARRAY_TYPE(6);return u[0]=t,u[1]=r,u[2]=e,u[3]=n,u[4]=a,u[5]=i,u},r.set=function(t,r,e,n,a,o,i){return t[0]=r,t[1]=e,t[2]=n,t[3]=a,t[4]=o,t[5]=i,t},r.invert=function(t,r){var e=r[0],n=r[1],a=r[2],o=r[3],i=r[4],u=r[5],s=e*o-n*a;return s?(s=1/s,t[0]=o*s,t[1]=-n*s,t[2]=-a*s,t[3]=e*s,t[4]=(a*u-o*i)*s,t[5]=(n*i-e*u)*s,t):null},r.determinant=function(t){return t[0]*t[3]-t[1]*t[2]},r.multiply=n,r.rotate=function(t,r,e){var n=r[0],a=r[1],o=r[2],i=r[3],u=r[4],s=r[5],f=Math.sin(e),c=Math.cos(e);return t[0]=n*c+o*f,t[1]=a*c+i*f,t[2]=n*-f+o*c,t[3]=a*-f+i*c,t[4]=u,t[5]=s,t},r.scale=function(t,r,e){var n=r[0],a=r[1],o=r[2],i=r[3],u=r[4],s=r[5],f=e[0],c=e[1];return t[0]=n*f,t[1]=a*f,t[2]=o*c,t[3]=i*c,t[4]=u,t[5]=s,t},r.translate=function(t,r,e){var n=r[0],a=r[1],o=r[2],i=r[3],u=r[4],s=r[5],f=e[0],c=e[1];return t[0]=n,t[1]=a,t[2]=o,t[3]=i,t[4]=n*f+o*c+u,t[5]=a*f+i*c+s,t},r.fromRotation=function(t,r){var e=Math.sin(r),n=Math.cos(r);return t[0]=n,t[1]=e,t[2]=-e,t[3]=n,t[4]=0,t[5]=0,t},r.fromScaling=function(t,r){return t[0]=r[0],t[1]=0,t[2]=0,t[3]=r[1],t[4]=0,t[5]=0,t},r.fromTranslation=function(t,r){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=r[0],t[5]=r[1],t},r.str=function(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"},r.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+1)},r.add=function(t,r,e){return t[0]=r[0]+e[0],t[1]=r[1]+e[1],t[2]=r[2]+e[2],t[3]=r[3]+e[3],t[4]=r[4]+e[4],t[5]=r[5]+e[5],t},r.subtract=a,r.multiplyScalar=function(t,r,e){return t[0]=r[0]*e,t[1]=r[1]*e,t[2]=r[2]*e,t[3]=r[3]*e,t[4]=r[4]*e,t[5]=r[5]*e,t},r.multiplyScalarAndAdd=function(t,r,e,n){return t[0]=r[0]+e[0]*n,t[1]=r[1]+e[1]*n,t[2]=r[2]+e[2]*n,t[3]=r[3]+e[3]*n,t[4]=r[4]+e[4]*n,t[5]=r[5]+e[5]*n,t},r.exactEquals=function(t,r){return t[0]===r[0]&&t[1]===r[1]&&t[2]===r[2]&&t[3]===r[3]&&t[4]===r[4]&&t[5]===r[5]},r.equals=function(t,r){var e=t[0],n=t[1],a=t[2],i=t[3],u=t[4],s=t[5],f=r[0],c=r[1],h=r[2],l=r[3],M=r[4],m=r[5];return Math.abs(e-f)<=o.EPSILON*Math.max(1,Math.abs(e),Math.abs(f))&&Math.abs(n-c)<=o.EPSILON*Math.max(1,Math.abs(n),Math.abs(c))&&Math.abs(a-h)<=o.EPSILON*Math.max(1,Math.abs(a),Math.abs(h))&&Math.abs(i-l)<=o.EPSILON*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(u-M)<=o.EPSILON*Math.max(1,Math.abs(u),Math.abs(M))&&Math.abs(s-m)<=o.EPSILON*Math.max(1,Math.abs(s),Math.abs(m))};var o=function(t){if(t&&t.__esModule)return t;var r={};if(null!=t)for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(r[e]=t[e]);return r.default=t,r}(e(0));r.mul=n,r.sub=a},function(t,r,e){"use strict";function n(t,r,e){var n=r[0],a=r[1],o=r[2],i=r[3],u=r[4],s=r[5],f=r[6],c=r[7],h=r[8],l=r[9],M=r[10],m=r[11],v=r[12],d=r[13],b=r[14],p=r[15],E=e[0],g=e[1],A=e[2],x=e[3];return t[0]=E*n+g*u+A*h+x*v,t[1]=E*a+g*s+A*l+x*d,t[2]=E*o+g*f+A*M+x*b,t[3]=E*i+g*c+A*m+x*p,E=e[4],g=e[5],A=e[6],x=e[7],t[4]=E*n+g*u+A*h+x*v,t[5]=E*a+g*s+A*l+x*d,t[6]=E*o+g*f+A*M+x*b,t[7]=E*i+g*c+A*m+x*p,E=e[8],g=e[9],A=e[10],x=e[11],t[8]=E*n+g*u+A*h+x*v,t[9]=E*a+g*s+A*l+x*d,t[10]=E*o+g*f+A*M+x*b,t[11]=E*i+g*c+A*m+x*p,E=e[12],g=e[13],A=e[14],x=e[15],t[12]=E*n+g*u+A*h+x*v,t[13]=E*a+g*s+A*l+x*d,t[14]=E*o+g*f+A*M+x*b,t[15]=E*i+g*c+A*m+x*p,t}function a(t,r,e){return t[0]=r[0]-e[0],t[1]=r[1]-e[1],t[2]=r[2]-e[2],t[3]=r[3]-e[3],t[4]=r[4]-e[4],t[5]=r[5]-e[5],t[6]=r[6]-e[6],t[7]=r[7]-e[7],t[8]=r[8]-e[8],t[9]=r[9]-e[9],t[10]=r[10]-e[10],t[11]=r[11]-e[11],t[12]=r[12]-e[12],t[13]=r[13]-e[13],t[14]=r[14]-e[14],t[15]=r[15]-e[15],t}Object.defineProperty(r,"__esModule",{value:!0}),r.sub=r.mul=void 0,r.create=function(){var t=new o.ARRAY_TYPE(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},r.clone=function(t){var r=new o.ARRAY_TYPE(16);return r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r[4]=t[4],r[5]=t[5],r[6]=t[6],r[7]=t[7],r[8]=t[8],r[9]=t[9],r[10]=t[10],r[11]=t[11],r[12]=t[12],r[13]=t[13],r[14]=t[14],r[15]=t[15],r},r.copy=function(t,r){return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15],t},r.fromValues=function(t,r,e,n,a,i,u,s,f,c,h,l,M,m,v,d){var b=new o.ARRAY_TYPE(16);return b[0]=t,b[1]=r,b[2]=e,b[3]=n,b[4]=a,b[5]=i,b[6]=u,b[7]=s,b[8]=f,b[9]=c,b[10]=h,b[11]=l,b[12]=M,b[13]=m,b[14]=v,b[15]=d,b},r.set=function(t,r,e,n,a,o,i,u,s,f,c,h,l,M,m,v,d){return t[0]=r,t[1]=e,t[2]=n,t[3]=a,t[4]=o,t[5]=i,t[6]=u,t[7]=s,t[8]=f,t[9]=c,t[10]=h,t[11]=l,t[12]=M,t[13]=m,t[14]=v,t[15]=d,t},r.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},r.transpose=function(t,r){if(t===r){var e=r[1],n=r[2],a=r[3],o=r[6],i=r[7],u=r[11];t[1]=r[4],t[2]=r[8],t[3]=r[12],t[4]=e,t[6]=r[9],t[7]=r[13],t[8]=n,t[9]=o,t[11]=r[14],t[12]=a,t[13]=i,t[14]=u}else t[0]=r[0],t[1]=r[4],t[2]=r[8],t[3]=r[12],t[4]=r[1],t[5]=r[5],t[6]=r[9],t[7]=r[13],t[8]=r[2],t[9]=r[6],t[10]=r[10],t[11]=r[14],t[12]=r[3],t[13]=r[7],t[14]=r[11],t[15]=r[15];return t},r.invert=function(t,r){var e=r[0],n=r[1],a=r[2],o=r[3],i=r[4],u=r[5],s=r[6],f=r[7],c=r[8],h=r[9],l=r[10],M=r[11],m=r[12],v=r[13],d=r[14],b=r[15],p=e*u-n*i,E=e*s-a*i,g=e*f-o*i,A=n*s-a*u,x=n*f-o*u,B=a*f-o*s,P=c*v-h*m,w=c*d-l*m,L=c*b-M*m,R=h*d-l*v,_=h*b-M*v,T=l*b-M*d,I=p*T-E*_+g*R+A*L-x*w+B*P;return I?(I=1/I,t[0]=(u*T-s*_+f*R)*I,t[1]=(a*_-n*T-o*R)*I,t[2]=(v*B-d*x+b*A)*I,t[3]=(l*x-h*B-M*A)*I,t[4]=(s*L-i*T-f*w)*I,t[5]=(e*T-a*L+o*w)*I,t[6]=(d*g-m*B-b*E)*I,t[7]=(c*B-l*g+M*E)*I,t[8]=(i*_-u*L+f*P)*I,t[9]=(n*L-e*_-o*P)*I,t[10]=(m*x-v*g+b*p)*I,t[11]=(h*g-c*x-M*p)*I,t[12]=(u*w-i*R-s*P)*I,t[13]=(e*R-n*w+a*P)*I,t[14]=(v*E-m*A-d*p)*I,t[15]=(c*A-h*E+l*p)*I,t):null},r.adjoint=function(t,r){var e=r[0],n=r[1],a=r[2],o=r[3],i=r[4],u=r[5],s=r[6],f=r[7],c=r[8],h=r[9],l=r[10],M=r[11],m=r[12],v=r[13],d=r[14],b=r[15];return t[0]=u*(l*b-M*d)-h*(s*b-f*d)+v*(s*M-f*l),t[1]=-(n*(l*b-M*d)-h*(a*b-o*d)+v*(a*M-o*l)),t[2]=n*(s*b-f*d)-u*(a*b-o*d)+v*(a*f-o*s),t[3]=-(n*(s*M-f*l)-u*(a*M-o*l)+h*(a*f-o*s)),t[4]=-(i*(l*b-M*d)-c*(s*b-f*d)+m*(s*M-f*l)),t[5]=e*(l*b-M*d)-c*(a*b-o*d)+m*(a*M-o*l),t[6]=-(e*(s*b-f*d)-i*(a*b-o*d)+m*(a*f-o*s)),t[7]=e*(s*M-f*l)-i*(a*M-o*l)+c*(a*f-o*s),t[8]=i*(h*b-M*v)-c*(u*b-f*v)+m*(u*M-f*h),t[9]=-(e*(h*b-M*v)-c*(n*b-o*v)+m*(n*M-o*h)),t[10]=e*(u*b-f*v)-i*(n*b-o*v)+m*(n*f-o*u),t[11]=-(e*(u*M-f*h)-i*(n*M-o*h)+c*(n*f-o*u)),t[12]=-(i*(h*d-l*v)-c*(u*d-s*v)+m*(u*l-s*h)),t[13]=e*(h*d-l*v)-c*(n*d-a*v)+m*(n*l-a*h),t[14]=-(e*(u*d-s*v)-i*(n*d-a*v)+m*(n*s-a*u)),t[15]=e*(u*l-s*h)-i*(n*l-a*h)+c*(n*s-a*u),t},r.determinant=function(t){var r=t[0],e=t[1],n=t[2],a=t[3],o=t[4],i=t[5],u=t[6],s=t[7],f=t[8],c=t[9],h=t[10],l=t[11],M=t[12],m=t[13],v=t[14],d=t[15];return(r*i-e*o)*(h*d-l*v)-(r*u-n*o)*(c*d-l*m)+(r*s-a*o)*(c*v-h*m)+(e*u-n*i)*(f*d-l*M)-(e*s-a*i)*(f*v-h*M)+(n*s-a*u)*(f*m-c*M)},r.multiply=n,r.translate=function(t,r,e){var n=e[0],a=e[1],o=e[2],i=void 0,u=void 0,s=void 0,f=void 0,c=void 0,h=void 0,l=void 0,M=void 0,m=void 0,v=void 0,d=void 0,b=void 0;return r===t?(t[12]=r[0]*n+r[4]*a+r[8]*o+r[12],t[13]=r[1]*n+r[5]*a+r[9]*o+r[13],t[14]=r[2]*n+r[6]*a+r[10]*o+r[14],t[15]=r[3]*n+r[7]*a+r[11]*o+r[15]):(i=r[0],u=r[1],s=r[2],f=r[3],c=r[4],h=r[5],l=r[6],M=r[7],m=r[8],v=r[9],d=r[10],b=r[11],t[0]=i,t[1]=u,t[2]=s,t[3]=f,t[4]=c,t[5]=h,t[6]=l,t[7]=M,t[8]=m,t[9]=v,t[10]=d,t[11]=b,t[12]=i*n+c*a+m*o+r[12],t[13]=u*n+h*a+v*o+r[13],t[14]=s*n+l*a+d*o+r[14],t[15]=f*n+M*a+b*o+r[15]),t},r.scale=function(t,r,e){var n=e[0],a=e[1],o=e[2];return t[0]=r[0]*n,t[1]=r[1]*n,t[2]=r[2]*n,t[3]=r[3]*n,t[4]=r[4]*a,t[5]=r[5]*a,t[6]=r[6]*a,t[7]=r[7]*a,t[8]=r[8]*o,t[9]=r[9]*o,t[10]=r[10]*o,t[11]=r[11]*o,t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15],t},r.rotate=function(t,r,e,n){var a=n[0],i=n[1],u=n[2],s=Math.sqrt(a*a+i*i+u*u),f=void 0,c=void 0,h=void 0,l=void 0,M=void 0,m=void 0,v=void 0,d=void 0,b=void 0,p=void 0,E=void 0,g=void 0,A=void 0,x=void 0,B=void 0,P=void 0,w=void 0,L=void 0,R=void 0,_=void 0,T=void 0,I=void 0,S=void 0,y=void 0;return Math.abs(s)<o.EPSILON?null:(a*=s=1/s,i*=s,u*=s,f=Math.sin(e),h=1-(c=Math.cos(e)),l=r[0],M=r[1],m=r[2],v=r[3],d=r[4],b=r[5],p=r[6],E=r[7],g=r[8],A=r[9],x=r[10],B=r[11],P=a*a*h+c,w=i*a*h+u*f,L=u*a*h-i*f,R=a*i*h-u*f,_=i*i*h+c,T=u*i*h+a*f,I=a*u*h+i*f,S=i*u*h-a*f,y=u*u*h+c,t[0]=l*P+d*w+g*L,t[1]=M*P+b*w+A*L,t[2]=m*P+p*w+x*L,t[3]=v*P+E*w+B*L,t[4]=l*R+d*_+g*T,t[5]=M*R+b*_+A*T,t[6]=m*R+p*_+x*T,t[7]=v*R+E*_+B*T,t[8]=l*I+d*S+g*y,t[9]=M*I+b*S+A*y,t[10]=m*I+p*S+x*y,t[11]=v*I+E*S+B*y,r!==t&&(t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15]),t)},r.rotateX=function(t,r,e){var n=Math.sin(e),a=Math.cos(e),o=r[4],i=r[5],u=r[6],s=r[7],f=r[8],c=r[9],h=r[10],l=r[11];return r!==t&&(t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15]),t[4]=o*a+f*n,t[5]=i*a+c*n,t[6]=u*a+h*n,t[7]=s*a+l*n,t[8]=f*a-o*n,t[9]=c*a-i*n,t[10]=h*a-u*n,t[11]=l*a-s*n,t},r.rotateY=function(t,r,e){var n=Math.sin(e),a=Math.cos(e),o=r[0],i=r[1],u=r[2],s=r[3],f=r[8],c=r[9],h=r[10],l=r[11];return r!==t&&(t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15]),t[0]=o*a-f*n,t[1]=i*a-c*n,t[2]=u*a-h*n,t[3]=s*a-l*n,t[8]=o*n+f*a,t[9]=i*n+c*a,t[10]=u*n+h*a,t[11]=s*n+l*a,t},r.rotateZ=function(t,r,e){var n=Math.sin(e),a=Math.cos(e),o=r[0],i=r[1],u=r[2],s=r[3],f=r[4],c=r[5],h=r[6],l=r[7];return r!==t&&(t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15]),t[0]=o*a+f*n,t[1]=i*a+c*n,t[2]=u*a+h*n,t[3]=s*a+l*n,t[4]=f*a-o*n,t[5]=c*a-i*n,t[6]=h*a-u*n,t[7]=l*a-s*n,t},r.fromTranslation=function(t,r){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t},r.fromScaling=function(t,r){return t[0]=r[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=r[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},r.fromRotation=function(t,r,e){var n=e[0],a=e[1],i=e[2],u=Math.sqrt(n*n+a*a+i*i),s=void 0,f=void 0,c=void 0;return Math.abs(u)<o.EPSILON?null:(n*=u=1/u,a*=u,i*=u,s=Math.sin(r),c=1-(f=Math.cos(r)),t[0]=n*n*c+f,t[1]=a*n*c+i*s,t[2]=i*n*c-a*s,t[3]=0,t[4]=n*a*c-i*s,t[5]=a*a*c+f,t[6]=i*a*c+n*s,t[7]=0,t[8]=n*i*c+a*s,t[9]=a*i*c-n*s,t[10]=i*i*c+f,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)},r.fromXRotation=function(t,r){var e=Math.sin(r),n=Math.cos(r);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n,t[6]=e,t[7]=0,t[8]=0,t[9]=-e,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},r.fromYRotation=function(t,r){var e=Math.sin(r),n=Math.cos(r);return t[0]=n,t[1]=0,t[2]=-e,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=e,t[9]=0,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},r.fromZRotation=function(t,r){var e=Math.sin(r),n=Math.cos(r);return t[0]=n,t[1]=e,t[2]=0,t[3]=0,t[4]=-e,t[5]=n,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},r.fromRotationTranslation=function(t,r,e){var n=r[0],a=r[1],o=r[2],i=r[3],u=n+n,s=a+a,f=o+o,c=n*u,h=n*s,l=n*f,M=a*s,m=a*f,v=o*f,d=i*u,b=i*s,p=i*f;return t[0]=1-(M+v),t[1]=h+p,t[2]=l-b,t[3]=0,t[4]=h-p,t[5]=1-(c+v),t[6]=m+d,t[7]=0,t[8]=l+b,t[9]=m-d,t[10]=1-(c+M),t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t},r.getTranslation=function(t,r){return t[0]=r[12],t[1]=r[13],t[2]=r[14],t},r.getScaling=function(t,r){var e=r[0],n=r[1],a=r[2],o=r[4],i=r[5],u=r[6],s=r[8],f=r[9],c=r[10];return t[0]=Math.sqrt(e*e+n*n+a*a),t[1]=Math.sqrt(o*o+i*i+u*u),t[2]=Math.sqrt(s*s+f*f+c*c),t},r.getRotation=function(t,r){var e=r[0]+r[5]+r[10],n=0;return e>0?(n=2*Math.sqrt(e+1),t[3]=.25*n,t[0]=(r[6]-r[9])/n,t[1]=(r[8]-r[2])/n,t[2]=(r[1]-r[4])/n):r[0]>r[5]&r[0]>r[10]?(n=2*Math.sqrt(1+r[0]-r[5]-r[10]),t[3]=(r[6]-r[9])/n,t[0]=.25*n,t[1]=(r[1]+r[4])/n,t[2]=(r[8]+r[2])/n):r[5]>r[10]?(n=2*Math.sqrt(1+r[5]-r[0]-r[10]),t[3]=(r[8]-r[2])/n,t[0]=(r[1]+r[4])/n,t[1]=.25*n,t[2]=(r[6]+r[9])/n):(n=2*Math.sqrt(1+r[10]-r[0]-r[5]),t[3]=(r[1]-r[4])/n,t[0]=(r[8]+r[2])/n,t[1]=(r[6]+r[9])/n,t[2]=.25*n),t},r.fromRotationTranslationScale=function(t,r,e,n){var a=r[0],o=r[1],i=r[2],u=r[3],s=a+a,f=o+o,c=i+i,h=a*s,l=a*f,M=a*c,m=o*f,v=o*c,d=i*c,b=u*s,p=u*f,E=u*c,g=n[0],A=n[1],x=n[2];return t[0]=(1-(m+d))*g,t[1]=(l+E)*g,t[2]=(M-p)*g,t[3]=0,t[4]=(l-E)*A,t[5]=(1-(h+d))*A,t[6]=(v+b)*A,t[7]=0,t[8]=(M+p)*x,t[9]=(v-b)*x,t[10]=(1-(h+m))*x,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t},r.fromRotationTranslationScaleOrigin=function(t,r,e,n,a){var o=r[0],i=r[1],u=r[2],s=r[3],f=o+o,c=i+i,h=u+u,l=o*f,M=o*c,m=o*h,v=i*c,d=i*h,b=u*h,p=s*f,E=s*c,g=s*h,A=n[0],x=n[1],B=n[2],P=a[0],w=a[1],L=a[2];return t[0]=(1-(v+b))*A,t[1]=(M+g)*A,t[2]=(m-E)*A,t[3]=0,t[4]=(M-g)*x,t[5]=(1-(l+b))*x,t[6]=(d+p)*x,t[7]=0,t[8]=(m+E)*B,t[9]=(d-p)*B,t[10]=(1-(l+v))*B,t[11]=0,t[12]=e[0]+P-(t[0]*P+t[4]*w+t[8]*L),t[13]=e[1]+w-(t[1]*P+t[5]*w+t[9]*L),t[14]=e[2]+L-(t[2]*P+t[6]*w+t[10]*L),t[15]=1,t},r.fromQuat=function(t,r){var e=r[0],n=r[1],a=r[2],o=r[3],i=e+e,u=n+n,s=a+a,f=e*i,c=n*i,h=n*u,l=a*i,M=a*u,m=a*s,v=o*i,d=o*u,b=o*s;return t[0]=1-h-m,t[1]=c+b,t[2]=l-d,t[3]=0,t[4]=c-b,t[5]=1-f-m,t[6]=M+v,t[7]=0,t[8]=l+d,t[9]=M-v,t[10]=1-f-h,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},r.frustum=function(t,r,e,n,a,o,i){var u=1/(e-r),s=1/(a-n),f=1/(o-i);return t[0]=2*o*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*o*s,t[6]=0,t[7]=0,t[8]=(e+r)*u,t[9]=(a+n)*s,t[10]=(i+o)*f,t[11]=-1,t[12]=0,t[13]=0,t[14]=i*o*2*f,t[15]=0,t},r.perspective=function(t,r,e,n,a){var o=1/Math.tan(r/2),i=1/(n-a);return t[0]=o/e,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(a+n)*i,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*a*n*i,t[15]=0,t},r.perspectiveFromFieldOfView=function(t,r,e,n){var a=Math.tan(r.upDegrees*Math.PI/180),o=Math.tan(r.downDegrees*Math.PI/180),i=Math.tan(r.leftDegrees*Math.PI/180),u=Math.tan(r.rightDegrees*Math.PI/180),s=2/(i+u),f=2/(a+o);return t[0]=s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=f,t[6]=0,t[7]=0,t[8]=-(i-u)*s*.5,t[9]=(a-o)*f*.5,t[10]=n/(e-n),t[11]=-1,t[12]=0,t[13]=0,t[14]=n*e/(e-n),t[15]=0,t},r.ortho=function(t,r,e,n,a,o,i){var u=1/(r-e),s=1/(n-a),f=1/(o-i);return t[0]=-2*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*f,t[11]=0,t[12]=(r+e)*u,t[13]=(a+n)*s,t[14]=(i+o)*f,t[15]=1,t},r.lookAt=function(t,r,e,n){var a=void 0,i=void 0,u=void 0,s=void 0,f=void 0,c=void 0,h=void 0,l=void 0,M=void 0,m=void 0,v=r[0],d=r[1],b=r[2],p=n[0],E=n[1],g=n[2],A=e[0],x=e[1],B=e[2];return Math.abs(v-A)<o.EPSILON&&Math.abs(d-x)<o.EPSILON&&Math.abs(b-B)<o.EPSILON?mat4.identity(t):(h=v-A,l=d-x,M=b-B,a=E*(M*=m=1/Math.sqrt(h*h+l*l+M*M))-g*(l*=m),i=g*(h*=m)-p*M,u=p*l-E*h,(m=Math.sqrt(a*a+i*i+u*u))?(a*=m=1/m,i*=m,u*=m):(a=0,i=0,u=0),s=l*u-M*i,f=M*a-h*u,c=h*i-l*a,(m=Math.sqrt(s*s+f*f+c*c))?(s*=m=1/m,f*=m,c*=m):(s=0,f=0,c=0),t[0]=a,t[1]=s,t[2]=h,t[3]=0,t[4]=i,t[5]=f,t[6]=l,t[7]=0,t[8]=u,t[9]=c,t[10]=M,t[11]=0,t[12]=-(a*v+i*d+u*b),t[13]=-(s*v+f*d+c*b),t[14]=-(h*v+l*d+M*b),t[15]=1,t)},r.targetTo=function(t,r,e,n){var a=r[0],o=r[1],i=r[2],u=n[0],s=n[1],f=n[2],c=a-e[0],h=o-e[1],l=i-e[2],M=c*c+h*h+l*l;M>0&&(c*=M=1/Math.sqrt(M),h*=M,l*=M);var m=s*l-f*h,v=f*c-u*l,d=u*h-s*c;return t[0]=m,t[1]=v,t[2]=d,t[3]=0,t[4]=h*d-l*v,t[5]=l*m-c*d,t[6]=c*v-h*m,t[7]=0,t[8]=c,t[9]=h,t[10]=l,t[11]=0,t[12]=a,t[13]=o,t[14]=i,t[15]=1,t},r.str=function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},r.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2)+Math.pow(t[9],2)+Math.pow(t[10],2)+Math.pow(t[11],2)+Math.pow(t[12],2)+Math.pow(t[13],2)+Math.pow(t[14],2)+Math.pow(t[15],2))},r.add=function(t,r,e){return t[0]=r[0]+e[0],t[1]=r[1]+e[1],t[2]=r[2]+e[2],t[3]=r[3]+e[3],t[4]=r[4]+e[4],t[5]=r[5]+e[5],t[6]=r[6]+e[6],t[7]=r[7]+e[7],t[8]=r[8]+e[8],t[9]=r[9]+e[9],t[10]=r[10]+e[10],t[11]=r[11]+e[11],t[12]=r[12]+e[12],t[13]=r[13]+e[13],t[14]=r[14]+e[14],t[15]=r[15]+e[15],t},r.subtract=a,r.multiplyScalar=function(t,r,e){return t[0]=r[0]*e,t[1]=r[1]*e,t[2]=r[2]*e,t[3]=r[3]*e,t[4]=r[4]*e,t[5]=r[5]*e,t[6]=r[6]*e,t[7]=r[7]*e,t[8]=r[8]*e,t[9]=r[9]*e,t[10]=r[10]*e,t[11]=r[11]*e,t[12]=r[12]*e,t[13]=r[13]*e,t[14]=r[14]*e,t[15]=r[15]*e,t},r.multiplyScalarAndAdd=function(t,r,e,n){return t[0]=r[0]+e[0]*n,t[1]=r[1]+e[1]*n,t[2]=r[2]+e[2]*n,t[3]=r[3]+e[3]*n,t[4]=r[4]+e[4]*n,t[5]=r[5]+e[5]*n,t[6]=r[6]+e[6]*n,t[7]=r[7]+e[7]*n,t[8]=r[8]+e[8]*n,t[9]=r[9]+e[9]*n,t[10]=r[10]+e[10]*n,t[11]=r[11]+e[11]*n,t[12]=r[12]+e[12]*n,t[13]=r[13]+e[13]*n,t[14]=r[14]+e[14]*n,t[15]=r[15]+e[15]*n,t},r.exactEquals=function(t,r){return t[0]===r[0]&&t[1]===r[1]&&t[2]===r[2]&&t[3]===r[3]&&t[4]===r[4]&&t[5]===r[5]&&t[6]===r[6]&&t[7]===r[7]&&t[8]===r[8]&&t[9]===r[9]&&t[10]===r[10]&&t[11]===r[11]&&t[12]===r[12]&&t[13]===r[13]&&t[14]===r[14]&&t[15]===r[15]},r.equals=function(t,r){var e=t[0],n=t[1],a=t[2],i=t[3],u=t[4],s=t[5],f=t[6],c=t[7],h=t[8],l=t[9],M=t[10],m=t[11],v=t[12],d=t[13],b=t[14],p=t[15],E=r[0],g=r[1],A=r[2],x=r[3],B=r[4],P=r[5],w=r[6],L=r[7],R=r[8],_=r[9],T=r[10],I=r[11],S=r[12],y=r[13],N=r[14],O=r[15];return Math.abs(e-E)<=o.EPSILON*Math.max(1,Math.abs(e),Math.abs(E))&&Math.abs(n-g)<=o.EPSILON*Math.max(1,Math.abs(n),Math.abs(g))&&Math.abs(a-A)<=o.EPSILON*Math.max(1,Math.abs(a),Math.abs(A))&&Math.abs(i-x)<=o.EPSILON*Math.max(1,Math.abs(i),Math.abs(x))&&Math.abs(u-B)<=o.EPSILON*Math.max(1,Math.abs(u),Math.abs(B))&&Math.abs(s-P)<=o.EPSILON*Math.max(1,Math.abs(s),Math.abs(P))&&Math.abs(f-w)<=o.EPSILON*Math.max(1,Math.abs(f),Math.abs(w))&&Math.abs(c-L)<=o.EPSILON*Math.max(1,Math.abs(c),Math.abs(L))&&Math.abs(h-R)<=o.EPSILON*Math.max(1,Math.abs(h),Math.abs(R))&&Math.abs(l-_)<=o.EPSILON*Math.max(1,Math.abs(l),Math.abs(_))&&Math.abs(M-T)<=o.EPSILON*Math.max(1,Math.abs(M),Math.abs(T))&&Math.abs(m-I)<=o.EPSILON*Math.max(1,Math.abs(m),Math.abs(I))&&Math.abs(v-S)<=o.EPSILON*Math.max(1,Math.abs(v),Math.abs(S))&&Math.abs(d-y)<=o.EPSILON*Math.max(1,Math.abs(d),Math.abs(y))&&Math.abs(b-N)<=o.EPSILON*Math.max(1,Math.abs(b),Math.abs(N))&&Math.abs(p-O)<=o.EPSILON*Math.max(1,Math.abs(p),Math.abs(O))};var o=function(t){if(t&&t.__esModule)return t;var r={};if(null!=t)for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(r[e]=t[e]);return r.default=t,r}(e(0));r.mul=n,r.sub=a},function(t,r,e){"use strict";function n(t){if(t&&t.__esModule)return t;var r={};if(null!=t)for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(r[e]=t[e]);return r.default=t,r}function a(){var t=new f.ARRAY_TYPE(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function o(t,r,e){e*=.5;var n=Math.sin(e);return t[0]=n*r[0],t[1]=n*r[1],t[2]=n*r[2],t[3]=Math.cos(e),t}function i(t,r,e){var n=r[0],a=r[1],o=r[2],i=r[3],u=e[0],s=e[1],f=e[2],c=e[3];return t[0]=n*c+i*u+a*f-o*s,t[1]=a*c+i*s+o*u-n*f,t[2]=o*c+i*f+n*s-a*u,t[3]=i*c-n*u-a*s-o*f,t}function u(t,r,e,n){var a=r[0],o=r[1],i=r[2],u=r[3],s=e[0],f=e[1],c=e[2],h=e[3],l=void 0,M=void 0,m=void 0,v=void 0,d=void 0;return(M=a*s+o*f+i*c+u*h)<0&&(M=-M,s=-s,f=-f,c=-c,h=-h),1-M>1e-6?(l=Math.acos(M),m=Math.sin(l),v=Math.sin((1-n)*l)/m,d=Math.sin(n*l)/m):(v=1-n,d=n),t[0]=v*a+d*s,t[1]=v*o+d*f,t[2]=v*i+d*c,t[3]=v*u+d*h,t}function s(t,r){var e=r[0]+r[4]+r[8],n=void 0;if(e>0)n=Math.sqrt(e+1),t[3]=.5*n,n=.5/n,t[0]=(r[5]-r[7])*n,t[1]=(r[6]-r[2])*n,t[2]=(r[1]-r[3])*n;else{var a=0;r[4]>r[0]&&(a=1),r[8]>r[3*a+a]&&(a=2);var o=(a+1)%3,i=(a+2)%3;n=Math.sqrt(r[3*a+a]-r[3*o+o]-r[3*i+i]+1),t[a]=.5*n,n=.5/n,t[3]=(r[3*o+i]-r[3*i+o])*n,t[o]=(r[3*o+a]+r[3*a+o])*n,t[i]=(r[3*i+a]+r[3*a+i])*n}return t}Object.defineProperty(r,"__esModule",{value:!0}),r.setAxes=r.sqlerp=r.rotationTo=r.equals=r.exactEquals=r.normalize=r.sqrLen=r.squaredLength=r.len=r.length=r.lerp=r.dot=r.scale=r.mul=r.add=r.set=r.copy=r.fromValues=r.clone=void 0,r.create=a,r.identity=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},r.setAxisAngle=o,r.getAxisAngle=function(t,r){var e=2*Math.acos(r[3]),n=Math.sin(e/2);return 0!=n?(t[0]=r[0]/n,t[1]=r[1]/n,t[2]=r[2]/n):(t[0]=1,t[1]=0,t[2]=0),e},r.multiply=i,r.rotateX=function(t,r,e){e*=.5;var n=r[0],a=r[1],o=r[2],i=r[3],u=Math.sin(e),s=Math.cos(e);return t[0]=n*s+i*u,t[1]=a*s+o*u,t[2]=o*s-a*u,t[3]=i*s-n*u,t},r.rotateY=function(t,r,e){e*=.5;var n=r[0],a=r[1],o=r[2],i=r[3],u=Math.sin(e),s=Math.cos(e);return t[0]=n*s-o*u,t[1]=a*s+i*u,t[2]=o*s+n*u,t[3]=i*s-a*u,t},r.rotateZ=function(t,r,e){e*=.5;var n=r[0],a=r[1],o=r[2],i=r[3],u=Math.sin(e),s=Math.cos(e);return t[0]=n*s+a*u,t[1]=a*s-n*u,t[2]=o*s+i*u,t[3]=i*s-o*u,t},r.calculateW=function(t,r){var e=r[0],n=r[1],a=r[2];return t[0]=e,t[1]=n,t[2]=a,t[3]=Math.sqrt(Math.abs(1-e*e-n*n-a*a)),t},r.slerp=u,r.invert=function(t,r){var e=r[0],n=r[1],a=r[2],o=r[3],i=e*e+n*n+a*a+o*o,u=i?1/i:0;return t[0]=-e*u,t[1]=-n*u,t[2]=-a*u,t[3]=o*u,t},r.conjugate=function(t,r){return t[0]=-r[0],t[1]=-r[1],t[2]=-r[2],t[3]=r[3],t},r.fromMat3=s,r.fromEuler=function(t,r,e,n){var a=.5*Math.PI/180;r*=a,e*=a,n*=a;var o=Math.sin(r),i=Math.cos(r),u=Math.sin(e),s=Math.cos(e),f=Math.sin(n),c=Math.cos(n);return t[0]=o*s*c-i*u*f,t[1]=i*u*c+o*s*f,t[2]=i*s*f-o*u*c,t[3]=i*s*c+o*u*f,t},r.str=function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"};var f=n(e(0)),c=n(e(1)),h=n(e(2)),l=n(e(3)),M=(r.clone=l.clone,r.fromValues=l.fromValues,r.copy=l.copy,r.set=l.set,r.add=l.add,r.mul=i,r.scale=l.scale,r.dot=l.dot,r.lerp=l.lerp,r.length=l.length),m=(r.len=M,r.squaredLength=l.squaredLength),v=(r.sqrLen=m,r.normalize=l.normalize);r.exactEquals=l.exactEquals,r.equals=l.equals,r.rotationTo=function(){var t=h.create(),r=h.fromValues(1,0,0),e=h.fromValues(0,1,0);return function(n,a,i){var u=h.dot(a,i);return u<-.999999?(h.cross(t,r,a),h.len(t)<1e-6&&h.cross(t,e,a),h.normalize(t,t),o(n,t,Math.PI),n):u>.999999?(n[0]=0,n[1]=0,n[2]=0,n[3]=1,n):(h.cross(t,a,i),n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=1+u,v(n,n))}}(),r.sqlerp=function(){var t=a(),r=a();return function(e,n,a,o,i,s){return u(t,n,i,s),u(r,a,o,s),u(e,t,r,2*s*(1-s)),e}}(),r.setAxes=function(){var t=c.create();return function(r,e,n,a){return t[0]=n[0],t[3]=n[1],t[6]=n[2],t[1]=a[0],t[4]=a[1],t[7]=a[2],t[2]=-e[0],t[5]=-e[1],t[8]=-e[2],v(r,s(r,t))}}()},function(t,r,e){"use strict";function n(){var t=new h.ARRAY_TYPE(2);return t[0]=0,t[1]=0,t}function a(t,r,e){return t[0]=r[0]-e[0],t[1]=r[1]-e[1],t}function o(t,r,e){return t[0]=r[0]*e[0],t[1]=r[1]*e[1],t}function i(t,r,e){return t[0]=r[0]/e[0],t[1]=r[1]/e[1],t}function u(t,r){var e=r[0]-t[0],n=r[1]-t[1];return Math.sqrt(e*e+n*n)}function s(t,r){var e=r[0]-t[0],n=r[1]-t[1];return e*e+n*n}function f(t){var r=t[0],e=t[1];return Math.sqrt(r*r+e*e)}function c(t){var r=t[0],e=t[1];return r*r+e*e}Object.defineProperty(r,"__esModule",{value:!0}),r.forEach=r.sqrLen=r.sqrDist=r.dist=r.div=r.mul=r.sub=r.len=void 0,r.create=n,r.clone=function(t){var r=new h.ARRAY_TYPE(2);return r[0]=t[0],r[1]=t[1],r},r.fromValues=function(t,r){var e=new h.ARRAY_TYPE(2);return e[0]=t,e[1]=r,e},r.copy=function(t,r){return t[0]=r[0],t[1]=r[1],t},r.set=function(t,r,e){return t[0]=r,t[1]=e,t},r.add=function(t,r,e){return t[0]=r[0]+e[0],t[1]=r[1]+e[1],t},r.subtract=a,r.multiply=o,r.divide=i,r.ceil=function(t,r){return t[0]=Math.ceil(r[0]),t[1]=Math.ceil(r[1]),t},r.floor=function(t,r){return t[0]=Math.floor(r[0]),t[1]=Math.floor(r[1]),t},r.min=function(t,r,e){return t[0]=Math.min(r[0],e[0]),t[1]=Math.min(r[1],e[1]),t},r.max=function(t,r,e){return t[0]=Math.max(r[0],e[0]),t[1]=Math.max(r[1],e[1]),t},r.round=function(t,r){return t[0]=Math.round(r[0]),t[1]=Math.round(r[1]),t},r.scale=function(t,r,e){return t[0]=r[0]*e,t[1]=r[1]*e,t},r.scaleAndAdd=function(t,r,e,n){return t[0]=r[0]+e[0]*n,t[1]=r[1]+e[1]*n,t},r.distance=u,r.squaredDistance=s,r.length=f,r.squaredLength=c,r.negate=function(t,r){return t[0]=-r[0],t[1]=-r[1],t},r.inverse=function(t,r){return t[0]=1/r[0],t[1]=1/r[1],t},r.normalize=function(t,r){var e=r[0],n=r[1],a=e*e+n*n;return a>0&&(a=1/Math.sqrt(a),t[0]=r[0]*a,t[1]=r[1]*a),t},r.dot=function(t,r){return t[0]*r[0]+t[1]*r[1]},r.cross=function(t,r,e){var n=r[0]*e[1]-r[1]*e[0];return t[0]=t[1]=0,t[2]=n,t},r.lerp=function(t,r,e,n){var a=r[0],o=r[1];return t[0]=a+n*(e[0]-a),t[1]=o+n*(e[1]-o),t},r.random=function(t,r){r=r||1;var e=2*h.RANDOM()*Math.PI;return t[0]=Math.cos(e)*r,t[1]=Math.sin(e)*r,t},r.transformMat2=function(t,r,e){var n=r[0],a=r[1];return t[0]=e[0]*n+e[2]*a,t[1]=e[1]*n+e[3]*a,t},r.transformMat2d=function(t,r,e){var n=r[0],a=r[1];return t[0]=e[0]*n+e[2]*a+e[4],t[1]=e[1]*n+e[3]*a+e[5],t},r.transformMat3=function(t,r,e){var n=r[0],a=r[1];return t[0]=e[0]*n+e[3]*a+e[6],t[1]=e[1]*n+e[4]*a+e[7],t},r.transformMat4=function(t,r,e){var n=r[0],a=r[1];return t[0]=e[0]*n+e[4]*a+e[12],t[1]=e[1]*n+e[5]*a+e[13],t},r.str=function(t){return"vec2("+t[0]+", "+t[1]+")"},r.exactEquals=function(t,r){return t[0]===r[0]&&t[1]===r[1]},r.equals=function(t,r){var e=t[0],n=t[1],a=r[0],o=r[1];return Math.abs(e-a)<=h.EPSILON*Math.max(1,Math.abs(e),Math.abs(a))&&Math.abs(n-o)<=h.EPSILON*Math.max(1,Math.abs(n),Math.abs(o))};var h=function(t){if(t&&t.__esModule)return t;var r={};if(null!=t)for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(r[e]=t[e]);return r.default=t,r}(e(0));r.len=f,r.sub=a,r.mul=o,r.div=i,r.dist=u,r.sqrDist=s,r.sqrLen=c,r.forEach=function(){var t=n();return function(r,e,n,a,o,i){var u,s=void 0;for(e||(e=2),n||(n=0),u=a?Math.min(a*e+n,r.length):r.length,s=n;s<u;s+=e)t[0]=r[s],t[1]=r[s+1],o(t,t,i),r[s]=t[0],r[s+1]=t[1];return r}}()}])});class t{constructor(){this.isLoaded=!1,this.minXYZ=[0,0,0],this.maxXYZ=[0,0,0],this.numFaces=0,this.numVertices=0,this.vBuffer=[],this.fBuffer=[],this.nBuffer=[],this.eBuffer=[],this.texcoordBuffer=[],console.log("TriMesh: Allocated buffers"),null==r.getExtension("OES_element_index_uint")?alert("OES_element_index_uint is unsupported by your browser and terrain generation cannot proceed."):console.log("OES_element_index_uint is supported!")}loaded(){return this.isLoaded}loadFromOBJ(t){for(var r=t.split("\n"),e=0;e<r.length;e++){r[e]=r[e].replace(/  +/g," ");var n=r[e].split(" ");"#"==n[0][0]?console.log(r[e]):"v"==n[0]?(this.vBuffer.push(parseFloat(n[1])),this.vBuffer.push(parseFloat(n[2])),this.vBuffer.push(parseFloat(n[3])),this.numVertices++):"f"==n[0]&&(this.fBuffer.push(parseInt(n[1])-1),this.fBuffer.push(parseInt(n[2])-1),this.fBuffer.push(parseInt(n[3])-1),this.numFaces++)}console.log("TriMesh: Loaded ",this.numFaces," triangles."),console.log("TriMesh: Loaded ",this.numVertices," vertices."),this.generateNormals(),console.log("TriMesh: Generated normals"),this.generateLines(),console.log("TriMesh: Generated lines"),this.loadBuffers(),this.isLoaded=!0}loadAsCube(){this.vBuffer=[-1,-1,1,1,-1,1,1,1,1,-1,1,1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1,-1,-1,1,-1,-1,1,1,1,1,1,1,1,-1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,-1,1,-1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1],this.numVertices=this.vBuffer.length/3,this.fBuffer=[0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23],this.numFaces=this.fBuffer.length/3,this.generateNormals(),console.log("TriMesh: Generated normals"),this.generateLines(),console.log("TriMesh: Generated lines"),this.loadBuffers(),this.isLoaded=!0}loadBuffers(){this.VertexPositionBuffer=r.createBuffer(),r.bindBuffer(r.ARRAY_BUFFER,this.VertexPositionBuffer),r.bufferData(r.ARRAY_BUFFER,new Float32Array(this.vBuffer),r.STATIC_DRAW),this.VertexPositionBuffer.itemSize=3,this.VertexPositionBuffer.numItems=this.numVertices,this.VertexNormalBuffer=r.createBuffer(),r.bindBuffer(r.ARRAY_BUFFER,this.VertexNormalBuffer),r.bufferData(r.ARRAY_BUFFER,new Float32Array(this.nBuffer),r.STATIC_DRAW),this.VertexNormalBuffer.itemSize=3,this.VertexNormalBuffer.numItems=this.numVertices,this.IndexTriBuffer=r.createBuffer(),r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,this.IndexTriBuffer),r.bufferData(r.ELEMENT_ARRAY_BUFFER,new Uint32Array(this.fBuffer),r.STATIC_DRAW),this.IndexTriBuffer.itemSize=1,this.IndexTriBuffer.numItems=this.fBuffer.length,this.IndexEdgeBuffer=r.createBuffer(),r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,this.IndexEdgeBuffer),r.bufferData(r.ELEMENT_ARRAY_BUFFER,new Uint32Array(this.eBuffer),r.STATIC_DRAW),this.IndexEdgeBuffer.itemSize=1,this.IndexEdgeBuffer.numItems=this.eBuffer.length}drawTriangles(){r.bindBuffer(r.ARRAY_BUFFER,this.VertexPositionBuffer),r.vertexAttribPointer(n.vertexPositionAttribute,this.VertexPositionBuffer.itemSize,r.FLOAT,!1,0,0),r.bindBuffer(r.ARRAY_BUFFER,this.VertexNormalBuffer),r.vertexAttribPointer(n.vertexNormalAttribute,this.VertexNormalBuffer.itemSize,r.FLOAT,!1,0,0),r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,this.IndexTriBuffer),r.drawElements(r.TRIANGLES,this.IndexTriBuffer.numItems,r.UNSIGNED_INT,0)}drawEdges(){r.bindBuffer(r.ARRAY_BUFFER,this.VertexPositionBuffer),r.vertexAttribPointer(n.vertexPositionAttribute,this.VertexPositionBuffer.itemSize,r.FLOAT,!1,0,0),r.bindBuffer(r.ARRAY_BUFFER,this.VertexNormalBuffer),r.vertexAttribPointer(n.vertexNormalAttribute,this.VertexNormalBuffer.itemSize,r.FLOAT,!1,0,0),r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,this.IndexEdgeBuffer),r.drawElements(r.LINES,this.IndexEdgeBuffer.numItems,r.UNSIGNED_INT,0)}printBuffers(){for(var t=0;t<this.numVertices;t++)console.log("v ",this.vBuffer[3*t]," ",this.vBuffer[3*t+1]," ",this.vBuffer[3*t+2]," ");for(t=0;t<this.numFaces;t++)console.log("f ",this.fBuffer[3*t]," ",this.fBuffer[3*t+1]," ",this.fBuffer[3*t+2]," ")}generateLines(){for(var t=this.fBuffer.length/3,r=0;r<t;r++){var e=3*r;this.eBuffer.push(this.fBuffer[e]),this.eBuffer.push(this.fBuffer[e+1]),this.eBuffer.push(this.fBuffer[e+1]),this.eBuffer.push(this.fBuffer[e+2]),this.eBuffer.push(this.fBuffer[e+2]),this.eBuffer.push(this.fBuffer[e])}}generateCylindricalTexCoords(){for(var t=0;t<=this.div;t++)for(var r=0;r<=this.div;r++){var e=[0,0,0];this.getVertex(e,t,r),e[2]=.25*Math.random(),this.setVertex(e,t,r)}this.loadBuffers()}setVertex(t,r,e,n){var a=3*(i*(this.div+1)+j)+2;this.vBuffer[a]=h}getVertex(t,r){var e=3*t;r[0]=this.vBuffer[e],r[1]=this.vBuffer[e+1],r[2]=this.vBuffer[e+2]}flipNormals(){for(var t=0;t<this.nBuffer.length;t++)this.nBuffer[t]*=-1}scale(t){for(var r=0;r<this.vBuffer.length;r++)this.vBuffer[r]*=t}generateNormals(){this.numNormals=this.numVertices,this.nBuffer=new Array(3*this.numNormals);for(var t=0;t<this.nBuffer.length;t++)this.nBuffer[t]=0;for(t=0;t<this.numFaces;t++){var r=this.fBuffer[3*t],e=vec3.fromValues(this.vBuffer[3*r],this.vBuffer[3*r+1],this.vBuffer[3*r+2]),n=this.fBuffer[3*t+1],a=vec3.fromValues(this.vBuffer[3*n],this.vBuffer[3*n+1],this.vBuffer[3*n+2]),o=this.fBuffer[3*t+2],i=vec3.fromValues(this.vBuffer[3*o],this.vBuffer[3*o+1],this.vBuffer[3*o+2]),u=vec3.create();vec3.subtract(u,a,e);var s=vec3.create();vec3.subtract(s,i,e);var f=vec3.fromValues(0,0,0);vec3.cross(f,u,s);for(var c=0;c<3;c++)this.nBuffer[3*r+c]+=f[c],this.nBuffer[3*n+c]+=f[c],this.nBuffer[3*o+c]+=f[c]}for(t=0;t<this.numNormals;t++){f=vec3.fromValues(this.nBuffer[3*t],this.nBuffer[3*t+1],this.nBuffer[3*t+2]);vec3.normalize(f,f),this.nBuffer[3*t]=f[0],this.nBuffer[3*t+1]=f[1],this.nBuffer[3*t+2]=f[2]}}}var r,e,n,a,o,u,s,f,c,l,M,m,v,d,b,p=mat4.create(),E=mat4.create(),g=mat4.create(),A=mat3.create(),x=[],B=40,P=vec3.fromValues(0,0,10),w=vec3.fromValues(0,0,-1),L=vec3.fromValues(0,1,0),R=vec3.fromValues(1,0,0),_=quat.create(),T=quat.create(),I=quat.create(),S=vec3.fromValues(0,0,-1),y=vec3.fromValues(1,0,0),N=vec3.fromValues(0,0,0),O=vec3.fromValues(0,0,-1),q=vec3.fromValues(0,1,0),U=mat4.create(),Y=vec3.create(),F=[40,40,40],V=[.1,.1,.1],D=[1,1,1],C=[.7,.7,.7],G=[1,1,1],X=[.7,.7,.7],z=[1,1,1],W=23,k=[0,0,0],H=[1,1,1],Q=[o,u,s,f,c,l],Z=[0,0,0,0,0,0],K=[1,0],J=10,$=5,tt=4,rt=0,et=!1,nt={};function at(t){var r=Nt(360/$),e=0,n=0;nt.a&&(e+=r*t),nt.d&&(e-=r*t),nt.s&&(n+=r*t),nt.w&&(n-=r*t),quat.setAxisAngle(_,[0,1,0],e),quat.setAxisAngle(T,O,n),quat.identity(I),quat.mul(I,_,I),quat.mul(I,T,I),vec3.transformQuat(O,O,I),vec3.transformQuat(q,q,I),nt.arrowup&&vec3.add(P,P,S),nt.arrowdown&&vec3.sub(P,P,S);var a=nt.arrowleft?-1:nt.arrowright?1:0;a*=r*t,vec3.rotateY(P,P,[0,0,0],a),vec3.rotateY(w,w,[0,0,0],a),vec3.rotateY(L,L,[0,0,0],a),vec3.rotateY(R,R,[0,0,0],a)}function ot(t){var r=Nt(360/$);nt.w&&vec3.add(P,P,S),nt.s&&vec3.sub(P,P,S),nt.a&&vec3.sub(P,P,y),nt.d&&vec3.add(P,P,y);var e=0,n=0;nt.arrowleft&&(e+=.8*r*t),nt.arrowright&&(e-=.8*r*t),nt.arrowup&&(n+=.8*r*t),nt.arrowdown&&(n-=.8*r*t),quat.setAxisAngle(_,[0,1,0],e),quat.setAxisAngle(T,R,n),quat.identity(I),quat.mul(I,_,I),quat.mul(I,T,I),vec3.transformQuat(w,w,I),vec3.transformQuat(L,L,I),vec3.transformQuat(R,R,I)}function it(){r.viewport(0,0,r.viewportWidth,r.viewportHeight),r.clear(r.COLOR_BUFFER_BIT|r.DEPTH_BUFFER_BIT);var t=(performance.now()-d)/1e3,e=t-b;b=t,vec3.scale(S,w,5*e),vec3.scale(y,R,5*e),et?ot(e):at(e);var o=document.getElementById("orbitSpeed").value;rt+=e*o*2/100;for(var i=0;i<K.length;i++){var u=document.getElementById("orbitOffset").value/100,s=(i+.5)/(2*K.length),f=Math.cos(2*s*Math.PI),c=Math.sin(2*s*Math.PI),h=Math.cos((rt+2*s*u*$)*Math.PI*2/$),l=Math.sin((rt+2*s*u*$)*Math.PI*2/$);ut(i,tt*f*l,tt*c*l,tt*h)}if(mat4.perspective(g,Nt(45),r.viewportWidth/r.viewportHeight,.1,500),vec3.add(N,P,w),mat4.lookAt(E,P,N,L),At(F,V,D,C),0!=K.length&&(r.uniform3fv(r.getUniformLocation(n,"spherePos"),Z),r.uniform1iv(r.getUniformLocation(n,"sphereType"),K)),r.uniform1i(r.getUniformLocation(n,"numSpheres"),K.length),r.uniform3fv(r.getUniformLocation(n,"eyePos"),P),gt(W,G,X,z),1==a.loaded()){var M=document.getElementById("reflective").checked?2:0;r.uniform1i(r.getUniformLocation(n,"uMode"),M),Tt(),mat4.translate(p,p,[0,-1,0]),mat4.translate(p,p,[0,.5,0]),vec3.add(Y,[0,0,0],O),mat4.targetTo(U,[0,0,0],Y,q),mat4.mul(p,U,p),mat4.translate(p,p,[0,-.5,0]),Et(),a.drawTriangles(),It()}if(1==v.loaded())for(i=0;i<K.length;i++)Tt(),r.uniform1i(r.getUniformLocation(n,"uMode"),0==K[i]?2:3),mat4.translate(p,p,st(i)),Et(),v.drawTriangles(),It();Tt(),r.uniform1i(r.getUniformLocation(n,"uMode"),1),r.uniform1i(r.getUniformLocation(n,"uCubeSampler"),0),mat4.scale(p,p,[B,B,B]),Et(),m.drawTriangles(),It()}function ut(t,r,e,n){Z[3*t]=r,Z[3*t+1]=e,Z[3*t+2]=n}function st(t){return[Z[3*t],Z[3*t+1],Z[3*t+2]]}function ft(t){K.length>=J||(Z.push(0,2,0),K.push(t))}function ct(){K.pop(),Z.pop(),Z.pop(),Z.pop()}function ht(t){var r=t.key.toLowerCase();nt[r]=!0,"arrowup"!=r&&"arrowleft"!=r&&"arrowright"!=r&&"arrowdown"!=r||t.preventDefault(),"e"==r&&ft(1),"r"==r&&ft(0),"t"==r&&ct()," "==r&&(et=!et)}function lt(t){nt[t.key.toLowerCase()]=!1}function Mt(){e.width=window.innerWidth,e.height=window.innerHeight,r.viewportWidth=e.width,r.viewportHeight=e.height}function startup(){e=document.getElementById("myGLCanvas"),r=Ot(e),vt(),Rt(),Bt(),Pt(),wt("teapot.obj"),r.clearColor(0,0,0,1),r.enable(r.DEPTH_TEST),document.onkeydown=ht,document.onkeyup=lt,d=performance.now(),window.addEventListener("resize",Mt,!1),Mt(),b=(performance.now()-d)/1e3,mt()}function mt(){requestAnimFrame(mt),it()}function vt(){vertexShader=_t("shader-vs"),fragmentShader=_t("shader-fs"),n=r.createProgram(),r.attachShader(n,vertexShader),r.attachShader(n,fragmentShader),r.linkProgram(n),r.getProgramParameter(n,r.LINK_STATUS)||alert("Failed to setup shaders"),r.useProgram(n),n.vertexPositionAttribute=r.getAttribLocation(n,"aVertexPosition"),r.enableVertexAttribArray(n.vertexPositionAttribute),n.vertexNormalAttribute=r.getAttribLocation(n,"aVertexNormal"),r.enableVertexAttribArray(n.vertexNormalAttribute),n.mMatrixUniform=r.getUniformLocation(n,"uMMatrix"),n.vMatrixUniform=r.getUniformLocation(n,"uVMatrix"),n.pMatrixUniform=r.getUniformLocation(n,"uPMatrix"),n.nMatrixUniform=r.getUniformLocation(n,"uNMatrix"),n.uniformLightPositionLoc=r.getUniformLocation(n,"uLightPosition"),n.uniformAmbientLightColorLoc=r.getUniformLocation(n,"uAmbientLightColor"),n.uniformDiffuseLightColorLoc=r.getUniformLocation(n,"uDiffuseLightColor"),n.uniformSpecularLightColorLoc=r.getUniformLocation(n,"uSpecularLightColor"),n.uniformShininessLoc=r.getUniformLocation(n,"uShininess"),n.uniformAmbientMaterialColorLoc=r.getUniformLocation(n,"uKAmbient"),n.uniformDiffuseMaterialColorLoc=r.getUniformLocation(n,"uKDiffuse"),n.uniformSpecularMaterialColorLoc=r.getUniformLocation(n,"uKSpecular")}function dt(){r.uniformMatrix4fv(n.mMatrixUniform,!1,p),r.uniformMatrix4fv(n.vMatrixUniform,!1,E)}function bt(){r.uniformMatrix4fv(n.pMatrixUniform,!1,g)}function pt(){mat3.fromMat4(A,p),mat3.transpose(A,A),mat3.invert(A,A),r.uniformMatrix3fv(n.nMatrixUniform,!1,A)}function Et(){dt(),pt(),bt()}function gt(t,e,a,o){r.uniform1f(n.uniformShininessLoc,t),r.uniform3fv(n.uniformAmbientMaterialColorLoc,e),r.uniform3fv(n.uniformDiffuseMaterialColorLoc,a),r.uniform3fv(n.uniformSpecularMaterialColorLoc,o)}function At(t,e,a,o){r.uniform3fv(n.uniformLightPositionLoc,t),r.uniform3fv(n.uniformAmbientLightColorLoc,e),r.uniform3fv(n.uniformDiffuseLightColorLoc,a),r.uniform3fv(n.uniformSpecularLightColorLoc,o)}function xt(t,e){console.log("handleTextureLoaded, image = "+t),r.bindTexture(r.TEXTURE_CUBE_MAP,M),0==e?r.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_Z,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,t):1==e?r.texImage2D(r.TEXTURE_CUBE_MAP_NEGATIVE_Z,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,t):2==e?r.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_Y,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,t):3==e?r.texImage2D(r.TEXTURE_CUBE_MAP_NEGATIVE_Y,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,t):4==e?r.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,t):5==e&&r.texImage2D(r.TEXTURE_CUBE_MAP_NEGATIVE_X,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,t),r.texParameteri(r.TEXTURE_CUBE_MAP,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_CUBE_MAP,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_CUBE_MAP,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_CUBE_MAP,r.TEXTURE_MAG_FILTER,r.LINEAR)}function Bt(){(m=new t).loadAsCube()}function Pt(){v=new t,myPromise=yt("sphere.obj"),myPromise.then(t=>{v.loadFromOBJ(t),v.scale(.3),v.loadBuffers(),console.log("Yay! got the file")}).catch(t=>{console.log("Handle rejected promise ("+t+") here.")})}function wt(r){a=new t,myPromise=yt(r),myPromise.then(t=>{a.loadFromOBJ(t),console.log("Yay! got the file")}).catch(t=>{console.log("Handle rejected promise ("+t+") here.")})}function Lt(t,r){myPromise=St(t,r),myPromise.then(t=>{xt(Q[r],r),console.log("Yay! got the file")}).catch(t=>{console.log("Handle rejected promise ("+t+") here.")})}function Rt(){M=r.createTexture(),Lt("pos-z.png",0),Lt("neg-z.png",1),Lt("pos-y.png",2),Lt("neg-y.png",3),Lt("pos-x.png",4),Lt("neg-x.png",5)}function _t(t){var e=document.getElementById(t);if(!e)return null;for(var n,a="",o=e.firstChild;o;)3==o.nodeType&&(a+=o.textContent),o=o.nextSibling;if("x-shader/x-fragment"==e.type)n=r.createShader(r.FRAGMENT_SHADER);else{if("x-shader/x-vertex"!=e.type)return null;n=r.createShader(r.VERTEX_SHADER)}return r.shaderSource(n,a),r.compileShader(n),r.getShaderParameter(n,r.COMPILE_STATUS)?n:(alert(r.getShaderInfoLog(n)),null)}function Tt(){var t=mat4.clone(p);x.push(t)}function It(){if(0==x.length)throw"Invalid popMatrix!";p=x.pop()}function St(t,r){return console.log("Getting image"),new Promise((e,n)=>{Q[r]=new Image,Q[r].onload=(()=>e({url:t,status:"ok"})),Q[r].onerror=(()=>n({url:t,status:"error"})),Q[r].src=t,console.log("Made promise")})}function yt(t){return console.log("Getting text file"),new Promise((r,e)=>{const n=new XMLHttpRequest;n.open("GET",t),n.onload=(()=>r(n.responseText)),n.onerror=(()=>e(n.statusText)),n.send(),console.log("Made promise")})}function Nt(t){return t*Math.PI/180}function Ot(t){for(var r=["webgl","experimental-webgl"],e=null,n=0;n<r.length;n++){try{e=t.getContext(r[n])}catch(t){}if(e)break}return e?(e.viewportWidth=t.width,e.viewportHeight=t.height):alert("Failed to create WebGL context!"),e}